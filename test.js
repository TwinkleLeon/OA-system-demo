
/*
*jquery 1.5.1
*/
eval(function (p, a, c, k, e, d) { e = function (c) { return (c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36)) }; if (!''.replace(/^/, String)) { while (c--) { d[e(c)] = k[c] || e(c) } k = [function (e) { return d[e] }]; e = function () { return '\\w+' }; c = 1 }; while (c--) { if (k[c]) { p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c]) } } return p }('(7(a,b){14(1c 6U.1K.aa!=\'7\'){6U.1K.aa=7(a9,a8){6[a9]=a8;12 6}}14(1c 4s.ab!=\'7\'){4s.ab=7(o){17 F=7(){};F.1K=o;12 2b F()}}14(1c 4Z.1K.ac!=\'7\'){4Z.1K.ac=7(){17 t=6.1m(/(^\\s*)|(\\s*$)/g,\'\');14(t==\'\'||t==2z||t.18<=0||t==19)12 7h;12 79}}14(1c 35.1K.1m!=\'7\'){35.1K.1m=7(4I,ae){17 3r=6.7t();17 cB=3r.cv(\'/\');17 48=0;17 18=3r.1Z(4I).18;3r=3r.1m(4I,7(w){14(48==18-2){48++;12 ae}48++;12 w});3r=3r.cy(1,3r.18-1);12 2b 35(3r)}}7 cg(a){12 d.4f(a)?a:a.1b===9?a.5H||a.cz:!1}7 cd(a){14(!cl[a]){17 b=d("<"+a+">").98("1R"),c=b.1y("1W");b.2h();14(c==="2K"||c==="")c="73";cl[a]=c}12 cl[a]}7 cc(a,b){17 c={};d.1g(cb.6n.1E([],cb.2d(0,b)),7(){c[6]=a});12 c}7 bY(){1H{12 2b a.8r("an.cH")}1F(b){}}7 bX(){1H{12 2b a.9R}1F(b){}}7 bW(){d(a).7I(7(){1a(17 a 1h bU)bU[a](0,1)})}7 bQ(a,c){a.ad&&(c=a.ad(c,a.5k));17 e=a.2T,f={},g,h,i=e.18,j,k=e[0],l,m,n,o,p;1a(g=1;g<i;g++){14(g===1)1a(h 1h a.4p)1c h==="1t"&&(f[h.1u()]=a.4p[h]);l=k,k=e[g];14(k==="*")k=l;1k 14(l!=="*"&&l!==k){m=l+" "+k,n=f[m]||f["* "+k];14(!n){p=b;1a(o 1h f){j=o.1Z(" ");14(j[0]===l||j[0]==="*"){p=f[j[1]+" "+k];14(p){o=f[o],o===!0?n=p:p===!0&&(n=o);1M}}}}!n&&!p&&d.2a("9H cQ cR "+m.1m(" "," cS ")),n!==!0&&(c=n?n(c):p(o(c)))}}12 c}7 bP(a,c,d){17 e=a.4o,f=a.2T,g=a.b3,h,i,j,k;1a(i 1h g)i 1h d&&(c[g[i]]=d[i]);1x(f[0]==="*")f.2U(),h===b&&(h=a.78||c.6H("cP-1f"));14(h)1a(i 1h e)14(e[i]&&e[i].1d(h)){f.3f(i);1M}14(f[0]1h d)j=f[0];1k{1a(i 1h d){14(!f[0]||a.4p[i+" "+f[0]]){j=i;1M}k||(k=i)}j=j||k}14(j){j!==f[0]&&f.3f(j);12 d[j]}}7 bO(a,b,c,e){14(d.2o(b)&&b.18)d.1g(b,7(b,f){c||bq.1d(a)?e(a,f):bO(a+"["+(1c f==="1L"||d.2o(f)?b:"")+"]",f,c,e)});1k 14(c||b==19||1c b!=="1L")e(a,b);1k 14(d.2o(b)||d.5K(b))e(a,"");1k 1a(17 f 1h b)bO(a+"["+f+"]",b[f],c,e)}7 bN(a,c,d,e,f,g){f=f||c.2T[0],g=g||{},g[f]=!0;17 h=a[f],i=0,j=h?h.18:0,k=a===bH,l;1a(;i<j&&(k||!l);i++)l=h[i](c,d,e),1c l==="1t"&&(!k||g[l]?l=b:(c.2T.3f(l),l=bN(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bN(a,c,d,e,"*",g));12 l}7 bM(a){12 7(b,c){1c b!=="1t"&&(c=b,b="*");14(d.1s(c)){17 e=b.1u().1Z(bB),f=0,g=e.18,h,i,j;1a(;f<g;f++)h=e[f],j=/^\\+/.1d(h),j&&(h=h.4t(1)||"*"),i=a[h]=a[h]||[],i[j?"3f":"1w"](c)}}}7 bo(a,b,c){17 e=b==="2A"?bi:bj,f=b==="2A"?a.4R:a.5W;14(c==="4n")12 f;d.1g(e,7(){c||(f-=1T(d.1y(a,"5T"+6))||0),c==="4X"?f+=1T(d.1y(a,"4X"+6))||0:f-=1T(d.1y(a,"4n"+6+"a7"))||0});12 f}7 ba(a,b){b.6X?d.4h({1D:b.6X,3k:!1,5k:"1Y"}):d.8C(b.1B||b.91||b.2s||""),b.1j&&b.1j.2Q(b)}7 3J(a){12"1S"1h a?a.1S("*"):"4m"1h a?a.4m("*"):[]}7 $(a,b){14(b.1b===1){17 c=b.1l.1u();b.cK(),b.cJ(a);14(c==="1L")b.9Z=a.9Z;1k 14(c!=="2R"||a.1f!=="3I"&&a.1f!=="3x"){14(c==="4g")b.3D=a.cU;1k 14(c==="2R"||c==="4F")b.a3=a.a3}1k a.2p&&(b.bT=b.2p=a.2p),b.2k!==a.2k&&(b.2k=a.2k);b.3Q(d.1J)}}7 Z(a,b){14(b.1b===1&&d.7p(a)){17 c=d.1J,e=d.1q(a),f=d.1q(b,e);14(e=e[c]){17 g=e.2t;f=f[c]=d.1r({},e);14(g){2m f.2e,f.2t={};1a(17 h 1h g)1a(17 i=0,j=g[h].18;i<j;i++)d.1o.2u(b,h+(g[h][i].2M?".":"")+g[h][i].2M,g[h][i],g[h][i].1q)}}}}7 Y(a,b){12 d.1l(a,"2f")?a.1S("2x")[0]||a.3g(a.26.22("2x")):a}7 O(a,b,c){14(d.1s(b))12 d.4V(a,7(a,d){17 e=!!b.1i(a,d,a);12 e===c});14(b.1b)12 d.4V(a,7(a,d){12 a===b===c});14(1c b==="1t"){17 e=d.4V(a,7(a){12 a.1b===1});14(J.1d(b))12 d.1C(b,e,!c);b=d.1C(b,e)}12 d.4V(a,7(a,e){12 d.3V(a,b)>=0===c})}7 N(a){12!a||!a.1j||a.1j.1b===11}7 F(a,b){12(a&&a!=="*"?a+".":"")+b.1m(r,"`").1m(s,"&")}7 E(a){17 b,c,e,f,g,h,i,j,k,l,m,n,o,q=[],r=[],s=d.24(6,"2t");14(a.5Y!==6&&s&&s.3z&&!a.2g.2Y&&(!a.2J||a.1f!=="4u")){a.2M&&(n=2b 35("(^|\\\\.)"+a.2M.1Z(".").3w("\\\\.(?:.*\\\\.)?")+"(\\\\.|$)")),a.5Y=6;17 t=s.3z.2d(0);1a(i=0;i<t.18;i++)g=t[i],g.6T.1m(p,"")===a.1f?r.1w(g.1Q):t.2D(i--,1);f=d(a.2g).4B(r,a.5x);1a(j=0,k=f.18;j<k;j++){m=f[j];1a(i=0;i<t.18;i++){g=t[i];14(m.1Q===g.1Q&&(!n||n.1d(g.2M))&&!m.1v.2Y){h=m.1v,e=19;14(g.6K==="4Y"||g.6K==="4J")a.1f=g.6K,e=d(a.5I).4B(g.1Q)[0];(!e||e!==h)&&q.1w({1v:h,4T:g,5G:m.5G})}}}1a(j=0,k=q.18;j<k;j++){f=q[j];14(c&&f.5G>c)1M;a.5x=f.1v,a.1q=f.4T.1q,a.4T=f.4T,o=f.4T.93.1E(f.1v,1p);14(o===!1||a.6j()){c=f.5G,o===!1&&(b=!1);14(a.6C())1M}}12 b}}7 C(a,c,e){17 f=d.1r({},e[0]);f.1f=a,f.6S={},f.5Y=b,d.1o.2e.1i(c,f),f.5U()&&e[0].30()}7 w(){12!0}7 v(){12!1}7 g(a){1a(17 b 1h a)14(b!=="7U")12!1;12!0}7 f(a,c,f){14(f===b&&a.1b===1){f=a.29("1q-"+c);14(1c f==="1t"){1H{f=f==="7h"?!0:f==="79"?!1:f==="19"?19:d.43(f)?e.1d(f)?d.7c(f):f:1T(f)}1F(g){}d.1q(a,c,f)}1k f=b}12 f}17 c=a.3Y,d=7(){7 I(){14(!d.5X){1H{c.1G.ai("1z")}1F(a){5i(I,1);12}d.2E()}}17 d=7(a,b){12 2b d.fn.46(a,b,g)},e=a.5V,f=a.$,g,h=/^(?:[^<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]+)$)/,i=/\\S/,j=/^\\s+/,k=/\\s+$/,l=/\\d/,m=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>)?$/,n=/^[\\],:{}\\s]*$/,o=/\\\\(?:["\\\\\\/c0]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\\\\n\\r]*"|7h|79|19|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,q=/(?:^|:|,)(?:\\s*\\[)+/g,r=/(9q)[ \\/]([\\w.]+)/,s=/(c2)(?:.*6W)?[ \\/]([\\w.]+)/,t=/(bR) ([\\w.]+)/,u=/(b6)(?:.*? b8:([\\w.]+))?/,v=bb.b9,w,x=!1,y,z="5r 3b 57 6r 9B 3j".1Z(" "),A,B=4s.1K.7t,C=4s.1K.cq,D=2S.1K.1w,E=2S.1K.2d,F=4Z.1K.4G,G=2S.1K.28,H={};d.fn=d.1K={3G:d,46:7(a,e,f){17 g,i,j,k;14(!a)12 6;14(a.1b){6.2O=6[0]=a,6.18=1;12 6}14(a==="1R"&&!e&&c.1R){6.2O=c,6[0]=c.1R,6.1Q="1R",6.18=1;12 6}14(1c a==="1t"){g=h.1P(a);14(!g||!g[1]&&e)12!e||e.4P?(e||f).1X(a):6.3G(e).1X(a);14(g[1]){e=e 6F d?e[0]:e,k=e?e.26||e:c,j=m.1P(a),j?d.59(e)?(a=[c.22(j[1])],d.fn.3P.1i(a,e,!0)):a=[k.22(j[1])]:(j=d.7Y([g[1]],[k]),a=(j.8v?d.3X(j.5p):j.5p).2N);12 d.4Q(6,a)}i=c.4j(g[2]);14(i&&i.1j){14(i.33!==g[2])12 f.1X(a);6.18=1,6[0]=i}6.2O=c,6.1Q=a;12 6}14(d.1s(a))12 f.2E(a);a.1Q!==b&&(6.1Q=a.1Q,6.2O=a.2O);12 d.37(a,6)},1Q:"",4P:"1.5.1",18:0,c6:7(){12 6.18},6d:7(){12 E.1i(6,0)},2y:7(a){12 a==19?6.6d():a<0?6[6.18+a]:6[a]},2H:7(a,b,c){17 e=6.3G();d.2o(a)?D.1E(e,a):d.4Q(e,a),e.7Z=6,e.2O=6.2O,b==="1X"?e.1Q=6.1Q+(6.1Q?" ":"")+c:b&&(e.1Q=6.1Q+"."+b+"("+c+")");12 e},1g:7(a,b){12 d.1g(6,a,b)},2E:7(a){d.83(),y.3b(a);12 6},eq:7(a){12 a===-1?6.2d(a):6.2d(a,+a+1)},4L:7(){12 6.eq(0)},5E:7(){12 6.eq(-1)},2d:7(){12 6.2H(E.1E(6,1p),"2d",E.1i(1p).3w(","))},2r:7(a){12 6.2H(d.2r(6,7(b,c){12 a.1i(b,c,b)}))},4H:7(){12 6.7Z||6.3G(19)},1w:D,47:[].47,2D:[].2D},d.fn.46.1K=d.fn,d.1r=d.fn.1r=7(){17 a,c,e,f,g,h,i=1p[0]||{},j=1,k=1p.18,l=!1;1c i==="71"&&(l=i,i=1p[1]||{},j=2),1c i!=="1L"&&!d.1s(i)&&(i={}),k===j&&(i=6,--j);1a(;j<k;j++)14((a=1p[j])!=19)1a(c 1h a){e=i[c],f=a[c];14(i===f)3N;l&&f&&(d.59(f)||(g=d.2o(f)))?(g?(g=!1,h=e&&d.2o(e)?e:[]):h=e&&d.59(e)?e:{},i[c]=d.1r(l,h,f)):f!==b&&(i[c]=f)}12 i},d.1r({aj:7(1q){6.c5.aj(1q)},c9:7(b){a.$=f,b&&(a.5V=e);12 d},5X:!1,62:1,2E:7(a){a===!0&&d.62--;14(!d.62||a!==!0&&!d.5X){14(!c.1R)12 5i(d.2E,1);d.5X=!0;14(a!==!0&&--d.62>0)12;y.3q(c,[d]),d.fn.2l&&d(c).2l("2E").4y("2E")}},83:7(){14(!x){x=!0;14(c.3a==="2L")12 5i(d.2E,1);14(c.3s)c.3s("9s",A,!1),a.3s("6q",d.2E,!1);1k 14(c.3y){c.3y("4z",A),a.3y("6V",d.2E);17 b=!1;1H{b=a.aX==19}1F(e){}c.1G.ai&&b&&I()}}},1s:7(a){12 d.1f(a)==="7"},2o:2S.2o||7(a){12 d.1f(a)==="9y"},4f:7(a){12 a&&1c a==="1L"&&"9X"1h a},43:7(a){12 a==19||!l.1d(a)||43(a)},1f:7(a){12 a==19?4Z(a):H[B.1i(a)]||"1L"},59:7(a){14(!a||d.1f(a)!=="1L"||a.1b||d.4f(a))12!1;14(a.3G&&!C.1i(a,"3G")&&!C.1i(a.3G.1K,"dN"))12!1;17 c;1a(c 1h a){}12 c===b||C.1i(a,c)},5K:7(a){1a(17 b 1h a)12!1;12!0},2a:7(a){7F a},7c:7(b){14(1c b!=="1t"||!b)12 19;b=d.4G(b);14(n.1d(b.1m(o,"@").1m(p,"]").1m(q,"")))12 a.63&&a.63.ah?a.63.ah(b):(2b 6U("12 "+b))();d.2a("9A 63: "+b)},aW:7(b,c,e){a.ak?(e=2b ak,c=e.dy(b,"1B/3o")):(c=2b 8r("an.dn"),c.3k="79",c.dr(b)),e=c.1G,(!e||!e.1l||e.1l==="aD")&&d.2a("9A dA: "+b);12 c},4C:7(){},8C:7(a){14(a&&i.1d(a)){17 b=c.6Y||c.1S("6Y")[0]||c.1G,e=c.22("1Y");d.1n.9v()?e.3g(c.5f(a)):e.1B=a,b.2Z(e,b.1A),b.2Q(e)}},1l:7(a,b){12 a.1l&&a.1l.5v()===b.5v()},1g:7(a,c,e){17 f,g=0,h=a.18,i=h===b||d.1s(a);14(e){14(i){1a(f 1h a)14(c.1E(a[f],e)===!1)1M}1k 1a(;g<h;)14(c.1E(a[g++],e)===!1)1M}1k 14(i){1a(f 1h a)14(c.1i(a[f],f,a[f])===!1)1M}1k 1a(17 j=a[0];g<h&&c.1i(j,g,j)!==!1;j=a[++g]){}12 a},4G:F?7(a){12 a==19?"":F.1i(a)}:7(a){12 a==19?"":(a+"").1m(j,"").1m(k,"")},37:7(a,b){17 c=b||[];14(a!=19){17 e=d.1f(a);a.18==19||e==="1t"||e==="7"||e==="dB"||d.4f(a)?D.1i(c,a):d.4Q(c,a)}12 c},3V:7(a,b){14(b.28)12 b.28(a);1a(17 c=0,d=b.18;c<d;c++)14(b[c]===a)12 c;12-1},4Q:7(a,c){17 d=a.18,e=0;14(1c c.18==="3L")1a(17 f=c.18;e<f;e++)a[d++]=c[e];1k 1x(c[e]!==b)a[d++]=c[e++];a.18=d;12 a},4V:7(a,b,c){17 d=[],e;c=!!c;1a(17 f=0,g=a.18;f<g;f++)e=!!b(a[f],f),c!==e&&d.1w(a[f]);12 d},2r:7(a,b,c){17 d=[],e;1a(17 f=0,g=a.18;f<g;f++)e=b(a[f],f,c),e!=19&&(d[d.18]=e);12 d.6n.1E([],d)},1U:1,4v:7(a,c,e){1p.18===2&&(1c c==="1t"?(e=a,a=e[c],c=b):c&&!d.1s(c)&&(e=c,c=b)),!c&&a&&(c=7(){12 a.1E(e||6,1p)}),a&&(c.1U=a.1U=a.1U||c.1U||d.1U++);12 c},6P:7(a,c,e,f,g,h){17 i=a.18;14(1c c==="1L"){1a(17 j 1h c)d.6P(a,j,c[j],f,g,e);12 a}14(e!==b){f=!h&&f&&d.1s(e);1a(17 k=0;k<i;k++)g(a[k],c,f?e.1i(a[k],k,g(a[k],c)):e,h);12 a}12 i?g(a[0],c):b},2j:7(){12(2b 8k).8T()},5d:7(){17 a=[],b,c,e,f={3b:7(){14(!e){17 c=1p,g,h,i,j,k;b&&(k=b,b=0);1a(g=0,h=c.18;g<h;g++)i=c[g],j=d.1f(i),j==="9y"?f.3b.1E(f,i):j==="7"&&a.1w(i);k&&f.3q(k[0],k[1])}12 6},3q:7(d,f){14(!e&&!b&&!c){c=1;1H{1x(a[0])a.2U().1E(d,f)}1F(g){7F g}8M{b=[d,f],c=0}}12 6},7T:7(){f.3q(d.1s(6.3j)?6.3j():6,1p);12 6},6r:7(){12 c||b},6O:7(){e=1,a=[];12 6}};12 f},8n:7(a){17 b=d.5d(),c=d.5d(),e;d.1r(b,{5r:7(a,c){b.3b(a).57(c);12 6},57:c.3b,aB:c.3q,9C:c.7T,9B:c.6r,3j:7(a){14(a==19){14(e)12 e;e=a={}}17 c=z.18;1x(c--)a[z[c]]=b[z[c]];12 a}}),b.3b(c.6O).57(b.6O),2m b.6O,a&&a.1i(b,b);12 b},dM:7(a){17 b=1p.18,c=b<=1&&a&&d.1s(a.3j)?a:d.8n(),e=c.3j();14(b>1){17 f=E.1i(1p,0),g=b,h=7(a){12 7(b){f[a]=1p.18>1?E.1i(1p,0):b,--g||c.3q(e,f)}};1x(b--)a=f[b],a&&d.1s(a.3j)?a.3j().5r(h(b),c.9C):--g;g||c.3q(e,f)}1k c!==a&&c.7T(a);12 e},9r:7(a){a=a.1u();17 b=r.1P(a)||s.1P(a)||t.1P(a)||a.28("dH")<0&&u.1P(a)||[];12{3E:b[1]||"",6W:b[2]||"0"}},dD:7(){7 a(b,c){12 2b a.fn.46(b,c)}d.1r(!0,a,6),a.dE=6,a.fn=a.1K=6(),a.fn.3G=a,a.9D=6.9D,a.fn.46=7 b(b,c){c&&c 6F d&&!(c 6F a)&&(c=a(c));12 d.fn.46.1i(6,b,c,e)},a.fn.46.1K=a.fn;17 e=a(c);12 a},3E:{}}),y=d.5d(),d.1g("dm d3 4Z 6U 2S 8k 35 4s".1Z(" "),7(a,b){H["[1L "+b+"]"]=b.1u()}),w=d.9r(v),w.3E&&(d.3E[w.3E]=!0,d.3E.6W=w.6W),d.3E.9q&&(d.3E.d1=!0),G&&(d.3V=7(a,b){12 G.1i(b,a)}),i.1d(" ")&&(j=/^[\\s\\9p]+/,k=/[\\s\\9p]+$/),g=d(c),c.3s?A=7(){c.5h("9s",A,!1),d.2E()}:c.3y&&(A=7(){c.3a==="2L"&&(c.67("4z",A),d.2E())});12 d}();(7(){d.1n={};17 b=c.22("1N");b.1e.1W="2K",b.2s="   <7S/><2f></2f><a 2I=\'/a\' 1e=\'aP:9t;8z:1z;23:.55;\'>a</a><2R 1f=\'3I\'/>";17 e=b.1S("*"),f=b.1S("a")[0],g=c.22("2q"),h=g.3g(c.22("4g")),i=b.1S("2R")[0];14(e&&e.18&&f){d.1n={7O:b.1A.1b===3,2x:!b.1S("2x").18,9d:!!b.1S("7S").18,1e:/9t/.1d(f.29("1e")),aN:f.29("2I")==="/a",23:/^0.55$/.1d(f.1e.23),6o:!!f.1e.6o,aK:i.2k==="34",aF:h.3D,5l:!0,8D:!1,61:!1,7f:!0,7l:!0,4O:19,8x:!1,86:!1,5e:!0},i.2p=!0,d.1n.7l=i.5u(!0).2p,g.2Y=!0,d.1n.8D=!h.2Y;17 j=19;d.1n.9v=7(){14(j===19){17 b=c.1G,e=c.22("1Y"),f="1Y"+d.2j();1H{e.3g(c.5f("5z."+f+"=1;"))}1F(g){}b.2Z(e,b.1A),a[f]?(j=!0,2m a[f]):j=!1,b.2Q(e),b=e=f=19}12 j};1H{2m b.1d}1F(k){d.1n.5l=!1}!b.3s&&b.3y&&b.9u&&(b.3y("7K",7 l(){d.1n.7f=!1,b.67("7K",l)}),b.5u(!0).9u("7K")),b=c.22("1N"),b.2s="<2R 1f=\'3x\' 2X=\'d9\' 2p=\'2p\'/>";17 m=c.97();m.3g(b.1A),d.1n.61=m.5u(!0).5u(!0).7G.2p,d(7(){17 a=c.22("1N"),b=c.1S("1R")[0];14(b){a.1e.2A=a.1e.9w="4k",b.3g(a),d.4O=d.1n.4O=a.4R===2,"5J"1h a.1e&&(a.1e.1W="4q",a.1e.5J=1,d.1n.8x=a.4R===2,a.1e.1W="",a.2s="<1N 1e=\'2A:dh;\'></1N>",d.1n.86=a.4R!==2),a.2s="<2f><3S><3n 1e=\'5T:0;4n:0;1W:2K\'></3n><3n>t</3n></3S></2f>";17 e=a.1S("3n");d.1n.5e=e[0].5W===0,e[0].1e.1W="",e[1].1e.1W="2K",d.1n.5e=d.1n.5e&&e[0].5W===0,a.2s="",b.2Q(a).1e.1W="2K",a=e=19}});17 n=7(a){17 b=c.22("1N");a="34"+a;14(!b.3y)12!0;17 d=a 1h b;d||(b.8y(a,"12;"),d=1c b[a]==="7"),b=19;12 d};d.1n.8G=n("3K"),d.1n.8I=n("5C"),b=e=f=19}})();17 e=/^(?:\\{.*\\}|\\[.*\\])$/;d.1r({3p:{},9J:0,1J:"5V"+(d.fn.4P+44.dd()).1m(/\\D/g,""),5j:{88:!0,1L:"dw:de-dc-da-db-df",dg:!0},7p:7(a){a=a.1b?d.3p[a[d.1J]]:a[d.1J];12!!a&&!g(a)},1q:7(a,c,e,f){14(d.7W(a)){17 g=d.1J,h=1c c==="1t",i,j=a.1b,k=j?d.3p:a,l=j?a[d.1J]:a[d.1J]&&d.1J;14((!l||f&&l&&!k[l][g])&&h&&e===b)12;l||(j?a[d.1J]=l=++d.9J:l=d.1J),k[l]||(k[l]={},j||(k[l].7U=d.4C));14(1c c==="1L"||1c c==="7")f?k[l][g]=d.1r(k[l][g],c):k[l]=d.1r(k[l],c);i=k[l],f&&(i[g]||(i[g]={}),i=i[g]),e!==b&&(i[c]=e);14(c==="2t"&&!i[c])12 i[g]&&i[g].2t;12 h?i[c]:i}},5t:7(b,c,e){14(d.7W(b)){17 f=d.1J,h=b.1b,i=h?d.3p:b,j=h?b[d.1J]:d.1J;14(!i[j])12;14(c){17 k=e?i[j][f]:i[j];14(k){2m k[c];14(!g(k))12}}14(e){2m i[j][f];14(!g(i[j]))12}17 l=i[j][f];d.1n.5l||i!=a?2m i[j]:i[j]=19,l?(i[j]={},h||(i[j].7U=d.4C),i[j][f]=l):h&&(d.1n.5l?2m b[d.1J]:b.3Q?b.3Q(d.1J):b[d.1J]=19)}},24:7(a,b,c){12 d.1q(a,b,c,!0)},7W:7(a){14(a.1l){17 b=d.5j[a.1l.1u()];14(b)12 b!==!0&&a.29("d0")===b}12!0}}),d.fn.1r({1q:7(a,c){17 e=19;14(1c a==="2z"){14(6.18){e=d.1q(6[0]);14(6[0].1b===1){17 g=6[0].7n,h;1a(17 i=0,j=g.18;i<j;i++)h=g[i].2X,h.28("1q-")===0&&(h=h.4t(5),f(6[0],h,e[h]))}}12 e}14(1c a==="1L")12 6.1g(7(){d.1q(6,a)});17 k=a.1Z(".");k[1]=k[1]?"."+k[1]:"";14(c===b){e=6.6c("cZ"+k[1]+"!",[k[0]]),e===b&&6.18&&(e=d.1q(6[0],a),e=f(6[0],a,e));12 e===b&&k[1]?6.1q(k[0]):e}12 6.1g(7(){17 b=d(6),e=[k[0],c];b.6c("cY"+k[1]+"!",e),d.1q(6,a,c),b.6c("cW"+k[1]+"!",e)})},5t:7(a){12 6.1g(7(){d.5t(6,a)})}}),d.1r({2B:7(a,b,c){14(a){b=(b||"fx")+"2B";17 e=d.24(a,b);14(!c)12 e||[];!e||d.2o(c)?e=d.24(a,b,d.37(c)):e.1w(c);12 e}},3C:7(a,b){b=b||"fx";17 c=d.2B(a,b),e=c.2U();e==="8f"&&(e=c.2U()),e&&(b==="fx"&&c.3f("8f"),e.1i(a,7(){d.3C(a,b)})),c.18||d.5t(a,b+"2B",!0)}}),d.fn.1r({2B:7(a,c){1c a!=="1t"&&(c=a,a="fx");14(c===b)12 d.2B(6[0],a);12 6.1g(7(b){17 e=d.2B(6,a,c);a==="fx"&&e[0]!=="8f"&&d.3C(6,a)})},3C:7(a){12 6.1g(7(){d.3C(6,a)})},d7:7(a,b){a=d.fx?d.fx.5F[a]||a:a,b=b||"fx";12 6.2B(b,7(){17 c=6;5i(7(){d.3C(c,b)},a)})},dG:7(a){12 6.2B(a||"fx",[])}});17 h=/[\\n\\t\\r]/g,i=/\\s+/,j=/\\r/g,k=/^(?:2I|6X|1e)$/,l=/^(?:2J|2R)$/i,m=/^(?:2J|2R|1L|2q|4F)$/i,n=/^a(?:dF)?$/i,o=/^(?:3x|3I)$/i;d.5n={"1a":"8W","3t":"25",dC:"8H",dK:"cN",as:"c8",cp:"cu",cM:"cT",cI:"8m",cC:"dL",bZ:"d4"},d.fn.1r({3P:7(a,b){12 d.6P(6,a,b,!0,d.3P)},d2:7(a,b){12 6.1g(7(){d.3P(6,a,""),6.1b===1&&6.3Q(a)})},82:7(a){14(d.1s(a))12 6.1g(7(b){17 c=d(6);c.82(a.1i(6,b,c.3P("3t")))});14(a&&1c a==="1t"){17 b=(a||"").1Z(i);1a(17 c=0,e=6.18;c<e;c++){17 f=6[c];14(f.1b===1)14(f.25){17 g=" "+f.25+" ",h=f.25;1a(17 j=0,k=b.18;j<k;j++)g.28(" "+b[j]+" ")<0&&(h+=" "+b[j]);f.25=d.4G(h)}1k f.25=a}}12 6},8h:7(a){14(d.1s(a))12 6.1g(7(b){17 c=d(6);c.8h(a.1i(6,b,c.3P("3t")))});14(a&&1c a==="1t"||a===b){17 c=(a||"").1Z(i);1a(17 e=0,f=6.18;e<f;e++){17 g=6[e];14(g.1b===1&&g.25)14(a){17 j=(" "+g.25+" ").1m(h," ");1a(17 k=0,l=c.18;k<l;k++)j=j.1m(" "+c[k]+" "," ");g.25=d.4G(j)}1k g.25=""}}12 6},b5:7(a,b){17 c=1c a,e=1c b==="71";14(d.1s(a))12 6.1g(7(c){17 e=d(6);e.b5(a.1i(6,c,e.3P("3t"),b),b)});12 6.1g(7(){14(c==="1t"){17 f,g=0,h=d(6),j=b,k=a.1Z(i);1x(f=k[g++])j=e?j:!h.aJ(f),h[j?"82":"8h"](f)}1k 14(c==="2z"||c==="71")6.25&&d.24(6,"aH",6.25),6.25=6.25||a===!1?"":d.24(6,"aH")||""})},aJ:7(a){17 b=" "+a+" ";1a(17 c=0,d=6.18;c<d;c++)14((" "+6[c].25+" ").1m(h," ").28(b)>-1)12!0;12!1},3A:7(a){14(!1p.18){17 c=6[0];14(c){14(d.1l(c,"4g")){17 e=c.7n.2k;12!e||e.ay?c.2k:c.1B}14(d.1l(c,"2q")){17 f=c.41,g=[],h=c.1I,i=c.1f==="2q-58";14(f<0)12 19;1a(17 k=i?f:0,l=i?f+1:h.18;k<l;k++){17 m=h[k];14(m.3D&&(d.1n.8D?!m.2Y:m.29("2Y")===19)&&(!m.1j.2Y||!d.1l(m.1j,"9l"))){a=d(m).3A();14(i)12 a;g.1w(a)}}14(i&&!g.18&&h.18)12 d(h[f]).3A();12 g}14(o.1d(c.1f)&&!d.1n.aK)12 c.29("2k")===19?"34":c.2k;12(c.2k||"").1m(j,"")}12 b}17 n=d.1s(a);12 6.1g(7(b){17 c=d(6),e=a;14(6.1b===1){n&&(e=a.1i(6,b,c.3A())),e==19?e="":1c e==="3L"?e+="":d.2o(e)&&(e=d.2r(e,7(a){12 a==19?"":a+""}));14(d.2o(e)&&o.1d(6.1f))6.2p=d.3V(c.3A(),e)>=0;1k 14(d.1l(6,"2q")){17 f=d.37(e);d("4g",6).1g(7(){6.3D=d.3V(d(6).3A(),f)>=0}),f.18||(6.41=-1)}1k 6.2k=e}})}}),d.1r({6a:{3A:!0,1y:!0,2v:!0,1B:!0,1q:!0,2A:!0,3l:!0,1V:!0},3P:7(a,c,e,f){14(!a||a.1b===3||a.1b===8||a.1b===2)12 b;14(f&&c 1h d.6a)12 d(a)[c](e);17 g=a.1b!==1||!d.7k(a),h=e!==b;c=g&&d.5n[c]||c;14(a.1b===1){17 i=k.1d(c);14(c==="3D"&&!d.1n.aF){17 j=a.1j;j&&(j.41,j.1j&&j.1j.41)}14((c 1h a||a[c]!==b)&&g&&!i){h&&(c==="1f"&&l.1d(a.1l)&&a.1j&&d.2a("1f dk dj\'t be d8"),e===19?a.1b===1&&a.3Q(c):a[c]=e);14(d.1l(a,"5w")&&a.3Z(c))12 a.3Z(c).6B;14(c==="8m"){17 o=a.3Z("8m");12 o&&o.ay?o.2k:m.1d(a.1l)||n.1d(a.1l)&&a.2I?0:b}12 a[c]}14(!d.1n.1e&&g&&c==="1e"){h&&(a.1e.aA=""+e);12 a.1e.aA}h&&a.8y(c,""+e);14(!a.7n[c]&&(a.aC&&!a.aC(c)))12 b;17 p=!d.1n.aN&&g&&i?a.29(c,2):a.29(c);12 p===19?b:p}h&&(a[c]=e);12 a[c]}});17 p=/\\.(.*)$/,q=/^(?:4F|2R|2q)$/i,r=/\\./g,s=/ /g,t=/[^\\w\\s.|`]/g,u=7(a){12 a.1m(t,"\\\\$&")};d.1o={2u:7(c,e,f,g){14(c.1b!==3&&c.1b!==8){1H{d.4f(c)&&(c!==a&&!c.aX)&&(c=a)}1F(h){}14(f===!1)f=v;1k 14(!f)12;17 i,j;f.2w&&(i=f,f=i.2w),f.1U||(f.1U=d.1U++);17 k=d.24(c);14(!k)12;17 l=k.2t,m=k.2e;l||(k.2t=l={}),m||(k.2e=m=7(){12 1c d!=="2z"&&!d.1o.7j?d.1o.2e.1E(m.1v,1p):b}),m.1v=c,e=e.1Z(" ");17 n,o=0,p;1x(n=e[o++]){j=i?d.1r({},i):{2w:f,1q:g},n.28(".")>-1?(p=n.1Z("."),n=p.2U(),j.2M=p.2d(0).47().3w(".")):(p=[],j.2M=""),j.1f=n,j.1U||(j.1U=f.1U);17 q=l[n],r=d.1o.36[n]||{};14(!q){q=l[n]=[];14(!r.3T||r.3T.1i(c,g,p,m)===!1)c.3s?c.3s(n,m,!1):c.3y&&c.3y("34"+n,m)}r.2u&&(r.2u.1i(c,j),j.2w.1U||(j.2w.1U=f.1U)),q.1w(j),d.1o.4r[n]=!0}c=19}},4r:{},2h:7(a,c,e,f){14(a.1b!==3&&a.1b!==8){e===!1&&(e=v);17 g,h,i,j,k=0,l,m,n,o,p,q,r,s=d.7p(a)&&d.24(a),t=s&&s.2t;14(!s||!t)12;c&&c.1f&&(e=c.2w,c=c.1f);14(!c||1c c==="1t"&&c.94(0)==="."){c=c||"";1a(h 1h t)d.1o.2h(a,h+c);12}c=c.1Z(" ");1x(h=c[k++]){r=h,q=19,l=h.28(".")<0,m=[],l||(m=h.1Z("."),h=m.2U(),n=2b 35("(^|\\\\.)"+d.2r(m.2d(0).47(),u).3w("\\\\.(?:.*\\\\.)?")+"(\\\\.|$)")),p=t[h];14(!p)3N;14(!e){1a(j=0;j<p.18;j++){q=p[j];14(l||n.1d(q.2M))d.1o.2h(a,r,q.2w,j),p.2D(j--,1)}3N}o=d.1o.36[h]||{};1a(j=f||0;j<p.18;j++){q=p[j];14(e.1U===q.1U){14(l||n.1d(q.2M))f==19&&p.2D(j--,1),o.2h&&o.2h.1i(a,q);14(f!=19)1M}}14(p.18===0||f!=19&&p.18===1)(!o.3U||o.3U.1i(a,m)===!1)&&d.7r(a,h,s.2e),g=19,2m t[h]}14(d.5K(t)){17 w=s.2e;w&&(w.1v=19),2m s.2t,2m s.2e,d.5K(s)&&d.5t(a,b,!0)}}},2l:7(a,c,e){17 f=a.1f||a,g=1p[3];14(!g){a=1c a==="1L"?a[d.1J]?a:d.1r(d.4c(f),a):d.4c(f),f.28("!")>=0&&(a.1f=f=f.2d(0,-1),a.aY=!0),e||(a.4i(),d.1o.4r[f]&&d.1g(d.3p,7(){17 b=d.1J,e=6[b];e&&e.2t&&e.2t[f]&&d.1o.2l(a,c,e.2e.1v)}));14(!e||e.1b===3||e.1b===8)12 b;a.5o=b,a.2g=e,c=d.37(c),c.3f(a)}a.5x=e;17 h=d.24(e,"2e");h&&h.1E(e,c);17 i=e.1j||e.26;1H{e&&e.1l&&d.5j[e.1l.1u()]||e["34"+f]&&e["34"+f].1E(e,c)===!1&&(a.5o=!1,a.30())}1F(j){}14(!a.6j()&&i)d.1o.2l(a,c,i,!0);1k 14(!a.5U()){17 k,l=a.2g,m=f.1m(p,""),n=d.1l(l,"a")&&m==="4u",o=d.1o.36[m]||{};14((!o.3i||o.3i.1i(e,a)===!1)&&!n&&!(l&&l.1l&&d.5j[l.1l.1u()])){1H{l[m]&&(k=l["34"+m],k&&(l["34"+m]=19),d.1o.7j=!0,l[m]())}1F(q){}k&&(l["34"+m]=k),d.1o.7j=!1}}},2e:7(c){17 e,f,g,h,i,j=[],k=d.37(1p);c=k[0]=d.1o.7s(c||a.1o),c.5x=6,e=c.1f.28(".")<0&&!c.aY,e||(g=c.1f.1Z("."),c.1f=g.2U(),j=g.2d(0).47(),h=2b 35("(^|\\\\.)"+j.3w("\\\\.(?:.*\\\\.)?")+"(\\\\.|$)")),c.2M=c.2M||j.3w("."),i=d.24(6,"2t"),f=(i||{})[c.1f];14(i&&f){f=f.2d(0);1a(17 l=0,m=f.18;l<m;l++){17 n=f[l];14(e||h.1d(n.2M)){c.2w=n.2w,c.1q=n.1q,c.4T=n;17 o=n.2w.1E(6,k);o!==b&&(c.5o=o,o===!1&&(c.30(),c.4i()));14(c.6C())1M}}}12 c.5o},5n:"dJ ds dq dp 2J dt 69 8c aO 7q 5x 1q du dz 6b 2w 4K dv cV 8A c7 ce cn 85 aU cs cr 5I co c4 ct b0 2g aV c3 b7 54".1Z(" "),7s:7(a){14(a[d.1J])12 a;17 e=a;a=d.4c(e);1a(17 f=6.5n.18,g;f;)g=6.5n[--f],a[g]=e[g];a.2g||(a.2g=a.b0||c),a.2g.1b===3&&(a.2g=a.2g.1j),!a.5I&&a.6b&&(a.5I=a.6b===a.2g?a.aV:a.6b);14(a.85==19&&a.8c!=19){17 h=c.1G,i=c.1R;a.85=a.8c+(h&&h.3B||i&&i.3B||0)-(h&&h.6A||i&&i.6A||0),a.aU=a.aO+(h&&h.3O||i&&i.3O||0)-(h&&h.6I||i&&i.6I||0)}a.54==19&&(a.69!=19||a.4K!=19)&&(a.54=a.69!=19?a.69:a.4K),!a.8A&&a.7q&&(a.8A=a.7q),!a.54&&a.2J!==b&&(a.54=a.2J&1?1:a.2J&2?3:a.2J&4?2:0);12 a},1U:cL,4v:d.4v,36:{2E:{3T:d.83,3U:d.4C},3z:{2u:7(a){d.1o.2u(6,F(a.6T,a.1Q),d.1r({},a,{2w:E,1U:a.2w.1U}))},2h:7(a){d.1o.2h(6,F(a.6T,a.1Q),a)}},cO:{3T:7(a,b,c){d.4f(6)&&(6.8d=c)},3U:7(a,b){6.8d===b&&(6.8d=19)}}}},d.7r=c.5h?7(a,b,c){a.5h&&a.5h(b,c,!1)}:7(a,b,c){a.67&&a.67("34"+b,c)},d.4c=7(a){14(!6.30)12 2b d.4c(a);a&&a.1f?(6.6S=a,6.1f=a.1f,6.5U=a.cx||a.9V===!1||a.aT&&a.aT()?w:v):6.1f=a,6.cF=d.2j(),6[d.1J]=!0},d.4c.1K={30:7(){6.5U=w;17 a=6.6S;a&&(a.30?a.30():a.9V=!1)},4i:7(){6.6j=w;17 a=6.6S;a&&(a.4i&&a.4i(),a.cD=!0)},cE:7(){6.6C=w,6.4i()},5U:v,6j:v,6C:v};17 x=7(a){17 b=a.5I;1H{14(b!==c&&!b.1j)12;1x(b&&b!==6)b=b.1j;b!==6&&(a.1f=a.1q,d.1o.2e.1E(6,1p))}1F(e){}},y=7(a){a.1f=a.1q,d.1o.2e.1E(6,1p)};d.1g({4Y:"81",4J:"7X"},7(a,b){d.1o.36[a]={3T:7(c){d.1o.2u(6,b,c&&c.1Q?y:x,a)},3U:7(a){d.1o.2h(6,b,a&&a.1Q?y:x)}}}),d.1n.8G||(d.1o.36.3K={3T:7(a,b){14(6.1l&&6.1l.1u()!=="5w")d.1o.2u(6,"4u.89",7(a){17 b=a.2g,c=b.1f;(c==="3K"||c==="7J")&&d(b).4B("5w").18&&C("3K",6,1p)}),d.1o.2u(6,"8L.89",7(a){17 b=a.2g,c=b.1f;(c==="1B"||c==="52")&&d(b).4B("5w").18&&a.4K===13&&C("3K",6,1p)});1k 12!1},3U:7(a){d.1o.2h(6,".89")}});14(!d.1n.8I){17 z,A=7(a){17 b=a.1f,c=a.2k;b==="3x"||b==="3I"?c=a.2p:b==="2q-75"?c=a.41>-1?d.2r(a.1I,7(a){12 a.3D}).3w("-"):"":a.1l.1u()==="2q"&&(c=a.41);12 c},B=7 B(a){17 c=a.2g,e,f;14(q.1d(c.1l)&&!c.8H){e=d.24(c,"7H"),f=A(c),(a.1f!=="5Q"||c.1f!=="3x")&&d.24(c,"7H",f);14(e===b||f===e)12;14(e!=19||f)a.1f="5C",a.5Y=b,d.1o.2l(a,1p[1],c)}};d.1o.36.5C={2P:{5Q:B,c1:B,4u:7(a){17 b=a.2g,c=b.1f;(c==="3x"||c==="3I"||b.1l.1u()==="2q")&&B.1i(6,a)},8K:7(a){17 b=a.2g,c=b.1f;(a.4K===13&&b.1l.1u()!=="4F"||a.4K===32&&(c==="3I"||c==="3x")||c==="2q-75")&&B.1i(6,a)},99:7(a){17 b=a.2g;d.24(b,"7H",A(b))}},3T:7(a,b){14(6.1f==="6l")12!1;1a(17 c 1h z)d.1o.2u(6,c+".9n",z[c]);12 q.1d(6.1l)},3U:7(a){d.1o.2h(6,".9n");12 q.1d(6.1l)}},z=d.1o.36.5C.2P,z.5b=z.99}c.3s&&d.1g({5b:"7E",74:"5Q"},7(a,b){7 c(a){a=d.1o.7s(a),a.1f=b;12 d.1o.2e.1i(6,a)}d.1o.36[b]={3T:7(){6.3s(a,c,!0)},3U:7(){6.5h(a,c,!0)}}}),d.1g(["7N","58"],7(a,c){d.fn[c]=7(a,e,f){14(1c a==="1L"){1a(17 g 1h a)6[c](g,e,a[g],f);12 6}14(d.1s(e)||e===!1)f=e,e=b;17 h=c==="58"?d.4v(f,7(a){d(6).4y(a,h);12 f.1E(6,1p)}):f;14(a==="7I"&&c!=="58")6.58(a,e,f);1k 1a(17 i=0,j=6.18;i<j;i++)d.1o.2u(6[i],a,h,e);12 6}}),d.fn.1r({4y:7(a,b){14(1c a!=="1L"||a.30)1a(17 e=0,f=6.18;e<f;e++)d.1o.2h(6[e],a,b);1k 1a(17 c 1h a)6.4y(c,a[c]);12 6},bp:7(a,b,c,d){12 6.3z(b,c,d,a)},cG:7(a,b,c){12 1p.18===0?6.4y("3z"):6.9f(b,19,c,a)},2l:7(a,b){12 6.1g(7(){d.1o.2l(a,b,6)})},6c:7(a,b){14(6[0]){17 c=d.4c(a);c.30(),c.4i(),d.1o.2l(c,b,6[0]);12 c.5o}},3M:7(a){17 b=1p,c=1;1x(c<b.18)d.4v(a,b[c++]);12 6.4u(d.4v(a,7(e){17 f=(d.24(6,"9k"+a.1U)||0)%c;d.24(6,"9k"+a.1U,f+1),e.30();12 b[f].1E(6,1p)||!1}))},9g:7(a,b){12 6.4Y(a).4J(b||a)}});17 D={5b:"7E",74:"5Q",4Y:"81",4J:"7X"};d.1g(["3z","9f"],7(a,c){d.fn[c]=7(a,e,f,g){17 h,i=0,j,k,l,m=g||6.1Q,n=g?6:d(6.2O);14(1c a==="1L"&&!a.30){1a(17 o 1h a)n[c](o,e,a[o],m);12 6}d.1s(e)&&(f=e,e=b),a=(a||"").1Z(" ");1x((h=a[i++])!=19){j=p.1P(h),k="",j&&(k=j[0],h=h.1m(p,""));14(h==="9g"){a.1w("4Y"+k,"4J"+k);3N}l=h,h==="5b"||h==="74"?(a.1w(D[h]+k),h=h+k):h=(D[h]||h)+k;14(c==="3z")1a(17 q=0,r=n.18;q<r;q++)d.1o.2u(n[q],"3z."+F(h,m),{1q:e,1Q:m,2w:f,6T:h,93:f,6K:l});1k n.4y("3z."+F(h,m),f)}12 6}}),d.1g("74 5b 7E 5Q 6q di 6p 7I 4u cX d6 d5 dl 81 7X 4Y 4J 5C 2q 3K 8K 8L dx 2a".1Z(" "),7(a,b){d.fn[b]=7(a,c){c==19&&(c=a,a=19);12 1p.18>0?6.7N(b,a,c):6.2l(b)},d.6a&&(d.6a[b]=!0)}),7(){7 u(a,b,c,d,e,f){1a(17 g=0,h=d.18;g<h;g++){17 i=d[g];14(i){17 j=!1;i=i[a];1x(i){14(i.51===c){j=d[i.6y];1M}14(i.1b===1){f||(i.51=c,i.6y=g);14(1c b!=="1t"){14(i===b){j=!0;1M}}1k 14(k.1C(b,[i]).18>0){j=i;1M}}i=i[a]}d[g]=j}}}7 t(a,b,c,d,e,f){1a(17 g=0,h=d.18;g<h;g++){17 i=d[g];14(i){17 j=!1;i=i[a];1x(i){14(i.51===c){j=d[i.6y];1M}i.1b===1&&!f&&(i.51=c,i.6y=g);14(i.1l.1u()===b){j=i;1M}i=i[a]}d[g]=j}}}17 a=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|[\'"][^\'"]*[\'"]|[^\\[\\]\'"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g,e=0,f=4s.1K.7t,g=!1,h=!0,i=/\\\\/g,j=/\\W/;[0,0].47(7(){h=!1;12 0});17 k=7(b,d,e,g){e=e||[],d=d||c;17 h=d;14(d.1b!==1&&d.1b!==9)12[];14(!b||1c b!=="1t")12 e;17 i,j,n,o,q,r,s,t,u=!0,w=k.50(d),x=[],y=b;do{a.1P(""),i=a.1P(y);14(i){y=i[3],x.1w(i[1]);14(i[2]){o=i[3];1M}}}1x(i);14(x.18>1&&m.1P(b))14(x.18===2&&l.38[x[0]])j=v(x[0]+x[1],d);1k{j=l.38[x[0]]?[d]:k(x.2U(),d);1x(x.18)b=x.2U(),l.38[b]&&(b+=x.2U()),j=v(b,j)}1k{!g&&x.18>1&&d.1b===9&&!w&&l.2c.3e.1d(x[0])&&!l.2c.3e.1d(x[x.18-1])&&(q=k.1X(x.2U(),d,w),d=q.27?k.1C(q.27,q.39)[0]:q.39[0]);14(d){q=g?{27:x.6t(),39:p(g)}:k.1X(x.6t(),x.18===1&&(x[0]==="~"||x[0]==="+")&&d.1j?d.1j:d,w),j=q.27?k.1C(q.27,q.39):q.39,x.18>0?n=p(j):u=!1;1x(x.18)r=x.6t(),s=r,l.38[r]?s=x.6t():r="",s==19&&(s=d),l.38[r](n,s,w)}1k n=x=[]}n||(n=j),n||k.2a(r||b);14(f.1i(n)==="[1L 2S]")14(u)14(d&&d.1b===1)1a(t=0;n[t]!=19;t++)n[t]&&(n[t]===!0||n[t].1b===1&&k.2G(d,n[t]))&&e.1w(j[t]);1k 1a(t=0;n[t]!=19;t++)n[t]&&n[t].1b===1&&e.1w(j[t]);1k e.1w.1E(e,n);1k p(n,e);o&&(k(o,h,e,g),k.7V(e));12 e};k.7V=7(a){14(r){g=h,a.47(r);14(g)1a(17 b=1;b<a.18;b++)a[b]===a[b-1]&&a.2D(b--,1)}12 a},k.9h=7(a,b){12 k(a,19,19,b)},k.5s=7(a,b){12 k(b,19,19,[a]).18>0},k.1X=7(a,b,c){17 d;14(!a)12[];1a(17 e=0,f=l.60.18;e<f;e++){17 g,h=l.60[e];14(g=l.6D[h].1P(a)){17 j=g[1];g.2D(1,1);14(j.4t(j.18-1)!=="\\\\"){g[1]=(g[1]||"").1m(i,""),d=l.1X[h](g,b,c);14(d!=19){a=a.1m(l.2c[h],"");1M}}}}d||(d=1c b.1S!=="2z"?b.1S("*"):[]);12{39:d,27:a}},k.1C=7(a,c,d,e){17 f,g,h=a,i=[],j=c,m=c&&c[0]&&k.50(c[0]);1x(a&&c.18){1a(17 n 1h l.1C)14((f=l.6D[n].1P(a))!=19&&f[2]){17 o,p,q=l.1C[n],r=f[1];g=!1,f.2D(1,1);14(r.4t(r.18-1)==="\\\\")3N;j===i&&(i=[]);14(l.7i[n]){f=l.7i[n](f,j,d,i,e,m);14(f){14(f===!0)3N}1k g=o=!0}14(f)1a(17 s=0;(p=j[s])!=19;s++)14(p){o=q(p,f,s,j);17 t=e^!!o;d&&o!=19?t?g=!0:j[s]=!1:t&&(i.1w(p),g=!0)}14(o!==b){d||(j=i),a=a.1m(l.2c[n],"");14(!g)12[];1M}}14(a===h)14(g==19)k.2a(a);1k 1M;h=a}12 j},k.2a=7(a){7F"cw 2a, cA dI: "+a};17 l=k.8N={60:["3e","7b","4D"],2c:{3e:/#((?:[\\w\\4e-\\4d\\-]|\\\\.)+)/,4S:/\\.((?:[\\w\\4e-\\4d\\-]|\\\\.)+)/,7b:/\\[2X=[\'"]*((?:[\\w\\4e-\\4d\\-]|\\\\.)+)[\'"]*\\]/,8p:/\\[\\s*((?:[\\w\\4e-\\4d\\-]|\\\\.)+)\\s*(?:(\\S?=)\\s*(?:([\'"])(.*?)\\3|(#?(?:[\\w\\4e-\\4d\\-]|\\\\.)*)|)|)\\s*\\]/,4D:/^((?:[\\w\\4e-\\4d\\*\\-]|\\\\.)+)/,6m:/:(90|3F|5E|4L)-eO(?:\\(\\s*(6i|6h|(?:[+\\-]?\\d+|(?:[+\\-]?\\d*)?n\\s*(?:[+\\-]\\s*\\d+)?))\\s*\\))?/,49:/:(3F|eq|8Y|8X|4L|5E|6i|6h)(?:\\((\\d*)\\))?(?=[^\\-]|$)/,4M:/:((?:[\\w\\4e-\\4d\\-]|\\\\.)+)(?:\\(([\'"]?)((?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\2\\))?/},6D:{},7x:{"3t":"25","1a":"8W"},6x:{2I:7(a){12 a.29("2I")},1f:7(a){12 a.29("1f")}},38:{"+":7(a,b){17 c=1c b==="1t",d=c&&!j.1d(b),e=c&&!d;d&&(b=b.1u());1a(17 f=0,g=a.18,h;f<g;f++)14(h=a[f]){1x((h=h.4w)&&h.1b!==1){}a[f]=e||h&&h.1l.1u()===b?h||!1:h===b}e&&k.1C(b,a,!0)},">":7(a,b){17 c,d=1c b==="1t",e=0,f=a.18;14(d&&!j.1d(b)){b=b.1u();1a(;e<f;e++){c=a[e];14(c){17 g=c.1j;a[e]=g.1l.1u()===b?g:!1}}}1k{1a(;e<f;e++)c=a[e],c&&(a[e]=d?c.1j:c.1j===b);d&&k.1C(b,a,!0)}},"":7(a,b,c){17 d,f=e++,g=u;1c b==="1t"&&!j.1d(b)&&(b=b.1u(),d=b,g=t),g("1j",b,f,a,d,c)},"~":7(a,b,c){17 d,f=e++,g=u;1c b==="1t"&&!j.1d(b)&&(b=b.1u(),d=b,g=t),g("4w",b,f,a,d,c)}},1X:{3e:7(a,b,c){14(1c b.4j!=="2z"&&!c){17 d=b.4j(a[1]);12 d&&d.1j?[d]:[]}},7b:7(a,b){14(1c b.8V!=="2z"){17 c=[],d=b.8V(a[1]);1a(17 e=0,f=d.18;e<f;e++)d[e].29("2X")===a[1]&&c.1w(d[e]);12 c.18===0?19:c}},4D:7(a,b){14(1c b.1S!=="2z")12 b.1S(a[1])}},7i:{4S:7(a,b,c,d,e,f){a=" "+a[1].1m(i,"")+" ";14(f)12 a;1a(17 g=0,h;(h=b[g])!=19;g++)h&&(e^(h.25&&(" "+h.25+" ").1m(/[\\t\\n\\r]/g," ").28(a)>=0)?c||d.1w(h):c&&(b[g]=!1));12!1},3e:7(a){12 a[1].1m(i,"")},4D:7(a,b){12 a[1].1m(i,"").1u()},6m:7(a){14(a[1]==="3F"){a[2]||k.2a(a[0]),a[2]=a[2].1m(/^\\+|\\s*/g,"");17 b=/(-?)(\\d*)(?:n([+\\-]?\\d*))?/.1P(a[2]==="6i"&&"2n"||a[2]==="6h"&&"2n+1"||!/\\D/.1d(a[2])&&"fw+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}1k a[2]&&k.2a(a[0]);a[0]=e++;12 a},8p:7(a,b,c,d,e,f){17 g=a[1]=a[1].1m(i,"");!f&&l.7x[g]&&(a[1]=l.7x[g]),a[4]=(a[4]||a[5]||"").1m(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");12 a},4M:7(b,c,d,e,f){14(b[1]==="4W")14((a.1P(b[3])||"").18>1||/^\\w/.1d(b[3]))b[3]=k(b[3],19,19,c);1k{17 g=k.1C(b[3],c,d,!0^f);d||e.1w.1E(e,g);12!1}1k 14(l.2c.49.1d(b[0])||l.2c.6m.1d(b[0]))12!0;12 b},49:7(a){a.3f(!0);12 a}},2P:{fy:7(a){12 a.2Y===!1&&a.1f!=="2W"},2Y:7(a){12 a.2Y===!0},2p:7(a){12 a.2p===!0},3D:7(a){a.1j&&a.1j.41;12 a.3D===!0},6J:7(a){12!!a.1A},53:7(a){12!a.1A},8O:7(a,b,c){12!!k(c[3],a).18},fv:7(a){12/h\\d/i.1d(a.1l)},1B:7(a){12"1B"===a.29("1f")},3x:7(a){12"3x"===a.1f},3I:7(a){12"3I"===a.1f},6l:7(a){12"6l"===a.1f},52:7(a){12"52"===a.1f},3K:7(a){12"3K"===a.1f},7J:7(a){12"7J"===a.1f},8U:7(a){12"8U"===a.1f},2J:7(a){12"2J"===a.1f||a.1l.1u()==="2J"},2R:7(a){12/2R|2q|4F|2J/i.1d(a.1l)}},8Z:{4L:7(a,b){12 b===0},5E:7(a,b,c,d){12 b===d.18-1},6i:7(a,b){12 b%2===0},6h:7(a,b){12 b%2===1},8X:7(a,b,c){12 b<c[3]-0},8Y:7(a,b,c){12 b>c[3]-0},3F:7(a,b,c){12 c[3]-0===b},eq:7(a,b,c){12 c[3]-0===b}},1C:{4M:7(a,b,c,d){17 e=b[1],f=l.2P[e];14(f)12 f(a,c,b,d);14(e==="2G")12(a.91||a.fu||k.6Q([a])||"").28(b[3])>=0;14(e==="4W"){17 g=b[3];1a(17 h=0,i=g.18;h<i;h++)14(g[h]===a)12!1;12!0}k.2a(e)},6m:7(a,b){17 c=b[1],d=a;fr(c){6u"90":6u"4L":1x(d=d.4w)14(d.1b===1)12!1;14(c==="4L")12!0;d=a;6u"5E":1x(d=d.2V)14(d.1b===1)12!1;12!0;6u"3F":17 e=b[2],f=b[3];14(e===1&&f===0)12!0;17 g=b[0],h=a.1j;14(h&&(h.51!==g||!a.7g)){17 i=0;1a(d=h.1A;d;d=d.2V)d.1b===1&&(d.7g=++i);h.51=g}17 j=a.7g-f;12 e===0?j===0:j%e===0&&j/e>=0}},3e:7(a,b){12 a.1b===1&&a.29("33")===b},4D:7(a,b){12 b==="*"&&a.1b===1||a.1l.1u()===b},4S:7(a,b){12(" "+(a.25||a.29("3t"))+" ").28(b)>-1},8p:7(a,b){17 c=b[1],d=l.6x[c]?l.6x[c](a):a[c]!=19?a[c]:a.29(c),e=d+"",f=b[2],g=b[4];12 d==19?f==="!=":f==="="?e===g:f==="*="?e.28(g)>=0:f==="~="?(" "+e+" ").28(g)>=0:g?f==="!="?e!==g:f==="^="?e.28(g)===0:f==="$="?e.4t(e.18-g.18)===g:f==="|="?e===g||e.4t(0,g.18+1)===g+"-":!1:e&&d!==!1},49:7(a,b,c,d){17 e=b[2],f=l.8Z[e];14(f)12 f(a,c,b,d)}}},m=l.2c.49,n=7(a,b){12"\\\\"+(b-0+1)};1a(17 o 1h l.2c)l.2c[o]=2b 35(l.2c[o].6G+/(?![^\\[]*\\])(?![^\\(]*\\))/.6G),l.6D[o]=2b 35(/(^(?:.|\\r|\\n)*?)/.6G+l.2c[o].6G.1m(/\\\\(\\d+)/g,n));17 p=7(a,b){a=2S.1K.2d.1i(a,0);14(b){b.1w.1E(b,a);12 b}12 a};1H{2S.1K.2d.1i(c.1G.2N,0)[0].1b}1F(q){p=7(a,b){17 c=0,d=b||[];14(f.1i(a)==="[1L 2S]")2S.1K.1w.1E(d,a);1k 14(1c a.18==="3L")1a(17 e=a.18;c<e;c++)d.1w(a[c]);1k 1a(;a[c];c++)d.1w(a[c]);12 d}}17 r,s;c.1G.3W?r=7(a,b){14(a===b){g=!0;12 0}14(!a.3W||!b.3W)12 a.3W?-1:1;12 a.3W(b)&4?-1:1}:(r=7(a,b){17 c,d,e=[],f=[],h=a.1j,i=b.1j,j=h;14(a===b){g=!0;12 0}14(h===i)12 s(a,b);14(!h)12-1;14(!i)12 1;1x(j)e.3f(j),j=j.1j;j=i;1x(j)f.3f(j),j=j.1j;c=e.18,d=f.18;1a(17 k=0;k<c&&k<d;k++)14(e[k]!==f[k])12 s(e[k],f[k]);12 k===c?s(a,f[k],-1):s(e[k],b,1)},s=7(a,b,c){14(a===b)12 c;17 d=a.2V;1x(d){14(d===b)12-1;d=d.2V}12 1}),k.6Q=7(a){17 b="",c;1a(17 d=0;a[d];d++)c=a[d],c.1b===3||c.1b===4?b+=c.6B:c.1b!==8&&(b+=k.6Q(c.2N));12 b},7(){17 a=c.22("1N"),d="1Y"+(2b 8k).8T(),e=c.1G;a.2s="<a 2X=\'"+d+"\'/>",e.2Z(a,e.1A),c.4j(d)&&(l.1X.3e=7(a,c,d){14(1c c.4j!=="2z"&&!d){17 e=c.4j(a[1]);12 e?e.33===a[1]||1c e.3Z!=="2z"&&e.3Z("33").6B===a[1]?[e]:b:[]}},l.1C.3e=7(a,b){17 c=1c a.3Z!=="2z"&&a.3Z("33");12 a.1b===1&&c&&c.6B===b}),e.2Q(a),e=a=19}(),7(){17 a=c.22("1N");a.3g(c.fs("")),a.1S("*").18>0&&(l.1X.4D=7(a,b){17 c=b.1S(a[1]);14(a[1]==="*"){17 d=[];1a(17 e=0;c[e];e++)c[e].1b===1&&d.1w(c[e]);c=d}12 c}),a.2s="<a 2I=\'#\'></a>",a.1A&&1c a.1A.29!=="2z"&&a.1A.29("2I")!=="#"&&(l.6x.2I=7(a){12 a.29("2I",2)}),a=19}(),c.4m&&7(){17 a=k,b=c.22("1N"),d="ft";b.2s="<p 3t=\'8S\'></p>";14(!b.4m||b.4m(".8S").18!==0){k=7(b,e,f,g){e=e||c;14(!g&&!k.50(e)){17 h=/^(\\w+$)|^\\.([\\w\\-]+$)|^#([\\w\\-]+$)/.1P(b);14(h&&(e.1b===1||e.1b===9)){14(h[1])12 p(e.1S(b),f);14(h[2]&&l.1X.4S&&e.40)12 p(e.40(h[2]),f)}14(e.1b===9){14(b==="1R"&&e.1R)12 p([e.1R],f);14(h&&h[3]){17 i=e.4j(h[3]);14(!i||!i.1j)12 p([],f);14(i.33===h[3])12 p([i],f)}1H{12 p(e.4m(b),f)}1F(j){}}1k 14(e.1b===1&&e.1l.1u()!=="1L"){17 m=e,n=e.29("33"),o=n||d,q=e.1j,r=/^\\s*[+~]/.1d(b);n?o=o.1m(/\'/g,"\\\\$&"):e.8y("33",o),r&&q&&(e=e.1j);1H{14(!r||q)12 p(e.4m("[33=\'"+o+"\'] "+b),f)}1F(s){}8M{n||m.3Q("33")}}}12 a(b,e,f,g)};1a(17 e 1h a)k[e]=a[e];b=19}}(),7(){17 a=c.1G,b=a.5s||a.fz||a.fB||a.fH,d=!1;1H{b.1i(c.1G,"[1d!=\'\']:fI")}1F(e){d=!0}b&&(k.5s=7(a,c){c=c.1m(/\\=\\s*([^\'"\\]]*)\\s*\\]/g,"=\'$1\']");14(!k.50(a))1H{14(d||!l.2c.4M.1d(c)&&!/!=/.1d(c))12 b.1i(a,c)}1F(e){}12 k(c,19,19,[a]).18>0})}(),7(){17 a=c.22("1N");a.2s="<1N 3t=\'1d e\'></1N><1N 3t=\'1d\'></1N>";14(a.40&&a.40("e").18!==0){a.7G.25="e";14(a.40("e").18===1)12;l.60.2D(1,0,"4S"),l.1X.4S=7(a,b,c){14(1c b.40!=="2z"&&!c)12 b.40(a[1])},a=19}}(),c.1G.2G?k.2G=7(a,b){12 a!==b&&(a.2G?a.2G(b):!0)}:c.1G.3W?k.2G=7(a,b){12!!(a.3W(b)&16)}:k.2G=7(){12!1},k.50=7(a){17 b=(a?a.26||a:0).1G;12 b?b.1l!=="fG":!1};17 v=7(a,b){17 c,d=[],e="",f=b.1b?[b]:b;1x(c=l.2c.4M.1P(a))e+=c[0],a=a.1m(l.2c.4M,"");a=l.38[a]?a+"*":a;1a(17 g=0,h=f.18;g<h;g++)k(a,f[g],d);12 k.1C(e,d)};d.1X=k,d.27=k.8N,d.27[":"]=d.27.2P,d.6N=k.7V,d.1B=k.6Q,d.7k=k.50,d.2G=k.2G}();17 G=/fF$/,H=/^(?:8R|92|8P)/,I=/,/,J=/^.[^:#\\[\\.,]*$/,K=2S.1K.2d,L=d.27.2c.49,M={7A:!0,4o:!0,8J:!0,8Q:!0};d.fn.1r({1X:7(a){17 b=6.2H("","1X",a),c=0;1a(17 e=0,f=6.18;e<f;e++){c=b.18,d.1X(a,6[e],b);14(e>0)1a(17 g=c;g<b.18;g++)1a(17 h=0;h<c;h++)14(b[h]===b[g]){b.2D(g--,1);1M}}12 b},8O:7(a){17 b=d(a);12 6.1C(7(){1a(17 a=0,c=b.18;a<c;a++)14(d.2G(6,b[a]))12!0})},4W:7(a){12 6.2H(O(6,a,!1),"4W",a)},1C:7(a){12 6.2H(O(6,a,!0),"1C",a)},5y:7(a){12!!a&&d.1C(a,6).18>0},4B:7(a,b){17 c=[],e,f,g=6[0];14(d.2o(a)){17 h,i,j={},k=1;14(g&&a.18){1a(e=0,f=a.18;e<f;e++)i=a[e],j[i]||(j[i]=d.27.2c.49.1d(i)?d(i,b||6.2O):i);1x(g&&g.26&&g!==b){1a(i 1h j)h=j[i],(h.4P?h.48(g)>-1:d(g).5y(h))&&c.1w({1Q:i,1v:g,5G:k});g=g.1j,k++}}12 c}17 l=L.1d(a)?d(a,b||6.2O):19;1a(e=0,f=6.18;e<f;e++){g=6[e];1x(g){14(l?l.48(g)>-1:d.1X.5s(g,a)){c.1w(g);1M}g=g.1j;14(!g||!g.26||g===b)1M}}c=c.18>1?d.6N(c):c;12 6.2H(c,"4B",a)},48:7(a){14(!a||1c a==="1t")12 d.3V(6[0],a?d(a):6.6J().7A());12 d.3V(a.4P?a[0]:a,6)},2u:7(a,b){17 c=1c a==="1t"?d(a,b):d.37(a),e=d.4Q(6.2y(),c);12 6.2H(N(c[0])||N(e[0])?e:d.6N(e))},fC:7(){12 6.2u(6.7Z)}}),d.1g({6J:7(a){17 b=a.1j;12 b&&b.1b!==11?b:19},8R:7(a){12 d.42(a,"1j")},fD:7(a,b,c){12 d.42(a,"1j",c)},8J:7(a){12 d.3F(a,2,"2V")},8Q:7(a){12 d.3F(a,2,"4w")},fE:7(a){12 d.42(a,"2V")},8P:7(a){12 d.42(a,"4w")},fq:7(a,b,c){12 d.42(a,"2V",c)},92:7(a,b,c){12 d.42(a,"4w",c)},fp:7(a){12 d.8s(a.1j.1A,a)},7A:7(a){12 d.8s(a.1A)},4o:7(a){12 d.1l(a,"fc")?a.fd||a.fe.3Y:d.37(a.2N)}},7(a,b){d.fn[a]=7(c,e){17 f=d.2r(6,b,c),g=K.1i(1p);G.1d(a)||(e=c),e&&1c e==="1t"&&(f=d.1C(e,f)),f=6.18>1&&!M[a]?d.6N(f):f,(6.18>1||I.1d(e))&&H.1d(a)&&(f=f.f7());12 6.2H(f,a,g.3w(","))}}),d.1r({1C:7(a,b,c){c&&(a=":4W("+a+")");12 b.18===1?d.1X.5s(b[0],a)?[b[0]]:[]:d.1X.9h(a,b)},42:7(a,c,e){17 f=[],g=a[c];1x(g&&g.1b!==9&&(e===b||g.1b!==1||!d(g).5y(e)))g.1b===1&&f.1w(g),g=g[c];12 f},3F:7(a,b,c,d){b=b||1;17 e=0;1a(;a;a=a[c])14(a.1b===1&&++e===b)1M;12 a},8s:7(a,b){17 c=[];1a(;a;a=a.2V)a.1b===1&&a!==b&&c.1w(a);12 c}});17 P=/ 5V\\d+="(?:\\d+|19)"/g,Q=/^\\s+/,R=/<(?!9m|br|9j|88|fK|f8|2R|7S|f9|5g)(([\\w:]+)[^>]*)\\/>/8F,S=/<([\\w:]+)/,T=/<2x/i,U=/<|&#?\\w+;/,V=/<(?:1Y|1L|88|4g|1e)/i,W=/2p\\s*(?:[^=]|=\\s*.2p.)/i,X={4g:[1,"<2q 75=\'75\'>","</2q>"],ff:[1,"<9i>","</9i>"],9e:[1,"<2f>","</2f>"],3S:[2,"<2f><2x>","</2x></2f>"],3n:[3,"<2f><2x><3S>","</3S></2x></2f>"],9j:[2,"<2f><2x></2x><8a>","</8a></2f>"],9m:[1,"<2r>","</2r>"],3i:[0,"",""]};X.9l=X.4g,X.2x=X.fg=X.8a=X.fm=X.9e,X.fo=X.3n,d.1n.9d||(X.3i=[1,"1N<1N>","</1N>"]),d.fn.1r({1B:7(a){14(d.1s(a))12 6.1g(7(b){17 c=d(6);c.1B(a.1i(6,b,c.1B()))});14(1c a!=="1L"&&a!==b)12 6.53().3c((6[0]&&6[0].26||c).5f(a));12 d.1B(6)},65:7(a){14(d.1s(a))12 6.1g(7(b){d(6).65(a.1i(6,b))});14(6[0]){17 b=d(a,6[0].26).eq(0).3X(!0);6[0].1j&&b.2Z(6[0]),b.2r(7(){17 a=6;1x(a.1A&&a.1A.1b===1)a=a.1A;12 a}).3c(6)}12 6},96:7(a){14(d.1s(a))12 6.1g(7(b){d(6).96(a.1i(6,b))});12 6.1g(7(){17 b=d(6),c=b.4o();c.18?c.65(a):b.3c(a)})},fk:7(a){12 6.1g(7(){d(6).65(a)})},fh:7(){12 6.6J().1g(7(){d.1l(6,"1R")||d(6).5a(6.2N)}).4H()},3c:7(){12 6.4l(1p,!0,7(a){6.1b===1&&6.3g(a)})},9c:7(){12 6.4l(1p,!0,7(a){6.1b===1&&6.2Z(a,6.1A)})},6g:7(){14(6[0]&&6[0].1j)12 6.4l(1p,!1,7(a){6.1j.2Z(a,6)});14(1p.18){17 a=d(1p[0]);a.1w.1E(a,6.6d());12 6.2H(a,"6g",1p)}},8j:7(){14(6[0]&&6[0].1j)12 6.4l(1p,!1,7(a){6.1j.2Z(a,6.2V)});14(1p.18){17 a=6.2H(6,"8j",1p);a.1w.1E(a,d(1p[0]).6d());12 a}},2h:7(a,b){1a(17 c=0,e;(e=6[c])!=19;c++)14(!a||d.1C(a,[e]).18)!b&&e.1b===1&&(d.5m(e.1S("*")),d.5m([e])),e.1j&&e.1j.2Q(e);12 6},53:7(){1a(17 a=0,b;(b=6[a])!=19;a++){b.1b===1&&d.5m(b.1S("*"));1x(b.1A)b.2Q(b.1A)}12 6},3X:7(a,b){a=a==19?!1:a,b=b==19?a:b;12 6.2r(7(){12 d.3X(6,a,b)})},2v:7(a){14(a===b)12 6[0]&&6[0].1b===1?6[0].2s.1m(P,""):19;14(1c a!=="1t"||V.1d(a)||!d.1n.7O&&Q.1d(a)||X[(S.1P(a)||["",""])[1].1u()])d.1s(a)?6.1g(7(b){17 c=d(6);c.2v(a.1i(6,b,c.2v()))}):6.53().3c(a);1k{a=a.1m(R,"<$1></$2>");1H{1a(17 c=0,e=6.18;c<e;c++)6[c].1b===1&&(d.5m(6[c].1S("*")),6[c].2s=a)}1F(f){6.53().3c(a)}}12 6},5a:7(a){14(6[0]&&6[0].1j){14(d.1s(a))12 6.1g(7(b){17 c=d(6),e=c.2v();c.5a(a.1i(6,b,e))});1c a!=="1t"&&(a=d(a).95());12 6.1g(7(){17 b=6.2V,c=6.1j;d(6).2h(),b?d(b).6g(a):d(c).3c(a)})}12 6.2H(d(d.1s(a)?a():a),"5a",a)},95:7(a){12 6.2h(a,!0)},4l:7(a,c,e){17 f,g,h,i,j=a[0],k=[];14(!d.1n.61&&1p.18===3&&1c j==="1t"&&W.1d(j))12 6.1g(7(){d(6).4l(a,c,e,!0)});14(d.1s(j))12 6.1g(7(f){17 g=d(6);a[0]=j.1i(6,f,c?g.2v():b),g.4l(a,c,e)});14(6[0]){i=j&&j.1j,d.1n.1j&&i&&i.1b===11&&i.2N.18===6.18?f={5p:i}:f=d.7Y(a,6,k),h=f.5p,h.2N.18===1?g=h=h.1A:g=h.1A;14(g){c=c&&d.1l(g,"3S");1a(17 l=0,m=6.18,n=m-1;l<m;l++)e.1i(c?Y(6[l],g):6[l],f.8v||m>1&&l<n?d.3X(h,!0,!0):h)}k.18&&d.1g(k,ba)}12 6}}),d.7Y=7(a,b,e){17 f,g,h,i=b&&b[0]?b[0].26||b[0]:c;a.18===1&&1c a[0]==="1t"&&a[0].18<fJ&&i===c&&a[0].94(0)==="<"&&!V.1d(a[0])&&(d.1n.61||!W.1d(a[0]))&&(g=!0,h=d.8u[a[0]],h&&(h!==1&&(f=h))),f||(f=i.97(),d.9b(a,i,f,e)),g&&(d.8u[a[0]]=h?f:1);12{5p:f,8v:g}},d.8u={},d.1g({98:"3c",fV:"9c",2Z:"6g",fW:"8j",fS:"5a"},7(a,b){d.fn[a]=7(c){17 e=[],f=d(c),g=6.18===1&&6[0].1j;14(g&&g.1b===11&&g.2N.18===1&&f.18===1){f[b](6[0]);12 6}1a(17 h=0,i=f.18;h<i;h++){17 j=(h>0?6.3X(!0):6).2y();d(f[h])[b](j),e=e.6n(j)}12 6.2H(e,a,f.1Q)}}),d.1r({3X:7(a,b,c){17 e=a.5u(!0),f,g,h;14((!d.1n.7f||!d.1n.7l)&&(a.1b===1||a.1b===11)&&!d.7k(a)){$(a,e),f=3J(a),g=3J(e);1a(h=0;f[h];++h)$(f[h],g[h])}14(b){Z(a,e);14(c){f=3J(a),g=3J(e);1a(h=0;f[h];++h)Z(f[h],g[h])}}12 e},9b:7(a,b,e,f){b=b||c,1c b.22==="2z"&&(b=b.26||b[0]&&b[0].26||c);17 g=[];1a(17 h=0,i;(i=a[h])!=19;h++){1c i==="3L"&&(i+="");14(!i)3N;14(1c i!=="1t"||U.1d(i)){14(1c i==="1t"){i=i.1m(R,"<$1></$2>");17 j=(S.1P(i)||["",""])[1].1u(),k=X[j]||X.3i,l=k[0],m=b.22("1N");m.2s=k[1]+i+k[2];1x(l--)m=m.7G;14(!d.1n.2x){17 n=T.1d(i),o=j==="2f"&&!n?m.1A&&m.1A.2N:k[1]==="<2f>"&&!n?m.2N:[];1a(17 p=o.18-1;p>=0;--p)d.1l(o[p],"2x")&&!o[p].2N.18&&o[p].1j.2Q(o[p])}!d.1n.7O&&Q.1d(i)&&m.2Z(b.5f(Q.1P(i)[0]),m.1A),i=m.2N}}1k i=b.5f(i);i.1b?g.1w(i):g=d.4Q(g,i)}14(e)1a(h=0;g[h];h++)!f||!d.1l(g[h],"1Y")||g[h].1f&&g[h].1f.1u()!=="1B/56"?(g[h].1b===1&&g.2D.1E(g,[h+1,0].6n(d.37(g[h].1S("1Y")))),e.3g(g[h])):f.1w(g[h].1j?g[h].1j.2Q(g[h]):g[h]);12 g},5m:7(a){17 b,c,e=d.3p,f=d.1J,g=d.1o.36,h=d.1n.5l;1a(17 i=0,j;(j=a[i])!=19;i++){14(j.1l&&d.5j[j.1l.1u()])3N;c=j[d.1J];14(c){b=e[c]&&e[c][f];14(b&&b.2t){1a(17 k 1h b.2t)g[k]?d.1o.2h(j,k):d.7r(j,k,b.2e);b.2e&&(b.2e.1v=19)}h?2m j[d.1J]:j.3Q&&j.3Q(d.1J),2m e[c]}}}});17 ch=/aR\\([^)]*\\)/i,bc=/23=([^)]*)/,bd=/-([a-z])/8F,be=/([A-Z])/g,bf=/^-?\\d+(?:3m)?$/i,bg=/^-?\\d/,bh={2i:"5A",aq:"2W",1W:"73"},bi=["a0","fN"],bj=["a1","fL"],bk,bl,bm,bn=7(a,b){12 b.5v()};d.fn.1y=7(a,c){14(1p.18===2&&c===b)12 6;12 d.6P(6,a,c,!0,7(a,c,e){12 e!==b?d.1e(a,c,e):d.1y(a,c)})},d.1r({5R:{23:{2y:7(a,b){14(b){17 c=bk(a,"23","23");12 c===""?"1":c}12 a.1e.23}}},72:{fO:!0,fR:!0,23:!0,5J:!0,fQ:!0},7m:{"8z":d.1n.6o?"6o":"fP"},1e:7(a,c,e,f){14(a&&a.1b!==3&&a.1b!==8&&a.1e){17 g,h=d.6Z(c),i=a.1e,j=d.5R[h];c=d.7m[h]||h;14(e===b){14(j&&"2y"1h j&&(g=j.2y(a,!1,f))!==b)12 g;12 i[c]}14(1c e==="3L"&&43(e)||e==19)12;1c e==="3L"&&!d.72[h]&&(e+="3m");14(!j||!("39"1h j)||(e=j.39(a,e))!==b)1H{i[c]=e}1F(k){}}},1y:7(a,c,e){17 f,g=d.6Z(c),h=d.5R[g];c=d.7m[g]||g;14(h&&"2y"1h h&&(f=h.2y(a,!0,e))!==b)12 f;14(bk)12 bk(a,c,g)},aS:7(a,b,c){17 d={};1a(17 e 1h b)d[e]=a.1e[e],a.1e[e]=b[e];c.1i(a);1a(e 1h b)a.1e[e]=d[e]},6Z:7(a){12 a.1m(bd,bn)}}),d.f5=d.1y,d.1g(["3l","2A"],7(a,b){d.5R[b]={2y:7(a,c,e){17 f;14(c){a.4R!==0?f=bo(a,b,e):d.aS(a,bh,7(){f=bo(a,b,e)});14(f<=0){f=bk(a,b,b),f==="7v"&&bm&&(f=bm(a,b,b));14(f!=19)12 f===""||f==="5N"?"7v":f}14(f<0||f==19){f=a.1e[b];12 f===""||f==="5N"?"7v":f}12 1c f==="1t"?f:f+"3m"}},39:7(a,b){14(!bf.1d(b))12 b;b=1T(b);14(b>=0)12 b+"3m"}}}),d.1n.23||(d.5R.23={2y:7(a,b){12 bc.1d((b&&a.3R?a.3R.1C:a.1e.1C)||"")?1T(35.$1)/aQ+"":b?"1":""},39:7(a,b){17 c=a.1e;c.5J=1;17 e=d.43(b)?"":"aR(23="+b*aQ+")",f=c.1C||"";c.1C=ch.1d(f)?f.1m(ch,e):c.1C+" "+e}}),c.5H&&c.5H.6z&&(bl=7(a,c,e){17 f,g,h;e=e.1m(be,"-$1").1u();14(!(g=a.26.5H))12 b;14(h=g.6z(a,19))f=h.eg(e),f===""&&!d.2G(a.26.1G,a)&&(f=d.1e(a,e));12 f}),c.1G.3R&&(bm=7(a,b){17 c,d=a.3R&&a.3R[b],e=a.6R&&a.6R[b],f=a.1e;!bf.1d(d)&&bg.1d(d)&&(c=f.1z,e&&(a.6R.1z=a.3R.1z),f.1z=b==="f6"?"dO":d||0,d=f.eb+"3m",f.1z=c,e&&(a.6R.1z=e));12 d===""?"5N":d}),bk=bl||bm,d.27&&d.27.2P&&(d.27.2P.2W=7(a){17 b=a.4R,c=a.5W;12 b===0&&c===0||!d.1n.5e&&(a.1e.1W||d.1y(a,"1W"))==="2K"},d.27.2P.ap=7(a){12!d.27.2P.2W(a)});17 ci=/%20/g,bq=/\\[\\]$/,br=/\\r?\\n/g,bs=/#.*$/,bt=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/eo,bu=/^(?:aP|ep|en|em|2W|ej|3L|52|ek|el|e8|1B|e7|1D|dU)$/i,bv=/(?:^6l|^dV|\\-dW):$/,bw=/^(?:70|dT)$/,bx=/^\\/\\//,by=/\\?/,bz=/<1Y\\b[^<]*(?:(?!<\\/1Y>)<[^<]*)*<\\/1Y>/dS,bA=/^(?:2q|4F)/i,bB=/\\s+/,bC=/([?&])3J=[^&]*/,bD=/(^|\\-)([a-z])/g,bE=7(a,b,c){12 b+c.5v()},bF=/^([\\w\\+\\.\\-]+:)\\/\\/([^\\/?#:]*)(?::(\\d+))?/,bG=d.fn.6q,bH={},bI={},bJ,bK;1H{bJ=c.6M.2I}1F(bL){bJ=c.22("a"),bJ.2I="",bJ=bJ.2I}bK=bF.1P(bJ.1u()),d.fn.1r({6q:7(a,c,e){14(1c a!=="1t"&&bG)12 bG.1E(6,1p);14(!6.18)12 6;17 f=a.28(" ");14(f>=0){17 g=a.2d(f,a.18);a=a.2d(0,f)}17 h="70";c&&(d.1s(c)?(e=c,c=b):1c c==="1L"&&(c=d.5g(c,d.3h.8e),h="b4"));17 i=6;d.4h({1D:a,1f:h,5k:"2v",1q:c,2L:7(a,b,c){c=a.7C,a.6r()&&(a.3b(7(a){c=a}),i.2v(g?d("<1N>").3c(c.1m(bz,"")).1X(g):c)),e&&i.1g(e,[c,b,a])}});12 6},dP:7(){12 d.5g(6.b1())},b1:7(){12 6.2r(7(){12 6.aZ?d.37(6.aZ):6}).1C(7(){12 6.2X&&!6.2Y&&(6.2p||bA.1d(6.1l)||bu.1d(6.1f))}).2r(7(a,b){17 c=d(6).3A();12 c==19?19:d.2o(c)?d.2r(c,7(a,c){12{2X:b.2X,2k:a.1m(br,"\\r\\n")}}):{2X:b.2X,2k:c.1m(br,"\\r\\n")}}).2y()}}),d.1g("b2 aE az dX dY 9o".1Z(" "),7(a,b){d.fn[b]=7(a){12 6.7N(b,a)}}),d.1g(["2y","e4"],7(a,c){d[c]=7(a,e,f,g){d.1s(e)&&(g=g||f,f=e,e=b);12 d.4h({1f:c,1D:a,1q:e,5q:f,5k:g})}}),d.1r({e5:7(a,c){12 d.2y(a,b,c,"1Y")},e6:7(a,b,c){12 d.2y(a,b,c,"3v")},6L:7(a,b){b?d.1r(!0,a,d.3h,b):(b=a,a=d.1r(!0,d.3h,b));1a(17 c 1h{2O:1,1D:1})c 1h b?a[c]=b[c]:c 1h d.3h&&(a[c]=d.3h[c]);12 a},3h:{1D:bJ,7B:bv.1d(bK[1]),4r:!0,1f:"70",6f:"4E/x-dZ-5w-e0",aG:!0,3k:!0,5c:{3o:"4E/3o, 1B/3o",2v:"1B/2v",1B:"1B/e1",3v:"4E/3v, 1B/56","*":"*/*"},4o:{3o:/3o/,2v:/2v/,3v:/3v/},b3:{3o:"9G",1B:"7C"},4p:{"* 1B":a.4Z,"1B 2v":!0,"1B 3v":d.7c,"1B 3o":d.aW}},8B:bM(bH),7d:bM(bI),4h:7(a,c){7 v(a,c,l,n){14(r!==2){r=2,p&&es(p),o=b,m=n||"",u.3a=a?4:0;17 q,t,v,w=l?bP(e,u,l):b,x,y;14(a>=5Z&&a<eU||a===aM){14(e.aw){14(x=u.6H("eV-9M"))d.76[k]=x;14(y=u.6H("eS"))d.77[k]=y}14(a===aM)c="eR",q=!0;1k 1H{t=bQ(e,w),c="5q",q=!0}1F(z){c="aD",v=z}}1k{v=c;14(!c||a)c="2a",a<0&&(a=0)}u.6e=a,u.9F=c,q?h.3q(f,[t,c,u]):h.aB(f,[u,c,v]),u.8t(j),j=b,s&&g.2l("4h"+(q?"eP":"eQ"),[u,e,q?t:v]),i.3q(f,[u,c]),s&&(g.2l("az",[u,e]),--d.8E||d.1o.2l("aE"))}}1c a==="1L"&&(c=a,a=b),c=c||{};17 e=d.6L({},c),f=e.2O||e,g=f!==e&&(f.1b||f 6F d)?d(f):d.1o,h=d.8n(),i=d.5d(),j=e.8t||{},k,l={},m,n,o,p,q,r=0,s,t,u={3a:0,7e:7(a,b){r||(l[a.1u().1m(bD,bE)]=b);12 6},9S:7(){12 r===2?m:19},6H:7(a){17 c;14(r===2){14(!n){n={};1x(c=bt.1P(m))n[c[1].1u()]=c[2]}c=n[a.1u()]}12 c===b?19:c},7y:7(a){r||(e.78=a);12 6},3H:7(a){a=a||"3H",o&&o.3H(a),v(0,a);12 6}};h.3j(u),u.5q=u.3b,u.2a=u.57,u.2L=i.3b,u.8t=7(a){14(a){17 b;14(r<2)1a(b 1h a)j[b]=[j[b],a[b]];1k b=a[u.6e],u.5r(b,b)}12 6},e.1D=((a||e.1D)+"").1m(bs,"").1m(bx,bK[1]+"//"),e.2T=d.4G(e.5k||"*").1u().1Z(bB),e.4b||(q=bF.1P(e.1D.1u()),e.4b=q&&(q[1]!=bK[1]||q[2]!=bK[2]||(q[3]||(q[1]==="aL:"?80:aI))!=(bK[3]||(bK[1]==="aL:"?80:aI)))),e.1q&&e.aG&&1c e.1q!=="1t"&&(e.1q=d.5g(e.1q,e.8e)),bN(bH,e,c,u);14(r===2)12!1;s=e.4r,e.1f=e.1f.5v(),e.4x=!bw.1d(e.1f),s&&d.8E++===0&&d.1o.2l("b2");14(!e.4x){e.1q&&(e.1D+=(by.1d(e.1D)?"&":"?")+e.1q),k=e.1D}14((!e.4x||"b4"==e.1f)&&e.3p===!1){17 w=d.2j(),x=e.1D.1m(bC,"$eN="+w);e.1D=x+(x===e.1D?(by.1d(e.1D)?"&":"?")+"3J="+w:"")}14(e.1q&&e.4x&&e.6f!==!1||c.6f)l["ez-eA"]=e.6f;e.aw&&(k=k||e.1D,d.76[k]&&(l["9N-9M-ex"]=d.76[k]),d.77[k]&&(l["9N-ew-et"]=d.77[k])),l.eu=e.2T[0]&&e.5c[e.2T[0]]?e.5c[e.2T[0]]+(e.2T[0]!=="*"?", */*; q=0.ev":""):e.5c["*"];1a(t 1h e.9L)u.7e(t,e.9L[t]);14(e.9K&&(e.9K.1i(f,u,e)===!1||r===2)){u.3H();12!1}1a(t 1h{5q:1,2a:1,2L:1})u[t](e[t]);o=bN(bI,e,c,u);14(o){u.3a=1,s&&g.2l("9o",[u,e]),e.3k&&e.87>0&&(p=5i(7(){u.3H("87")},e.87));1H{r=1,o.7a(l,v)}1F(y){6e<2?v(-1,y):d.2a(y)}}1k v(-1,"9H eB");12 u},5g:7(a,c){17 e=[],f=7(a,b){b=d.1s(b)?b():b,e[e.18]=9I(a)+"="+9I(b)};c===b&&(c=d.3h.8e);14(d.2o(a)||a.4P&&!d.59(a))d.1g(a,7(){f(6.2X,6.2k)});1k 1a(17 g 1h a)bO(g,a[g],c,f);12 e.3w("&").1m(ci,"+")}}),d.1r({8E:0,76:{},77:{}});17 cj=d.2j(),bS=/(\\=)\\?(&|$)|()\\?\\?()/i;d.6L({45:"eJ",4N:7(){12 d.1J+"3J"+cj++}}),d.8B("3v 45",7(b,c,e){17 f=1c b.1q==="1t";14(b.2T[0]==="45"||c.4N||c.45!=19||b.45!==!1&&(bS.1d(b.1D)||f&&bS.1d(b.1q))){17 g,h=b.4N=d.1s(b.4N)?b.4N():b.4N,i=a[h],j=b.1D,k=b.1q,l="$1"+h+"$2",m=7(){a[h]=i,g&&d.1s(i)&&a[h](g[0])};b.45!==!1&&(j=j.1m(bS,l),b.1D===j&&(f&&(k=k.1m(bS,l)),b.1q===k&&(j+=(/\\?/.1d(j)?"&":"?")+b.45+"="+h))),b.1D=j,b.1q=k,a[h]=7(a){g=[a]},e.5r(m,m),b.4p["1Y 3v"]=7(){g||d.2a(h+" eI 4W eH");12 g[0]},b.2T[0]="3v";12"1Y"}}),d.6L({5c:{1Y:"1B/56, 4E/56, 4E/8w, 4E/x-8w"},4o:{1Y:/56|8w/},4p:{"1B 1Y":7(a){d.8C(a);12 a}}}),d.8B("1Y",7(a){a.3p===b&&(a.3p=!1),a.4b&&(a.1f="70",a.4r=!1)}),d.7d("1Y",7(a){14(a.4b){17 d,e=c.6Y||c.1S("6Y")[0]||c.1G;12{7a:7(f,g){d=c.22("1Y"),d.3k="3k",a.9O&&(d.eF=a.9O),d.6X=a.1D,d.6V=d.4z=7(a,c){14(!d.3a||/eG|2L/.1d(d.3a))d.6V=d.4z=19,e&&d.1j&&e.2Q(d),d=b,c||g(5Z,"5q")},e.2Z(d,e.1A)},3H:7(){d&&d.6V(0,1)}}}});17 ck=d.2j(),bU,bV;d.3h.7Q=a.8r?7(){12!6.7B&&bX()||bY()}:bX,bV=d.3h.7Q(),d.1n.4h=!!bV,d.1n.9P=bV&&"ea"1h bV,bV=b,d.1n.4h&&d.7d(7(a){14(!a.4b||d.1n.9P){17 c;12{7a:7(e,f){17 g=a.7Q(),h,i;(a.1D.28(5z.6M.ax)==-1)&&(a.1D=5z.6M.eD+"//"+5z.6M.ax+a.1D);a.9W?g.9U(a.1f,a.1D,a.3k,a.9W,a.52):g.9U(a.1f,a.1D,a.3k);14(a.7z)1a(i 1h a.7z)g[i]=a.7z[i];a.78&&g.7y&&g.7y(a.78),(!a.4b||a.4x)&&!e["X-9T-9Q"]&&(e["X-9T-9Q"]="9R");1H{1a(i 1h e)g.7e(i,e[i])}1F(j){}g.7a(a.4x&&a.1q||19),c=7(e,i){17 j,k,l,m,n;1H{14(c&&(i||g.3a===4)){c=b,h&&(g.4z=d.4C,2m bU[h]);14(i)g.3a!==4&&g.3H();1k{j=g.6e,l=g.9S(),m={},n=g.9G,n&&n.1G&&(m.3o=n),m.1B=g.7C;1H{k=g.9F}1F(o){k=""}j||!a.7B||a.4b?j===eL&&(j=eK):j=m.1B?5Z:eC}}}1F(p){i||f(-1,p)}m&&f(j,k,m,l)},a.3k&&g.3a!==4?(bU||(bU={},bW()),h=ck++,g.4z=bU[h]=c):c()},3H:7(){c&&c(0,1)}}}});17 cl={},b$=/^(?:3M|2F|2C)$/,9E=/^([+\\-]=)?([\\d+.\\-]+)([a-z%]*)$/i,ca,cb=[["3l","6k","ey","eM","f0"],["2A","7L","eZ","9w","eY"],["23"]];d.fn.1r({2F:7(a,b,c){17 e,f;14(a||a===0)12 6.4U(cc("2F",3),a,b,c);1a(17 g=0,h=6.18;g<h;g++)e=6[g],f=e.1e.1W,!d.24(e,"5L")&&f==="2K"&&(f=e.1e.1W=""),f===""&&d.1y(e,"1W")==="2K"&&d.24(e,"5L",cd(e.1l));1a(g=0;g<h;g++){e=6[g],f=e.1e.1W;14(f===""||f==="2K")e.1e.1W=d.24(e,"5L")||""}12 6},2C:7(a,b,c){14(a||a===0)12 6.4U(cc("2C",3),a,b,c);1a(17 e=0,f=6.18;e<f;e++){17 g=d.1y(6[e],"1W");g!=="2K"&&!d.24(6[e],"5L")&&d.24(6[e],"5L",g)}1a(e=0;e<f;e++)6[e].1e.1W="2K";12 6},9x:d.fn.3M,3M:7(a,b,c){17 e=1c a==="71";d.1s(a)&&d.1s(b)?6.9x.1E(6,1p):a==19||e?6.1g(7(){17 b=e?a:d(6).5y(":2W");d(6)[b?"2F":"2C"]()}):6.4U(cc("3M",3),a,b,c);12 6},f1:7(a,b,c,d){12 6.1C(":2W").1y("23",0).2F().4H().4U({23:b},a,c,d)},4U:7(a,b,c,e){17 f=d.9z(b,c,e);14(d.5K(a))12 6.1g(f.2L);12 6[f.2B===!1?"1g":"2B"](7(){17 b=d.1r({},f),c,e=6.1b===1,g=e&&d(6).5y(":2W"),h=6;1a(c 1h a){17 i=d.6Z(c);c!==i&&(a[i]=a[c],2m a[c],c=i);14(a[c]==="2C"&&g||a[c]==="2F"&&!g)12 b.2L.1i(6);14(e&&(c==="3l"||c==="2A")){b.3d=[6.1e.3d,6.1e.f2,6.1e.f4];14(d.1y(6,"1W")==="4q"&&d.1y(6,"8z")==="2K")14(d.1n.8x){17 j=cd(6.1l);j==="4q"?6.1e.1W="4q-73":(6.1e.1W="4q",6.1e.5J=1)}1k 6.1e.1W="4q-73"}d.2o(a[c])&&((b.6w=b.6w||{})[c]=a[c][1],a[c]=a[c][0])}b.3d!=19&&(6.1e.3d="2W"),b.5O=d.1r({},a),d.1g(a,7(c,e){17 f=2b d.fx(h,b,c);14(b$.1d(e))f[e==="3M"?g?"2F":"2C":e](a);1k{17 i=9E.1P(e),j=f.5M();14(i){17 k=1T(i[2]),l=i[3]||(d.72[c]?"":"3m");l!=="3m"&&(d.1e(h,c,(k||1)+l),j=(k||1)/f.5M()*j,d.1e(h,c,j+l)),i[1]&&(k=(i[1]==="-="?-1:1)*k+j),f.5D(j,k,l)}1k f.5D(j,e,"")}});12!0})},84:7(a,b){17 c=d.5B;a&&6.2B([]),6.1g(7(){1a(17 a=c.18-1;a>=0;a--)c[a].1v===6&&(b&&c[a](!0),c.2D(a,1))}),b||6.3C();12 6}}),d.1g({f3:cc("2F",1),eX:cc("2C",1),eW:cc("3M",1),eT:{23:"2F"},er:{23:"2C"},e2:{23:"3M"}},7(a,b){d.fn[a]=7(a,c,d){12 6.4U(b,a,c,d)}}),d.1r({9z:7(a,b,c){17 e=a&&1c a==="1L"?d.1r({},a):{2L:c||!c&&b||d.1s(a)&&a,3u:a,5P:c&&b||b&&!d.1s(b)&&b};e.3u=d.fx.e3?0:1c e.3u==="3L"?e.3u:e.3u 1h d.fx.5F?d.fx.5F[e.3u]:d.fx.5F.3i,e.4I=e.2L,e.2L=7(){e.2B!==!1&&d(6).3C(),d.1s(e.4I)&&e.4I.1i(6)};12 e},5P:{9Y:7(a,b,c,d){12 c+d*a},8l:7(a,b,c,d){12(-44.dR(a*44.dQ)/2+.5)*d+c}},5B:[],fx:7(a,b,c){6.1I=b,6.1v=a,6.21=c,b.5S||(b.5S={})}}),d.fx.1K={8b:7(){6.1I.4a&&6.1I.4a.1i(6.1v,6.2j,6),(d.fx.4a[6.21]||d.fx.4a.3i)(6)},5M:7(){14(6.1v[6.21]!=19&&(!6.1v.1e||6.1v.1e[6.21]==19))12 6.1v[6.21];17 a,b=d.1y(6.1v,6.21);12 43(a=1T(b))?!b||b==="5N"?0:b:a},5D:7(a,b,c){7 g(a){12 e.4a(a)}17 e=6,f=d.fx;6.8i=d.2j(),6.66=a,6.4H=b,6.8g=c||6.8g||(d.72[6.21]?"":"3m"),6.2j=6.66,6.68=6.64=0,g.1v=6.1v,g()&&d.5B.1w(g)&&!ca&&(ca=9X(f.am,f.al))},2F:7(){6.1I.5S[6.21]=d.1e(6.1v,6.21),6.1I.2F=!0,6.5D(6.21==="2A"||6.21==="3l"?1:0,6.5M()),d(6.1v).2F()},2C:7(){6.1I.5S[6.21]=d.1e(6.1v,6.21),6.1I.2C=!0,6.5D(6.5M(),0)},4a:7(a){17 b=d.2j(),c=!0;14(a||b>=6.1I.3u+6.8i){6.2j=6.4H,6.68=6.64=1,6.8b(),6.1I.5O[6.21]=!0;1a(17 e 1h 6.1I.5O)6.1I.5O[e]!==!0&&(c=!1);14(c){14(6.1I.3d!=19&&!d.1n.86){17 f=6.1v,g=6.1I;d.1g(["","X","Y"],7(a,b){f.1e["3d"+b]=g.3d[a]})}6.1I.2C&&d(6.1v).2C();14(6.1I.2C||6.1I.2F)1a(17 h 1h 6.1I.5O)d.1e(6.1v,h,6.1I.5S[h]);6.1I.2L.1i(6.1v)}12!1}17 i=b-6.8i;6.64=i/6.1I.3u;17 j=6.1I.6w&&6.1I.6w[6.21],k=6.1I.5P||(d.5P.8l?"8l":"9Y");6.68=d.5P[j||k](6.64,i,0,1,6.1I.3u),6.2j=6.66+(6.4H-6.66)*6.68,6.8b();12!0}},d.1r(d.fx,{am:7(){17 a=d.5B;1a(17 b=0;b<a.18;b++)a[b]()||a.2D(b--,1);a.18||d.fx.84()},al:13,84:7(){ei(ca),ca=19},5F:{eh:e9,ec:5Z,3i:ed},4a:{23:7(a){d.1e(a.1v,"23",a.2j)},3i:7(a){a.1v.1e&&a.1v.1e[a.21]!=19?a.1v.1e[a.21]=(a.21==="2A"||a.21==="3l"?44.6s(0,a.2j):a.2j)+a.8g:a.1v[a.21]=a.2j}}}),d.27&&d.27.2P&&(d.27.2P.ef=7(a){12 d.4V(d.5B,7(b){12 a===b.1v}).18});17 cm=/^t(?:ee|d|h)$/i,cf=/^(?:1R|2v)$/i;"ao"1h c.1G?d.fn.1V=7(a){17 b=6[0],c;14(a)12 6.1g(7(b){d.1V.7o(6,a,b)});14(!b||!b.26)12 19;14(b===b.26.1R)12 d.1V.8o(b);1H{c=b.ao()}1F(e){}17 f=b.26,g=f.1G;14(!c||!d.2G(g,b))12 c?{1O:c.1O,1z:c.1z}:{1O:0,1z:0};17 h=f.1R,i=cg(f),j=g.6I||h.6I||0,k=g.6A||h.6A||0,l=i.a6||d.1n.4O&&g.3O||h.3O,m=i.7D||d.1n.4O&&g.3B||h.3B,n=c.1O+l-j,o=c.1z+m-k;12{1O:n,1z:o}}:d.fn.1V=7(a){17 b=6[0];14(a)12 6.1g(7(b){d.1V.7o(6,a,b)});14(!b||!b.26)12 19;14(b===b.26.1R)12 d.1V.8o(b);d.1V.6v();17 c,e=b.4A,f=b,g=b.26,h=g.1G,i=g.1R,j=g.5H,k=j?j.6z(b,19):b.3R,l=b.31,m=b.6E;1x((b=b.1j)&&b!==i&&b!==h){14(d.1V.8q&&k.2i==="7R")1M;c=j?j.6z(b,19):b.3R,l-=b.3O,m-=b.3B,b===e&&(l+=b.31,m+=b.6E,d.1V.ar&&(!d.1V.ag||!cm.1d(b.1l))&&(l+=1T(c.7P)||0,m+=1T(c.7M)||0),f=e,e=b.4A),d.1V.af&&c.3d!=="ap"&&(l+=1T(c.7P)||0,m+=1T(c.7M)||0),k=c}14(k.2i==="38"||k.2i==="7w")l+=i.31,m+=i.6E;d.1V.8q&&k.2i==="7R"&&(l+=44.6s(h.3O,i.3O),m+=44.6s(h.3B,i.3B));12{1O:l,1z:m}},d.1V={6v:7(){17 a=c.1R,b=c.22("1N"),e,f,g,h,i=1T(d.1y(a,"6k"))||0,j="<1N 1e=\'2i:5A;1O:0;1z:0;4X:0;4n:au av #at;5T:0;2A:4k;3l:4k;\'><1N></1N></1N><2f 1e=\'2i:5A;1O:0;1z:0;4X:0;4n:au av #at;5T:0;2A:4k;3l:4k;\' fT=\'0\' as=\'0\'><3S><3n></3n></3S></2f>";d.1r(b.1e,{2i:"5A",1O:0,1z:0,4X:0,4n:0,2A:"4k",3l:"4k",aq:"2W"}),b.2s=j,a.2Z(b,a.1A),e=b.1A,f=e.1A,h=e.2V.1A.1A,6.ar=f.31!==5,6.ag=h.31===5,f.1e.2i="7R",f.1e.1O="fM",6.8q=f.31===20||f.31===15,f.1e.2i=f.1e.1O="",e.1e.3d="2W",e.1e.2i="38",6.af=f.31===-5,6.a4=a.31!==i,a.2Q(b),a=b=e=f=g=h=19,d.1V.6v=d.4C},8o:7(a){17 b=a.31,c=a.6E;d.1V.6v(),d.1V.a4&&(b+=1T(d.1y(a,"6k"))||0,c+=1T(d.1y(a,"7L"))||0);12{1O:b,1z:c}},7o:7(a,b,c){17 e=d.1y(a,"2i");e==="7w"&&(a.1e.2i="38");17 f=d(a),g=f.1V(),h=d.1y(a,"1O"),i=d.1y(a,"1z"),j=e==="5A"&&d.3V("5N",[h,i])>-1,k={},l={},m,n;j&&(l=f.2i()),m=j?l.1O:a5(h,10)||0,n=j?l.1z:a5(i,10)||0,d.1s(b)&&(b=b.1i(a,c,g)),b.1O!=19&&(k.1O=b.1O-g.1O+m),b.1z!=19&&(k.1z=b.1z-g.1z+n),"a2"1h b?b.a2.1i(a,k):f.1y(k)}},d.fn.1r({2i:7(){14(!6[0])12 19;17 a=6[0],b=6.4A(),c=6.1V(),e=cf.1d(b[0].1l)?{1O:0,1z:0}:b.1V();c.1O-=1T(d.1y(a,"6k"))||0,c.1z-=1T(d.1y(a,"7L"))||0,e.1O+=1T(d.1y(b[0],"7P"))||0,e.1z+=1T(d.1y(b[0],"7M"))||0;12{1O:c.1O-e.1O,1z:c.1z-e.1z}},4A:7(){12 6.2r(7(){17 a=6.4A||c.1R;1x(a&&(!cf.1d(a.1l)&&d.1y(a,"2i")==="7w"))a=a.4A;12 a})}}),d.1g(["a0","a1"],7(a,c){17 e="6p"+c;d.fn[e]=7(c){17 f=6[0],g;14(!f)12 19;14(c!==b)12 6.1g(7(){g=cg(6),g?g.fU(a?d(g).3B():c,a?c:d(g).3O()):6[e]=c});g=cg(f);12 g?"7D"1h g?g[a?"a6":"7D"]:d.1n.4O&&g.3Y.1G[e]||g.3Y.1R[e]:f[e]}}),d.1g(["fj","a7"],7(a,c){17 e=c.1u();d.fn["fi"+c]=7(){12 6[0]?1T(d.1y(6[0],e,"5T")):19},d.fn["fl"+c]=7(a){12 6[0]?1T(d.1y(6[0],e,a?"4X":"4n")):19},d.fn[e]=7(a){17 f=6[0];14(!f)12 a==19?19:6;14(d.1s(a))12 6.1g(7(b){17 c=d(6);c[e](a.1i(6,b,c[e]()))});14(d.4f(f)){17 g=f.3Y.1G["7u"+c];12 f.3Y.fa==="fb"&&g||f.3Y.1R["7u"+c]||g}14(f.1b===9)12 44.6s(f.1G["7u"+c],f.1R["6p"+c],f.1G["6p"+c],f.1R["1V"+c],f.1G["1V"+c]);14(a===b){17 h=d.1y(f,e),i=1T(h);12 d.43(i)?h:i}12 6.1y(e,1c a==="1t"?a:a+"3m")}}),a.5V=a.$=d})(5z);', 62, 989, '||||||this|function|||||||||||||||||||||||||||||||||||||||||||||||||||||||||return||if|||var|length|null|for|nodeType|typeof|test|style|type|each|in|call|parentNode|else|nodeName|replace|support|event|arguments|data|extend|isFunction|string|toLowerCase|elem|push|while|css|left|firstChild|text|filter|url|apply|catch|documentElement|try|options|expando|prototype|object|break|div|top|exec|selector|body|getElementsByTagName|parseFloat|guid|offset|display|find|script|split||prop|createElement|opacity|_data|className|ownerDocument|expr|indexOf|getAttribute|error|new|match|slice|handle|table|target|remove|position|now|value|trigger|delete||isArray|checked|select|map|innerHTML|events|add|html|handler|tbody|get|undefined|width|queue|hide|splice|ready|show|contains|pushStack|href|button|none|complete|namespace|childNodes|context|filters|removeChild|input|Array|dataTypes|shift|nextSibling|hidden|name|disabled|insertBefore|preventDefault|offsetTop||id|on|RegExp|special|makeArray|relative|set|readyState|done|append|overflow|ID|unshift|appendChild|ajaxSettings|_default|promise|async|height|px|td|xml|cache|resolveWith|key|addEventListener|class|duration|json|join|radio|attachEvent|live|val|scrollLeft|dequeue|selected|browser|nth|constructor|abort|checkbox|_|submit|number|toggle|continue|scrollTop|attr|removeAttribute|currentStyle|tr|setup|teardown|inArray|compareDocumentPosition|clone|document|getAttributeNode|getElementsByClassName|selectedIndex|dir|isNaN|Math|jsonp|init|sort|index|POS|step|crossDomain|Event|uFFFF|u00c0|isWindow|option|ajax|stopPropagation|getElementById|1px|domManip|querySelectorAll|border|contents|converters|inline|global|Object|substr|click|proxy|previousSibling|hasContent|unbind|onreadystatechange|offsetParent|closest|noop|TAG|application|textarea|trim|end|old|mouseleave|keyCode|first|PSEUDO|jsonpCallback|boxModel|jquery|merge|offsetWidth|CLASS|handleObj|animate|grep|not|margin|mouseenter|String|isXML|sizcache|password|empty|which||javascript|fail|one|isPlainObject|replaceWith|focus|accepts|_Deferred|reliableHiddenOffsets|createTextNode|param|removeEventListener|setTimeout|noData|dataType|deleteExpando|cleanData|props|result|fragment|success|then|matchesSelector|removeData|cloneNode|toUpperCase|form|currentTarget|is|window|absolute|timers|change|custom|last|speeds|level|defaultView|relatedTarget|zoom|isEmptyObject|olddisplay|cur|auto|curAnim|easing|focusout|cssHooks|orig|padding|isDefaultPrevented|jQuery|offsetHeight|isReady|liveFired|200|order|checkClone|readyWait|JSON|state|wrapAll|start|detachEvent|pos|charCode|attrFn|fromElement|triggerHandler|toArray|status|contentType|before|odd|even|isPropagationStopped|marginTop|file|CHILD|concat|cssFloat|scroll|load|isResolved|max|pop|case|initialize|specialEasing|attrHandle|sizset|getComputedStyle|clientLeft|nodeValue|isImmediatePropagationStopped|leftMatch|offsetLeft|instanceof|source|getResponseHeader|clientTop|parent|preType|ajaxSetup|location|unique|cancel|access|getText|runtimeStyle|originalEvent|origType|Function|onload|version|src|head|camelCase|GET|boolean|cssNumber|block|blur|multiple|lastModified|etag|mimeType|false|send|NAME|parseJSON|ajaxTransport|setRequestHeader|noCloneEvent|nodeIndex|true|preFilter|triggered|isXMLDoc|noCloneChecked|cssProps|attributes|setOffset|hasData|ctrlKey|removeEvent|fix|toString|client|0px|static|attrMap|overrideMimeType|xhrFields|children|isLocal|responseText|pageXOffset|focusin|throw|lastChild|_change_data|unload|image|onclick|marginLeft|borderLeftWidth|bind|leadingWhitespace|borderTopWidth|xhr|fixed|link|resolve|toJSON|uniqueSort|acceptData|mouseout|buildFragment|prevObject||mouseover|addClass|bindReady|stop|pageX|shrinkWrapBlocks|timeout|embed|specialSubmit|colgroup|update|clientX|onbeforeunload|traditional|inprogress|unit|removeClass|startTime|after|Date|swing|tabIndex|Deferred|bodyOffset|ATTR|supportsFixedPosition|ActiveXObject|sibling|statusCode|fragments|cacheable|ecmascript|inlineBlockNeedsLayout|setAttribute|float|metaKey|ajaxPrefilter|globalEval|optDisabled|active|ig|submitBubbles|readOnly|changeBubbles|next|keydown|keypress|finally|selectors|has|prevAll|prev|parents|TEST|getTime|reset|getElementsByName|htmlFor|lt|gt|setFilters|only|textContent|prevUntil|origHandler|charAt|detach|wrapInner|createDocumentFragment|appendTo|beforeactivate||clean|prepend|htmlSerialize|thead|die|hover|matches|fieldset|col|lastToggle|optgroup|area|specialChange|ajaxSend|xA0|webkit|uaMatch|DOMContentLoaded|red|fireEvent|scriptEval|paddingLeft|_toggle|array|speed|Invalid|isRejected|reject|subclass|b_|statusText|responseXML|No|encodeURIComponent|uuid|beforeSend|headers|Modified|If|scriptCharset|cors|With|XMLHttpRequest|getAllResponseHeaders|Requested|open|returnValue|username|setInterval|linear|outerHTML|Left|Top|using|defaultValue|doesNotIncludeMarginInBodyOffset|parseInt|pageYOffset|Width|func|funcName|method|create|IsNullOrEmpty|dataFilter|newk|subtractsBorderForOverflowNotVisible|doesAddBorderForTableAndCells|parse|doScroll|tmpl|DOMParser|interval|tick|Microsoft|getBoundingClientRect|visible|visibility|doesNotAddBorder|cellspacing|000|5px|solid|ifModified|host|specified|ajaxComplete|cssText|rejectWith|hasAttribute|parsererror|ajaxStop|optSelected|processData|__className__|443|hasClass|checkOn|http|304|hrefNormalized|clientY|color|100|alpha|swap|getPreventDefault|pageY|toElement|parseXML|frameElement|exclusive|elements|srcElement|serializeArray|ajaxStart|responseFields|POST|toggleClass|mozilla|wheelDelta|rv|userAgent||navigator||||||||||||||delegate||||||||||||||||||||||||||||msie||defaultChecked||||||frameborder|bfnrt|beforedeactivate|opera|view|screenY|ECS|size|newValue|cellSpacing|noConflict|||||offsetX|||||||||offsetY|screenX|rowspan|hasOwnProperty|relatedNode|prevValue|shiftKey|rowSpan|lastIndexOf|Syntax|defaultPrevented|substring|parentWindow|unrecognized|lastIndex|usemap|cancelBubble|stopImmediatePropagation|timeStamp|undelegate|XMLHTTP|tabindex|mergeAttributes|clearAttributes|1e8|colspan|maxLength|beforeunload|content|conversion|from|to|colSpan|defaultSelected|layerY|changeData|dblclick|setData|getData|classid|safari|removeAttr|Number|frameBorder|mouseup|mousedown|delay|changed|radiotest|11cf|96B8|AE6D|random|D27CDB6E|444553540000|applet|4px|resize|can|property|mousemove|Boolean|XMLDOM||bubbles|attrName|loadXML|attrChange|cancelable|detail|layerX|clsid|keyup|parseFromString|eventPhase|XML|regexp|readonly|sub|superclass|rea|clearQueue|compatible|expression|altKey|maxlength|useMap|when|isPrototypeOf|1em|serialize|PI|cos|gi|HEAD|week|widget|extension|ajaxError|ajaxSuccess|www|urlencoded|plain|fadeToggle|off|post|getScript|getJSON|time|tel|600|withCredentials|pixelLeft|fast|400|able|animated|getPropertyValue|slow|clearInterval|month|range|search|email|datetime|mg|date||fadeOut|clearTimeout|Match|Accept|01|None|Since|marginBottom|Content|Type|Transport|404|protocol||charset|loaded|called|was|callback|204|1223|paddingTop|1_|child|Success|Error|notmodified|Etag|fadeIn|300|Last|slideToggle|slideUp|paddingRight|marginRight|paddingBottom|fadeTo|overflowX|slideDown|overflowY|curCSS|fontSize|reverse|img|meta|compatMode|CSS1Compat|iframe|contentDocument|contentWindow|legend|tfoot|unwrap|inner|Height|wrap|outer|caption||th|siblings|nextUntil|switch|createComment|__sizzle__|innerText|header|0n||enabled|mozMatchesSelector||webkitMatchesSelector|andSelf|parentsUntil|nextAll|Until|HTML|msMatchesSelector|sizzle|512|hr|Bottom|20px|Right|zIndex|styleFloat|lineHeight|fontWeight|replaceAll|cellpadding|scrollTo|prependTo|insertAfter'.split('|'), 0, {}));

/*
* window.cookies
*/
(function(){window.Cookies=function(b){return new a(b)};var a=function(b){this.obj=b,this.expires=30};a.prototype={val:function(b){if(b==null){var c=document.cookie.match(new RegExp("(^|)"+this.obj+"=([^;]*)(;|$)"));if(c!=null){return c[2]}return null}else{var d=this;$.ajax({url:"/Account/SetCookie",type:"POST",cache:false,data:{key:d.obj,value:b,days:d.expires}})}}}})();
/*
* lazyload.js
* 图片懒加载
*/
var lazyLoad={IsBind:true,AttributeName:"lazyload",AttributeArray:["lazyload"],IsShow:function(a){var d=$(window).height();var c=$(document).scrollTop();var b=a.offset().top-d;if(parseInt(c)>=parseInt(b)){return true}return false},LoadImage:function(f){var h=this,e,g,d;for(var c in h.AttributeArray){e=h.AttributeArray[c];g=$("img["+e+"]");d=g.length;if(d==0){continue}g.show();g.each(function(){var a=$(this);if(h.IsShow(a)){a.hide();var b=a.attr(e);a.removeAttr(e);if(f){a.attr("src",b).fadeTo(800,1)}else{setTimeout(function(){a.attr("src",b).fadeTo(800,1)},1)}}});g.hide()}},Run:function(a){if(!this.IsBind){return}if(a!=undefined&&a!=null&&typeof(a)=="string"){this.AttributeArray.push(a)}this.LoadImage(a);var b=this;$(window).bind("scroll",function(){if(b.IsBind){b.LoadImage(a)}})}};

/*
* jquery.lazyLoad.js
* 图片懒加载
*/
(function (c, b, a, e) { var d = c(b); c.fn.lazyload = function (f) { var h = this; var i; var g = { threshold: 0, failure_limit: 0, event: "scroll", effect: "show", container: b, data_attribute: "src", skip_invisible: true, appear: null, load: null, placeholder: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC" }; function j() { var k = 0; h.each(function () { var l = c(this); if (g.skip_invisible && !l.is(":visible")) { return } if (c.abovethetop(this, g) || c.leftofbegin(this, g)) { } else { if (!c.belowthefold(this, g) && !c.rightoffold(this, g)) { l.trigger("appear"); k = 0 } else { if (++k > g.failure_limit) { return false } } } }) } if (f) { if (e !== f.failurelimit) { f.failure_limit = f.failurelimit; delete f.failurelimit } if (e !== f.effectspeed) { f.effect_speed = f.effectspeed; delete f.effectspeed } c.extend(g, f) } i = (g.container === e || g.container === b) ? d : c(g.container); if (0 === g.event.indexOf("scroll")) { i.bind(g.event, function () { return j() }) } this.each(function () { var k = this; var l = c(k); k.loaded = false; if (l.attr("src") === e || l.attr("src") === false) { if (l.is("img")) { l.attr("src", g.placeholder) } } l.one("appear", function () { if (!this.loaded) { if (g.appear) { var m = h.length; g.appear.call(k, m, g) } c("<img />").bind("load", function () { var o = l.attr("data-" + g.data_attribute); l.hide(); if (l.is("img")) { l.attr("src", o) } else { l.css("background-image", "url(\"" + o + "\")") } l[g.effect](g.effect_speed); k.loaded = true; var n = c.grep(h, function (q) { return !q.loaded }); h = c(n); if (g.load) { var p = h.length; g.load.call(k, p, g) } }).attr("src", l.attr("data-" + g.data_attribute)) } }); if (0 !== g.event.indexOf("scroll")) { l.bind(g.event, function () { if (!k.loaded) { l.trigger("appear") } }) } }); d.bind("resize", function () { j() }); if ((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)) { d.bind("pageshow", function (k) { if (k.originalEvent && k.originalEvent.persisted) { h.each(function () { c(this).trigger("appear") }) } }) } c(a).ready(function () { j() }); return this }; c.belowthefold = function (g, h) { var f; if (h.container === e || h.container === b) { f = (b.innerHeight ? b.innerHeight : d.height()) + d.scrollTop() } else { f = c(h.container).offset().top + c(h.container).height() } return f <= c(g).offset().top - h.threshold }; c.rightoffold = function (g, h) { var f; if (h.container === e || h.container === b) { f = d.width() + d.scrollLeft() } else { f = c(h.container).offset().left + c(h.container).width() } return f <= c(g).offset().left - h.threshold }; c.abovethetop = function (g, h) { var f; if (h.container === e || h.container === b) { f = d.scrollTop() } else { f = c(h.container).offset().top } return f >= c(g).offset().top + h.threshold + c(g).height() }; c.leftofbegin = function (g, h) { var f; if (h.container === e || h.container === b) { f = d.scrollLeft() } else { f = c(h.container).offset().left } return f >= c(g).offset().left + h.threshold + c(g).width() }; c.inviewport = function (f, g) { return !c.rightoffold(f, g) && !c.leftofbegin(f, g) && !c.belowthefold(f, g) && !c.abovethetop(f, g) }; c.extend(c.expr[":"], { "below-the-fold": function (f) { return c.belowthefold(f, { threshold: 0 }) }, "above-the-top": function (f) { return !c.belowthefold(f, { threshold: 0 }) }, "right-of-screen": function (f) { return c.rightoffold(f, { threshold: 0 }) }, "left-of-screen": function (f) { return !c.rightoffold(f, { threshold: 0 }) }, "in-viewport": function (f) { return c.inviewport(f, { threshold: 0 }) }, "above-the-fold": function (f) { return !c.belowthefold(f, { threshold: 0 }) }, "right-of-fold": function (f) { return c.rightoffold(f, { threshold: 0 }) }, "left-of-fold": function (f) { return !c.rightoffold(f, { threshold: 0 }) } }) })(jQuery, window, document);
  
/*
* Vticker.js 文字滚动插件
*/
(function(b){var g={speed:700,pause:4000,showItems:1,mousePause:!0,height:0,animate:!0,margin:0,padding:0,startPaused:!1},e={moveUp:function(d,c){e.animate(d,c,"up")},moveDown:function(d,c){e.animate(d,c,"down")},animate:function(r,q,o){var p=r.itemHeight,n=r.options,i=r.element,j=i.children("ul"),h="up"===o?"li:first":"li:last";i.trigger("vticker.beforeTick");var d=j.children(h).clone(!0);0<n.height&&(p=j.children("li:first").height());p+=n.margin+2*n.padding;"down"===o&&j.css("top","-"+p+"px").prepend(d);if(q&&q.animate){if(r.animating){return}r.animating=!0;j.animate("up"===o?{top:"-="+p+"px"}:{top:0},n.speed,function(){b(j).children(h).remove();b(j).css("top","0px");r.animating=!1;i.trigger("vticker.afterTick")})}else{j.children(h).remove(),j.css("top","0px"),i.trigger("vticker.afterTick")}"up"===o&&d.appendTo(j)},nextUsePause:function(){var d=b(this).data("state"),c=d.options;d.isPaused||2>d.itemCount||a.next.call(this,{animate:c.animate})},startInterval:function(){var d=b(this).data("state"),c=this;d.intervalId=setInterval(function(){e.nextUsePause.call(c)},d.options.pause)},stopInterval:function(){var c=b(this).data("state");c&&(c.intervalId&&clearInterval(c.intervalId),c.intervalId=void 0)},restartInterval:function(){e.stopInterval.call(this);e.startInterval.call(this)}},a={init:function(d){a.stop.call(this);var c=jQuery.extend({},g);d=b.extend(c,d);var c=b(this),i={itemCount:c.children("ul").children("li").length,itemHeight:0,itemMargin:0,element:c,animating:!1,options:d,isPaused:d.startPaused?!0:!1,pausedByCode:!1};b(this).data("state",i);c.css({overflow:"hidden",position:"relative"}).children("ul").css({position:"absolute",margin:0,padding:0}).children("li").css({margin:d.margin,padding:d.padding});isNaN(d.height)||0===d.height?(c.children("ul").children("li").each(function(){var h=b(this);h.height()>i.itemHeight&&(i.itemHeight=h.height())}),c.children("ul").children("li").each(function(){b(this).height(i.itemHeight)}),c.height((i.itemHeight+(d.margin+2*d.padding))*d.showItems+d.margin)):c.height(d.height);var f=this;d.startPaused||e.startInterval.call(f);d.mousePause&&c.bind("mouseenter",function(){!0!==i.isPaused&&(i.pausedByCode=!0,e.stopInterval.call(f),a.pause.call(f,!0))}).bind("mouseleave",function(){if(!0!==i.isPaused||i.pausedByCode){i.pausedByCode=!1,a.pause.call(f,!1),e.startInterval.call(f)}})},pause:function(d){var c=b(this).data("state");if(c){if(2>c.itemCount){return !1}c.isPaused=d;c=c.element;d?(b(this).addClass("paused"),c.trigger("vticker.pause")):(b(this).removeClass("paused"),c.trigger("vticker.resume"))}},next:function(d){var c=b(this).data("state");if(c){if(c.animating||2>c.itemCount){return !1}e.restartInterval.call(this);e.moveUp(c,d)}},prev:function(d){var c=b(this).data("state");if(c){if(c.animating||2>c.itemCount){return !1}e.restartInterval.call(this);e.moveDown(c,d)}},stop:function(){b(this).data("state")&&e.stopInterval.call(this)},remove:function(){var c=b(this).data("state");c&&(e.stopInterval.call(this),c=c.element,c.unbind(),c.remove())}};b.fn.vTicker=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}if("object"!==typeof c&&c){b.error("Method "+c+" does not exist on jQuery.vTicker")}else{return a.init.apply(this,arguments)}}})(jQuery);


$.extend({
    App: {
        bind: function (ev, callback) {
            var _callbacks = this._callbacks || (this._callbacks = {}); (this._callbacks[ev] || (this._callbacks[ev] = [])).push(callback);
            return this
        },
        trigger: function () {
            var args = Array.prototype.slice.call(arguments, 0);
            var ev = args.shift();
            var that = this;
            var calls,
            list;
            if (!(calls = this._callbacks)) return this;
            if (!(list = this._callbacks[ev])) return this;
            $.each(list,
            function (k, v) {
                v.apply(that, args)
            });
            return this
        }
    },
    ECS: {
        CSSLink: function (link) {
            return ECS.Path.CSSPath + link + '?version=' + ECS.Path.Version
        },
        ScriptLink: function (link) {
            return ECS.Path.ScriptPath + link + '?version=' + ECS.Path.Version
        },
        ImageUrlLink: function (link) {
            return ECS.Path.ImagePath + link + '?version=' + ECS.Path.Version
        },
        toPrice: function (price, precision) {
            var a = price;
            if (a >= 0) {
                a = parseFloat(a);
                return '¥' + a.toFixed(precision || 2)
            }
            return '¥' + price
        },
        regExp: {
            isNumber: /^(([1-9])(\d+)?)$/,
            hanzi: /[\u4E00-\u9FA5]/g,
            numbers: /^[0-9]+$/,
            email: /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,
            isNumberOrLetter: /^(?![a-z]+$)(?![A-Z]+$)(?![0-9]+$)[a-zA-Z0-9]+$/,
            tirmAll: /\s/g,
            tirmStart: /^\s*/,
            trimEnd: /\s*$/,
            trim: /(^\s*)|(\s*$)/g,
            zipCode: /^[0-9]+$/,
            cellPhone: /^1[34578][0-9]{9}$/,
            phone: /^0\d{2,5}-[2-9]\d{6,7}(-\d{0,6})?$/,
            phonereg: /^0?\d{3,4}$/,
            phone1reg: /^\d{7,8}$/,
            phone2reg: /^\d{1,4}$/,
            nickName: /^[0-9A-Za-z_]{4,20}$/,
            time: /^\d{4}-\d{2}-\d{2}$/,
            ReplaceRegExp: function (baseRegExp, replaceRegExp, newRegExp) {
                return baseRegExp.replace(replaceRegExp, newRegExp)
            }
        },
        serialize: function (data) {
            var _output = [];
            if (data) {
                for (var key in data) {
                    _output.push(key + ':' + data[key])
                }
            }
            return _output.join(',')
        },
        requestQueue: [],
        ajaxInstance: null,
        ajax: function (data) {
            (function (_utils, _data) {
                function AjaxStart() {
                    new AjaxRequest()
                }
                function AjaxRequest() {
                    this.init()
                }
                AjaxRequest.prototype = {
                    requestErrorDefaultMsg: '请求失败，请重试',
                    init: function () {
                        if (!_data.args && _data.data) {
                            _data.args = _data.data
                        }
                        if (!_data.callback && _data.success) {
                            _data.callback = _data.success
                        }
                        if (!_data.args) _data.args = {};
                        if (typeof (_data.args) == 'object') {
                            _data.args['__RequestVerificationToken'] = $(':input[name=__RequestVerificationToken]').val();
                            this.url = _data.url + _utils.serialize(_data.args || {})
                        } else {
                            var __RequestVerificationToken = '&__RequestVerificationToken=' + $(':input[name=__RequestVerificationToken]').val();
                            _data.args += __RequestVerificationToken;
                            this.url = _data.url + _data.args
                        }
                        if (this.validateRequest()) {
                            this.beginRequest()
                        }
                    },
                    validateRequest: function () {
                        for (var urls in _utils.requestQueue) {
                            if (_utils.requestQueue[urls] == this.url) {
                                return false
                            }
                        }
                        _utils.requestQueue.push(this.url);
                        return true
                    },
                    beginRequest: function () {
                        var _this = this;
                        $.ajax({
                            type: _data.type || "post",
                            url: _data.url,
                            data: _data.args || {},
                            async: _data.async || false,
                            beforeSend: function () {
                                if (_data.beforeSend) {
                                    _data.beforeSend()
                                }
                            },
                            cache: _data.cache || false,
                            success: function (resultData) {
                                var validate = true;
                                if (!_data.notvalidate) {
                                    validate = _this.responseValidate(resultData.msg || resultData)
                                }
                                if (validate) {
                                    if (_data.callback) {
                                        _data.callback(resultData)
                                    }
                                } else {
                                    if (_data.error) {
                                        _data.error()
                                    }
                                }
                                setTimeout(function () {
                                    _this.requestDispose()
                                },
                                500)
                            },
                            error: function () {
                                _this.requestDispose();
                                if (_data.error) {
                                    _data.error()
                                } else {
                                    _utils.alert({
                                        msg: _this.requestErrorDefaultMsg,
                                        status: 0
                                    })
                                }
                            }
                        })
                    },
                    responseValidate: function (data) {
                        if (typeof (data) != 'object') {
                            for (var key in this.IllegalRequestResultData) {
                                var _illegalRequestResultData = this.IllegalRequestResultData[key];
                                var _result = _illegalRequestResultData.result;
                                var _msg = _illegalRequestResultData.msg;
                                var _index = _illegalRequestResultData.index;
                                if (_index == 1) {
                                    if (data.indexOf(_result) >= 0) {
                                        _utils.alert({
                                            msg: _msg,
                                            status: 0,
                                            callback: _illegalRequestResultData.callback
                                        });
                                        return false
                                    }
                                } else {
                                    if (data == _result) {
                                        _utils.alert({
                                            msg: _msg,
                                            status: 0,
                                            callback: _illegalRequestResultData.callback
                                        });
                                        return false
                                    }
                                }
                            }
                        }
                        return true
                    },
                    requestDispose: function () {
                        for (var i = 0, j = _utils.requestQueue.length; i < j; i++) {
                            if (_utils.requestQueue[i] == this.url) {
                                _utils.requestQueue.splice(i, 1);
                                return
                            }
                        }
                    },
                    requestErrorDefaultMsg: '请求失败，请重试或刷新页面',
                    IllegalRequestResultData: [{
                        result: '您输入或提交的信息中包含html标记或单引号等，请重新输入',
                        msg: '检测到您提交的信息中包含html标记或单引号等信息，请检查后重新提交',
                        index: -1
                    },
                    {
                        result: 'request error',
                        msg: '请求失败，请重试',
                        index: -1
                    },
                    {
                        result: 'splitorder',
                        index: -1,
                        callback: function () {
                            window.location.href = '/Shopping/GCheck'
                        }
                    },
                    {
                        result: 'soItemNull',
                        msg: '购物车内没有产品信息，请挑选您要购买的产品',
                        index: -1,
                        callback: function () {
                            window.location.href = '/cart.html'
                        }
                    },
                    {
                        result: 'soInfonull',
                        msg: '加载订单信息失败，请返回购物车重试',
                        index: -1,
                        callback: function () {
                            window.location.href = '/cart.html'
                        }
                    },
                    {
                        result: 'loginOut',
                        msg: '您未登录，请先登录',
                        index: -1,
                        callback: function () {
                            window.location.href = '/login.html'
                        }
                    }]
                };
                AjaxStart()
            })(this, data)
        },
        alert: function (data) {
            if (data.msg) {
                alert(data.msg, data.status || 0);
                if (data.callback) {
                    $('#closeAlertSp').bind('click',
                    function () {
                        data.callback();
                        $('#closeAlertSp').unbind('click')
                    })
                }
            } else {
                if (data.callback) data.callback()
            }
        },
        format: function (template) {
            return $.ECS.replace(template, [].slice.call(arguments, 1))
        },
        enter: function (event) {
            return (window.event && window.event.keyCode || event.which) == 13
        },
        replace: function (template, data) {
            return template.replace(/{(.*?)}/g,
            function (match, key) {
                return data[key] == null ? match : data[key]
            })
        },
        countDown: function (param) {
            var e = {
                g: param.end ? param.end.getTime() : new Date().getTime(),
                e: param.date.getTime(),
                d: 1000 * 60 * 60 * 24,
                h: 1000 * 60 * 60,
                m: 1000 * 60,
                s: 1000,
                ms: 100
            };
            e.n = e.e - e.g;
            var r = {
                day: '0',
                hour: '0',
                minute: '00',
                second: '00',
                millisecond: '0',
                timeend: true
            };
            if (e.n > 0) {
                r.day = Math.floor(e.n / e.d);
                e.d -= r.day * e.d;
                r.hour = Math.floor(e.n / e.h);
                e.n -= r.hour * e.h;
                r.hour = Math.floor(r.hour % 24);//add by kael
                r.minute = Math.floor(e.n / e.m);
                e.n -= r.minute * e.m;
                r.second = Math.floor(e.n / e.s);
                e.n -= r.second * e.s;
                r.millisecond = Math.floor(e.n / e.ms);
                for (var a in r) {
                    if (a == 'timeend') {
                        continue
                    }
                    if (r[a] > 0) {
                        r.timeend = false
                    }
                    if (r[a] < 10 && a != 'millisecond') {
                        r[a] = '0' + r[a]
                    } else {
                        r[a] = '' + r[a]
                    }
                }
            }
            param.data = r;
            param.dom.html($.ECS.replace(param.temp, param.data));
            if (Math.floor((e.e - e.g) / 1000 <= 0) && param.callback) {
                param.callback();
                return
            }
            $.ECS.countDown.Timer = setTimeout(function () {
                $.ECS.countDown(param)
            },
            param.time || 1000)
        },
        tmpl: function (data) {
            if (data.v.indexOf("url:") == 0) {
                var link = $.trim(data.v.substring(4));
                if (link && link.indexOf("/") == 0) {
                    link = link.substring(1);
                }
                data.v = "/template/" + link;
                var cache = $.ECS.tmpl.getCache(data.v);
                if (cache) {
                    data.v = cache;
                    $.ECS.tmpl.render(data);
                } else {
                    $.ECS.tmpl.loadTmpl(data);
                }
            } else {
                $.ECS.tmpl.render(data);
            }
        }.method("loadTmpl",
        function (data) {
            var xhr = $.ajaxSettings.xhr();
            xhr.open("GET", data.v, true);
            xhr.send();
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4) {
                    $.ECS.tmpl.setCache(data.v, xhr.responseText);
                    data.v = xhr.responseText;
                    $.ECS.tmpl.render(data);
                }
            }
        }).method("getCache",
        function (key) {
            $.ECS.tmpl.cache = $.ECS.tmpl.cache || {};
            return $.ECS.tmpl.cache[key];
        }).method("setCache",
        function (key, value) {
            $.ECS.tmpl.cache = $.ECS.tmpl.cache || {};
            $.ECS.tmpl.cache[key] = value;
        }).method("render",
        function (data) {
            var regJs = /<%([\w\W]*?)%>/g,
            regJsExpression = /\bbreak\b|\bcase\b|\bcatch\b|\bcontinue\b|\bdefault\b|\bdelete\b|\bdo\b|\belse\b|\bfinally\b|\bfor\b|\bfunction\b|\bif\b|\breturn\b|\bswitch\b|\bthrow\b|\btry\b|\bvar\b|\bwhile\b|\bwith\b|{|}/g,
            newval = ' var r=[];\n',
            len = 0;
            var append = function (val, script) {
                return script ? (newval += val.match(regJsExpression) ? val + '\n' : 'r.push(' + val + ');\n') : (newval += val != '' ? 'r.push("' + val.replace(/"/g, '\\"') + '");\n' : ''),
                append
            };
            while (match = regJs.exec(data.v)) {
                append(data.v.slice(len, match.index))(match[1], true);
                len = match.index + match[0].length
            }
            append(data.v.slice(len));
            newval += ' return r.join("");';
            data.dom.html(new Function(newval.replace(/[\n\r\t]/g, "")).apply(data.datas))
            data.callback && data.callback();
        })
    }
});


$(function () {
    $.ajaxSetup({
        cache: false
    });
    $('body').delegate('textarea', 'keyup',
    function () {
        var a = $(this).val();
        var v = a.replace(new RegExp(/<|>|&gt|&lt/g), '');
        if (v != a) {
            $(this).val(v)
        }
    });
    $('body').delegate('input[type=text]', 'keyup',
    function () {
        var a = $(this).val();
        var v = a.replace(new RegExp(/(\$|<|>|&|\*|%|\?)/g), '');
        if (v != a) {
            $(this).val(v)
        }
    }).delegate('[data-type=num],[data-type=decimal]', 'keyup',
    function () {
        var a = $(this).val();
        var t = $(this).attr('data-type');
        var v;
        if (t === 'num') v = a.replace(new RegExp(/[^\d]/g), '');
        else v = a.replace(new RegExp(/[^\d|^\d.\d]/g), '');
        if (v != a) {
            $(this).val(v)
        }
        var d = $(this).attr('data-id');
        var m = $(this).attr('maxlength');
        if (v.length > m) {
            return false
        }
    }).delegate('input[type=text]', 'blur',
    function () {
        var v = $(this).val();
        if (v.indexOf("'") >= 0) {
            v = v.replace(new RegExp(/(')/g), '"')
        }
        $(this).val(v);
        return true
    });
    $('[ecs-type=tab]').each(function () {
        var child = $(this).attr('tab-child'),
        tabtype = $(this).attr('tab-type'),
        tcls = $(this).attr('tab-toggleClass'),
        cls = $(this).attr('tab-showtoggleClass'),
        time = $(this).attr('tab-showtimeOut') || 0;
        if (child && tabtype) {
            (function (t, c, type, tcls, cls, time) {
                var mouseid;
                $(t).delegate(c, type,
                function (e) {
                    var callback = $(this).attr('ecs-showcallback'),
                    id = $(this).attr('ecs-showid');
                    if (mouseid == id) {
                        return false
                    }
                    mouseid = id;
                    var that = this;
                    setTimeout(function () {
                        if (mouseid) {
                            if (tcls) $(that).addClass(tcls).siblings().removeClass(tcls);
                            if (cls) $(id).addClass(cls).show().siblings().removeClass(cls).hide();
                            else $(id).show.siblings().hide();
                            if (callback) $.App.trigger(callback, e, that)
                        }
                    },
                    time)
                });
                if (type === 'mouseover' || type === 'mouseenter') {
                    $(t).delegate(c, 'mouseleave',
                    function () {
                        mouseid = ''
                    })
                }
            })(this, child, tabtype, tcls, cls, time)
        }
    })
});

(function ($) {
    var Controllers = {};
    var temp = '$',
    baseAttrKey = 'ecs-id';
    Controllers.create = function (includes) {
        var mvc = function () {
            this.initializer.apply(this, arguments);
            this.inits.apply(this, arguments)
        };
        mvc.proxy = function (func) {
            return $.proxy(func, this)
        };
        mvc.fn = mvc.prototype;
        mvc.fn.inits = function () { };
        mvc.fn.proxy = mvc.proxy;
        mvc.include = function (ob) {
            $.extend(this.fn, ob)
        };
        mvc.extend = function (ob) {
            $.extend(this, ob)
        };
        mvc.updateView = function (func, callback) {
            if (func) {
                func();
                var that = this;
                setTimeout(function () {
                    that.refreshElements();
                    that.refreshEles();
                    if (callback) {
                        callback.apply(that, arguments)
                    }
                },
                100)
            }
        };
        mvc.fn.updateView = mvc.updateView;
        mvc.include($.ECS);
        mvc.include({
            initializer: function (options) {
                this.options = options;
                for (var o in this.options) {
                    this[o] = this.options[o]
                }
                this.refreshEles();
                if (this.elements) this.refreshElements();
                if (this.events) this.delegateEvents();
                if (this.appEvents) this.bindAppEvents();
                if (this.mouseHandler) this.bindMouseEvents();
                if (!this.back) {
                    if (this.init) this.init()
                }
            },
            $: function (key) {
                if (key) {
                    return $(key, this.el)
                }
                return null
            },
            refreshEles: function () {
                var that = this;
                this.el.find('[' + baseAttrKey + ']').each(function () {
                    var targetid = $(this).attr(baseAttrKey);
                    that[targetid] = $(this);
                    that[temp + targetid] = '[' + baseAttrKey + ']'
                })
            },
            refreshElements: function () {
                var eles = this.elements;
                for (var key in eles) {
                    var val = eles[key];
                    if (!val) {
                        continue
                    }
                    if (typeof (val) != 'object') {
                        this[val] = this.$(key);
                        this[temp + val] = key
                    } else {
                        for (var a in val) {
                            this[val[a]] = this.$(a);
                            this[temp + val[a]] = a
                        }
                    }
                }
            },
            delegateEvents: function () {
                for (var key in this.events) {
                    (function (obj) {
                        try {
                            var methodName = obj.events[key];
                            var method = obj.proxy(obj[methodName]);
                            var match = key.split(/\s+/g);
                            if (match.length > 2) {
                                match.unshift(match.shift() + ' ' + match.shift())
                            }
                            match.push(function (e) {
                                (function (k, event) {
                                    method.call(obj, k, (event || window.event))
                                })(this, e)
                            });
                            obj.el.delegate.apply(obj.el, match)
                        } catch (e) {
                            console.log(e.message)
                        }
                    })(this)
                }
            },
            bindAppEvents: function () {
                for (var key in this.appEvents) {
                    var method = this.appEvents[key];
                    var proxy = this.proxy(this[method]);
                    $.App.bind(key, proxy)
                }
            }
        });
        if (includes) mvc.include(includes);
        return mvc
    };
    $.fn.extend({
        CreateController: function (options) {
            var controller = Controllers.create(options);
            return new controller({
                el: this
            })
        }
    })
})(jQuery);



String.prototype.Trim = function () {
    return this.replace(/(^\s*)|(\s*$)/g, "")
};


function Tab(listid, tabdiv, count, className, bl) {
    $(listid + " a").click(function () {
        var idlist = $(this).attr("id");
        var id = idlist.split("_");
        for (var i = 1; i <= count; i++) {
            if (i == id[1]) {
                $(tabdiv + i).show();
                $("#" + id[0] + "_" + i).addClass(className)
            } else {
                if (i != 6 || bl) {
                    $(tabdiv + i).hide();
                    $("#" + id[0] + "_" + i).removeClass(className)
                } else {
                    if (id[0] != "id") {
                        $(tabdiv + i).hide();
                        $("#" + id[0] + "_" + i).removeClass(className)
                    }
                }
            }
        }
    })
}
function TabMouseover(listid, tabdiv, count, className, func, bl) {
    $(listid).delegate("a", "mouseover",
    function () {
        var obj = this;
        HeaderRight = $(this).attr("id");
        setTimeout(function () {
            var idlist = $(obj).attr("id");
            if (HeaderRight == idlist) {
                var id = idlist.split("_");
                for (var i = 1; i <= count; i++) {
                    if (i == id[1]) {
                        $(tabdiv + i).show();
                        $("#" + id[0] + "_" + i).addClass(className);
                        if (func) {
                            func(i)
                        }
                    } else {
                        if (i != 6 || bl) {
                            $(tabdiv + i).hide();
                            $("#" + id[0] + "_" + i).removeClass(className)
                        } else {
                            if (id[0] != "id") {
                                $(tabdiv + i).hide();
                                $("#" + id[0] + "_" + i).removeClass(className)
                            }
                        }
                    }
                }
            }
        },
        400)
    }).delegate("a", "mouseleave",
    function () {
        HeaderRight = ""
    })
}
function ShowCategoryList(id, count, layOutCss) {
    if (count) { } else {
        count = 0
    }
    if ($(id).html().length > 100) {
        return
    }
    $.ECS.ajax({
        type: "POST",
        cache: false,
        notvalidate: true,
        url: "/Category/GetCategoryList?&count=" + count + "&layOutUiCss=" + layOutCss,
        success: function (data) {
            if (AjaxValidate(data)) {
                if (data != null) {
                    $(id).html(data);
                    BindCategorEvent()
                }
            } else {
                $(id).html("加载类别失败")
            }
        },
        error: function (e) {
            $(id).html("加载类别失败")
        }
    });
    return false
}
function Showul(id, id1, id2) {
    $(id).delegate("li", "mouseover",
    function () {
        var liidlist = $(this).attr('id');
        var display = $(this).css("display");
        var liid = liidlist.split('_');
        if (liidlist == "baifendianli") {
            return
        }
        if (liid[0] == id1) {
            return
        }
        $(this).css("display", "none");
        $(id1 + liid[1]).css("display", "block");
        var i = $(id + " li").length;
        for (var j = 0; j < i; j++) {
            if (j != liid[1]) {
                $(id2 + j).css("display", "block");
                $(id1 + j).css("display", "none")
            }
        }
    })
}
function loadScript(url, callback, scripttype) {
    setTimeout(function () {
        var script = document.createElement("script");
        if (!scripttype) {
            script.type = "text/javascript"
        } else {
            script.type = scripttype;
        }
        script.async = true;
        script.src = url;
        document.getElementsByTagName("head")[0].appendChild(script);
        if (script.readyState) {
            script.onreadystatechange = function () {
                if (script.readyState == "loaded" || script.readyState == "complete") {
                    script.onreadystatechange = null;
                    if (callback) {
                        callback()
                    }
                }
            }
        } else {
            script.onload = function () {
                if (callback) {
                    callback()
                }
            }
        }
    },
    0)
}
window.alert = function (s, type, refresh, closeTime) {
    if (s.indexOf("操作失败：[object Object]") >= 0) {
        return
    }
    if (s == "out") {
        return
    }
    var error = "";
    var Isflush = false;
    s = s.replace("'", " ");
    if (s == "request error") {
        s = "请求失败，请刷新页面或重试";
        Isflush = true
    }
    if (s.indexOf("商品已成功加入购物车") > -1) {
        s += "<br /><a class=\"gdtit\" href=\"javascript:;\"><input name=\"btnbutton\" id=\"hwlGo1332\" type=\"button\" class=\"butn5\" onclick=\"goShoppingFromCheck(5)\" /></a>  " + "<a class=\"gdtit\" href=\"javascript:;\"><input name=\"btnbutton\" type=\"button\" id=\"hwlGo1333\" class=\"butn17\" onclick=\"CloseAlter()\" /></a>"
    }
    error += "<table cellspacing=\"0\" cellpadding=\"0\" align=\"center\"><tbody><tr><td>";
    if (type == 1) {
        error += "<span class=\"pop_c4\"></span>"
    } else {
        error += "<span class=\"pop_c3\"></span>"
    }
    error += "</td><td class=\"align-vm align-tl lh25\">" + s + "</td></tr></tbody></table>";
    $("#title").html("- 系统提示 -");
    $("#clearing").html("");
    $("#gray").html("");
    $("#ErrorShow").html(error);
    if (s.indexOf("<script>") == -1) {
        $("#showError").show();
        ShowBack()
    }
    if (refresh != null) {
        if (refresh == 1) {
            $("#closeAlertSp").attr('onclick', '').click(function () {
                CloseAlter(1);
            })
        } else {
            $("#closeAlertSp").attr('onclick', '').click(function () {
                CloseAlter(refresh);
            })
        }
    }
    if (closeTime) {
        setTimeout(function () { CloseAlter(); }, closeTime);
    }

    timeclose = -2;
    SettimeCloseAlter()
};



function smoothScroll(yPos, duration) {
    yPos = yPos || 0;
    duration = duration || 500;
    $(document.documentElement).animate({ scrollTop: yPos }, duration);
    $(document.body).animate({ scrollTop: yPos }, duration);
}


$(function () {
    $(".head_menu_all").hover(function () {
        $(".tit_sort").stop(true, true).show();//.fadeIn(1000);
    },
    function () {
        $(".tit_sort").stop(true, true).hide();//.fadeOut(2000);
    });

    $(".pop_cart").hover(function () {
        clearTimeout(cart_timeout);
    }, function () {
        cart_timeout = setTimeout(function () {
            $("#right_cart").removeClass("cart_on", true);
            $(".pop_cart").hide();
        }, 3000);
    });

    //url结构化 jxs add 2015-1-6 拼接 带有req_id 参数的url 并作跳转
    $('body').delegate('[data-type="productLinkAddr"]', 'click', function (o) {
        var productlink = $(this).attr("data-link");
        if (productlink.indexOf("?") > -1)
            productlink += "&" + $(this).attr("data-parme");
        else
            productlink += "?" + $(this).attr("data-parme");

        window.location.href = productlink;
        return false;
    });

    //地区控制入口
    var url = "http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js&k=" + Math.random();
    loadScript(url, function () {
        handleAddr(remote_ip_info);
    }, "text/ecmascript");

    _initRecieveArea();


    // init area by default.
    //if (_getCookie("SentProvinceSysNo") == null || _getCookie("SentProvinceSysNo") == "") {
    //    _auto_ipset(newProvince, newCity)
    //} else {
    //    _initRecieveArea();
    //}
    //$('[data-type="productLinkAddr"]').each(function () {

    //    var productlink = $(this).attr("data-link");
    //    if (productlink.indexOf("?") > -1)
    //        productlink += "&" + $(this).attr("data-parme");
    //    else
    //        productlink += "?" + $(this).attr("data-parme");
    //    $(this).attr("href", productlink);
    //})

});

function ShowWishMessage(result) {
    $("#title").html("- 收藏商品 -");
    var error = "";
    error += "<img src=\"/content/images/";
    if (result.status == 1) {
        error += "pop_yes.gif";
    } else {
        error += "pop_sigh.gif";
    }
    error += "\" width=\"49\" height=\"49\" />";
    error += "<p class=\"orange2\" style=\"font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf\">" + result.msg + "</p>";
    error += "<p class=\"text\" style=\"font:400 12px/33px 'Microsoft YaHei'; \">您已收藏了<span class=\"orange3\">" + result.wishnum + "</span>件商品</p>";
    $("#ErrorShow").html(error);

    var clearingmsg = "";
    clearingmsg += "<div class=\"back\"><a href='/UserHome/Follow'>&lt;&lt; 查看收藏夹</a></div>";
    clearingmsg += "<div class=\"buy\"><a class=\"pop_btn\" onclick=\"CloseAlter()\" style=\"cursor:pointer\"><span>确定 &gt;&gt;</span></a></div>";
    $("#clearing").html(clearingmsg);

    var gray = "";
    var indexset = GetRandom(result.hotitems, 4); //随机取出4个热销
    if (indexset.length > 0) {
        gray += "<div class=\"hot\"><ul class=\"tit\">热销商品:</ul><ul>";
        var i;
        for (var j = 0; j < indexset.length; j++) {
            i = indexset[j];
            gray += "<li><a href=\"" + result.hotitems[i].link + "\" target=\"_blank\" title=\"" + result.hotitems[i].name + "\"><img src=" + result.hotitems[i].image + " /></a>";
            gray += "<div class=\"name\"><a href=\"" + result.hotitems[i].link + "\" target=\"_blank\" title=\"" + result.hotitems[i].name + "\">" + result.hotitems[i].name + "</a></div>";
            gray += "<div class=\"price\">￥" + result.hotitems[i].price + "</div></li>";
        }
        gray += "</ul></div>";
    }
    $("#gray").html(gray);
    $("#gray li").hover(function () {
        $(this).addClass("bd_all");
        $(this).children(".name").addClass("bd_t");
        $(this).children(".price").addClass("bg");
    }, function () {
        $(this).removeClass("bd_all");
        $(this).children(".name").removeClass("bd_t");
        $(this).children(".price").removeClass("bg");
    });
    $("#gray li").last().addClass("m0");
    $("#showError").show();
    ShowBack();
    timeclose = -2;
    SettimeCloseAlter();
}

function ShowReviewMessage(result, id) {
    $("#title").html("- 提示 -");
    var error = "";
    error += "<img src=\"/content/images/pop_sigh.gif\" width=\"49\" height=\"49\" />";
    if (result.indexOf("您已经") > -1) {
        error += "<p style=\"font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf\">您已评论过该商品，无需再次评论。</p>";
    } else if (result.indexOf("您必须") > -1) {
        error += "<p style=\"font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf\">购买过该商品且完成订单方可评论！</p>";
        error += "<p style=\"font:400 12px/33px 'Microsoft YaHei'\">如果您已经购买了该商品，请确认该订单是否已经完成。</p>";
    }
    else {
        error += "<p style=\"font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf\">" + result + "</p>";
    }
    $("#ErrorShow").html(error);

    $("#clearing").html("");

    var gray = "";
    gray += "<div class=\"btn\">";
    if (result.indexOf("您已经") > -1) {
        gray += "<a class=\"pop_btn\" onclick=\"CloseAlter()\" style=\"cursor:pointer;font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf\"><span>&nbsp;&nbsp;确定&nbsp;&nbsp;</span></a></div>"
    } else if (result.indexOf("您必须") > -1) {
        gray += "<a class=\"pop_btn mr15\" onclick=\"AddProductToCart(" + id + ", 1);CloseAlter();\" style=\"cursor:pointer;font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf\"><span>将该商品加入购物车</span></a>";
        gray += "<a class=\"pop_btn\" href='/myorder.html' ><span style=\"font:400 12px/33px 'Microsoft YaHei'; \">查看订单</span></a></div>";
    }
    else {
        gray += "<a class=\"pop_btn\" onclick=\"CloseAlter()\" style=\"cursor:pointer\"><span>&nbsp;&nbsp;确定&nbsp;&nbsp;</span></a></div>"
    }

    $("#gray").html(gray);
    $("#showError").show();
    ShowBack();
    timeclose = -2;
    SettimeCloseAlter();
}

function NotifyAdding(id, type) {
    $.ECS.ajax({
        type: 'POST',
        url: '/Products/GetEmail',
        cache: false,
        notvalidate: true,
        success: function (data) {
            if (AjaxValidate(data)) {
                if (data == -1) {
                    var showlogin = new ShowLoginWindow();
                    showlogin.CallBackFunc = function () {
                        NotifyAdding(id, type);
                        ShowHeaderLogin()
                    };
                    showlogin.type = 1;
                    showlogin.message = "您未登陆，请先登陆";
                    showlogin.ShowLogin();
                    setTimeout(function () {
                        $("#windowLogin").click(function () {
                            LoginOn(showlogin)
                        })
                    },
                    2000)
                } else {
                    ShowNotify(id, type, data);
                }
            }
        }
    })
}

function ShowNotify(id, type, callPhone) {
    var s = "";
    if (type == 1) {
        s = "商品到货后";
    } else {
        s = "商品降价后";
    }
    if (callPhone.length > 0) callPhone = "";
    $("#title").html("- 提示 -");
    var error = "";
    error += "<dl style=\"margin-bottom:22px;font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf\">";
    error += s;
    error += "，我们会用<span class=\"orange4\">短信</span>通知您</dl>";
    error += "<dl><dt style=\"font:400 10px/33px 'Microsoft YaHei'; color:#1e76cf;width:60px;\">手机号码：</dt><dd><input style=\"font:400 10px/33px 'Microsoft YaHei';height:31px;\" type=\"text\" value=\"" + callPhone + "\" class=\"pop_input\" id=\"CallPhone\"><span>*</span></dd></dl>";
    error += "<dl id=\"CallPhonehint\" style=\"display:none\"><dt>&nbsp;</dt><dd style=\"color:#ff0000\" id=\"CallPhonehintcontend\"></dd><dd></dd></dl>";
    $("#ErrorShow").html(error);

    $("#clearing").html("");

    var gray = "";
    gray += "<div class=\"btn\"><a class=\"pop_btn\" ";
    gray += "onclick=\"CheckUsrCallPhone(" + id + ", " + type + ");\" ";
    gray += "style=\"cursor:pointer\"><span>&nbsp;&nbsp;确定&nbsp;&nbsp;</span></a></div>";
    $("#gray").html(gray);
    $("#showError").show();
    //ShowBack();
}

function CheckUsrEmail(id, type) {
    var regMail = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    var ReceiveEmail = $.trim($('#e_mail').val());
    if (ReceiveEmail == '') {
        $('#emailhintcontend').html("&nbsp;邮箱不能为空");
        $('#emailhint').show();
        $('#e_mail').focus();
        return false
    }
    if (!regMail.test(ReceiveEmail)) {
        $('#emailhintcontend').html("&nbsp;邮箱格式不正确");
        $('#emailhint').show();
        $('#e_mail').focus();
        return false
    }
    $('#emailhint').hide();
    AddNotify(id, type);
}

function EmailIsInvalid() {
    var regMail = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    var ReceiveEmail = $.trim($('#e_mail').val());
    if (ReceiveEmail == '') {
        $('#emailhintcontend').html("&nbsp;邮箱不能为空");
        $('#emailhint').show();
        $('#e_mail').focus();
        return false
    }
    if (!regMail.test(ReceiveEmail)) {
        $('#emailhintcontend').html("&nbsp;邮箱格式不正确");
        $('#emailhint').show();
        $('#e_mail').focus();
        return false
    }
    $('#emailhint').hide();
    return false
}
function CallPhoneIsInvalid() {
    var CallPhone = $("#CallPhone").val();
    $.ECS.ajax({
        type: 'POST',
        url: '/Products/CallPhoneInvalid?CallPhone=' + CallPhone + "&time=" + new Date().getTime,
        cache: false,
        success: function (data) {
            if (data == "false") {
                $('#CallPhonehintcontend').html("&nbsp;手机格式输入不正确");
                $('#CallPhonehint').show();
                $('#CallPhone').focus();
            } else {
                $('#CallPhonehintcontend').html("");
                $('#CallPhonehint').hide();
                $('#CallPhone').focus();
            }
        }
    });
}
function CheckUsrCallPhone(id, type) {
    var CallPhone = $("#CallPhone").val();
    $.ECS.ajax({
        type: 'POST',
        url: '/Products/CallPhoneInvalid?CallPhone=' + CallPhone + "&time=" + new Date().getTime,
        cache: false,
        success: function (data) {
            if (data == "false") {
                $('#CallPhonehintcontend').html("&nbsp;手机格式输入不正确");
                $('#CallPhonehint').show();
                $('#CallPhone').focus();
            } else {
                $('#CallPhonehint').hide();
                AddNotify(id, type);
            }
        }
    });
}

function AddNotify(id, type) {
    var CallPhone = $('#CallPhone').val();
    $.ECS.ajax({
        type: 'POST',
        url: '/Products/AddNotify?id=' + id + '&type=' + type + '&CallPhone=' + CallPhone,
        cache: false,
        success: function (data) {
            if (AjaxValidate(data)) {
                if (data == 0) {
                    ShowNotifyMessage("添加失败，请稍后重试");
                } else if (data == -1) {
                    var showlogin = new ShowLoginWindow();
                    showlogin.CallBackFunc = function () {
                        AddNotify(id, type, CallPhone);
                        ShowHeaderLogin()
                    };
                    showlogin.type = 1;
                    showlogin.message = "您未登陆，请先登陆";
                    showlogin.ShowLogin();
                    setTimeout(function () {
                        $("#windowLogin").click(function () {
                            LoginOn(showlogin)
                        })
                    },
                    2000)
                } else if (data == 1) {
                    ShowNotifyMessage("商品订阅成功！", "请留心您的手机短信息 ^_^", 1);
                } else if (data == -2) {
                    if (type == 1) {
                        ShowNotifyMessage("您已添加到货通知，不能重复添加");
                    } else if (type == 2) {
                        ShowNotifyMessage("您已添加降价通知，不能重复添加");
                    }
                } else {
                    alert(data)
                }
            }
        },
        error: function () {
            alert("操作失败")
        }
    })
}

function ShowNotifyMessage(msg1, msg2, status) {
    $("#title").html("- 提示 -");
    var error = "";
    error += "<img src=\"/content/images/";
    if (status == 1) {
        error += "pop_yes.gif";
    } else {
        error += "pop_sigh.gif";
    }
    error += "\" width=\"49\" height=\"49\" />";
    error += "<p style=\"font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf;\">" + msg1 + "</p>";
    if (msg2 != "" && msg2 != null && msg2 != undefined) {
        error += "<p style=\"font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf;\">" + msg2 + "</p>";
    }
    $("#ErrorShow").html(error);

    $("#clearing").html("");

    var gray = "";
    gray += "<div class=\"btn\"><a class=\"pop_btn\" onclick=\"CloseAlter()\" style=\"cursor:pointer;font:400 14px/33px 'Microsoft YaHei'; color:#1e76cf;\"><span>返回商品页</span></a></div>";
    $("#gray").html(gray);
    $("#showError").show();
    ShowBack();
}

function GetRandom(hotitems, count) {
    var result = [];

    for (var i = 0; i < hotitems.length; ++i) {
        if (hotitems[i].name) {
            result.push(i);
        }
    }
    var length = result.length;
    if (length > count) {
        for (var i = 0; i < count; ++i) {
            var index = i + Math.floor(Math.random() * (length - i - 1));
            var t = result[index];
            result[index] = result[i];
            result[i] = t;
        }
        result = result.slice(0, count);
    }
    return result;
}
function ShowBack() {
    SetShowBack();
    
}
var showBackTime = 0;
var showTime=[];
var isBreak;
function SetShowBack() {
    var docheight = $(document).height();
    var docwidth = $(document).width();
    var clientWidth = document.documentElement.clientWidth == 0 ? document.body.clientWidth : document.documentElement.clientWidth;
    var clientHeight = document.documentElement.clientHeight == 0 ? document.body.clientHeight : document.documentElement.clientHeight;
    var docscrollleft = document.documentElement.scrollLeft == 0 ? document.body.scrollLeft : document.documentElement.scrollLeft;
    var docscroll = document.documentElement.scrollTop == 0 ? document.body.scrollTop : document.documentElement.scrollTop;
    var imgHeight =$("#ShowImg").height();
    var imgWidth = $("#ShowImg").width();
    if (imgHeight == 0) {
        //showTime = setTimeout(SetShowBack, 1000);
        showTime.push(setTimeout(SetShowBack, 1000));
        return;
    }
    else {
      
        $("#greybackground").css({
            // "opacity": "0.5",
            "height": docheight,
            "width": clientWidth + docscrollleft
        });
        $("#ShowImgDiv").css({
            "top": clientHeight / 2 - imgHeight / 2 + docscroll,
            "left": clientWidth / 2 - imgWidth / 2
        });
        //showTime = setTimeout(SetShowBack, 1000);
        showTime.push(setTimeout(SetShowBack, 1000));
        $("#greybackground").show();
    }
    
    
}
function HideBack() {
    $("#greybackground").hide();
    timeclose = 0;
    $.each(showTime, function (index, value) {
        //console.log("index", index, "value", value);
        clearTimeout(value);
    });
    
}
var timeclose = 0;
var t;
function CloseAlter(refresh) {
    $("#ErrorShow").html("");
    $("#showError").hide();
    HideBack();
    timeclose = 0;
    clearTimeout(t);
    if (refresh == 1) {
        window.location.href = window.location.href;
        return false
    } else if (refresh != "" && refresh != null) {
        window.location.href = refresh;
        return false;
    }
}
function SettimeCloseAlter() {
    if (timeclose < 0) { } else if (timeclose < 3) {
        t = setTimeout(SettimeCloseAlter, 800);
        timeclose++
    } else {
        CloseAlter();
        timeclose = 0
    }
}
var hideLodding = 0;
function Loadding(type) {
    if (type == "hide") {
        hideLodding = 0;
        HideLoadding()
    } else if (type == "show") {
        ShowBack();
        timeclose = 0;
        $("#Noback").show()
    }
}
function HideLoadding() {
    if (hideLodding == 1) {
        if (timeclose == 0) {
            HideBack()
        }
        $("#Noback").hide()
    } else {
        setTimeout(HideLoadding, 800);
        hideLodding++
    }
}
function ShowLoginHeader(type) {
    loadScript(ECS.Path.ScriptPath + "jquery.base64.min.js", function () {
        var urls = window.location.href.toLowerCase();
        urls = urls.replace(window.WebSiteDomain, '');
        if (type == 1) {
            if (urls.indexOf('error/error') >= 0 || urls.length <= 1 || urls.toLowerCase().indexOf('?returnurl') >= 0 || urls.indexOf('/login') >= 0) {
                window.location.href = '/login.html';
            } else {
                var tq = $.base64.encode(escape(urls));
                window.location.href = '/login.html?returnUrl=' + tq;
            }
        } else {
            if (urls.indexOf('error/error') >= 0 || urls.indexOf('?returnurl') >= 0 || urls.indexOf('/register') >= 0) {
                window.location.href = '/register.html';
            } else {
                var tq = $.base64.encode(escape(urls));
                window.location.href = '/register.html?returnUrl=' + tq;
            }
        }
    });
}
function ShowLoginWindow() {
    this.message = "",
    this.type = 0,
    this.CallBackFunc = null,
    this.ShowLogin = function (showlogin) {
        ShowBack();
        $("#showLogin").show();
        if (this.type == 1) {
            $("#loginHtml").show();
            $("#registerHtml").hide();
            if ($("#loginHtml").html().length < 100) {
                ShowLoginHtml("/Account/ShowLogin", this.type, this.message, showlogin);
                $(document).scrollTop(0)
            } else {
                $(document).scrollTop(0);
                $("#txtLoginPwd").val("");
                $("#txtoldcode").val("");
                $("#txtLoginUid").focus();
                if (this.message != "") {
                    $("#message").html(this.message)
                } else {
                    $("#messageError").hide()
                }
            }
        } else if (this.type == 2) {
            $("#registerHtml").show();
            $("#loginHtml").hide();
            if ($("#registerHtml").html().length < 100) {
                ShowLoginHtml("/Account/ShowRegister", this.type, this.message);
                $(document).scrollTop(0)
            } else {
                $(document).scrollTop(0);
                $("#txtRegisterPwd").val("");
                $("#newtxtRegisterPwd").val("")
            }
        }
    }
}
function ShowLoginHtml(url, type, message, showlogin) {
    if (!message) {
        message = ""
    }
    $.ECS.ajax({
        type: "POST",
        url: url,
        cache: false,
        success: function (data) {
            if (AjaxValidate(data)) {
                if (type == 1) {
                    $("#loginHtml").html(data);
                    if (showlogin) {
                        $("#windowLogin").click(function () {
                            LoginOn(showlogin)
                        })
                    }
                } else {
                    $("#registerHtml").html(data)
                }
            }
        },
        error: function () {
            alert("请求失败，请重试")
        }
    })
}
function DeleteHearCartItem(sysNo, listControl, sProductID) {
    $.ECS.ajax({
        type: 'POST',
        url: '/Shopping/DeleteCart?sysNo=' + sysNo + '&type=1' + '&addProductToDeleteCookie=1',
        cache: false,
        success: function (data) {
            if (AjaxValidate(data)) {
                //$("#HeaderCartList").val("0");
                BindHearCartList(listControl, false);
                var url = window.location.href.toLowerCase();
                if (url.indexOf("cart/index") >= 0) {
                    ShowCart();
                    ShowDeletedProductInfo()
                }
            }
        }
    })
    if (sProductID != null && sProductID != "") {
        _trackData.push(['delcartitem', sysNo]);
    }
}
var HeaderRight = "";
function validateCount() {
    var intreg = /^\d+$/;
    var sSum = this.val();
    if ("0" == sSum || !intreg.test(sSum)) {
        this.val("1");
    }
}
function preLoadImg(url) {
    var img = new Image();
    img.src = url;
}
$(document).ready(function () {
    $("#menulists a").each(function () {
        if ($(this).attr("href").indexOf('%') == -1) {
            $(this).attr("href", encodeURI($(this).attr("href")));
        }
    });

    ShowHeaderLogin();
    $("#right_cart").mouseenter(getCartCount).triggerHandler("mouseenter");

    $("#local_menu").click(function () {
        showCity();
        return false;
    });
    $("#local").click(function () {
        showCity();
        return false;
    });
    $("#local").hover(function () {
        $("#local_menu").css({ "border": "1px solid #659934" });
    }, function () {
        $("#local_menu").css({ "border": "" });
    });

    $("input.validNumber").live("keyup", function () {
        validateCount.call($(this));
    });
    $("input.validNumber").live("blur", function () {
        validateCount.call($(this));
    });
    BindCategorEvent();
    setTimeout(function () {
        BindHearCartList("#cartListView", true)
    },
    800);
    $(".cartftb").mouseover(function () {
        HeaderRight = "cartListView";
        var obj = this;
        setTimeout(function () {
            if (HeaderRight == "cartListView") {
                BindHearCartList("#cartListView", false)
            }
        },
        400)
    }).mouseleave(function () {
        HeaderRight = "";
        $(this).find('dl').removeClass('carthover')
    });
    $("#addBookmark").click(function () {
        addBookmark()
    });
    $('.cartftmy').mouseover(function () {
        HeaderRight = "cartfmy";
        var obj = this;
        setTimeout(function () {
            if (HeaderRight == "cartfmy") {
                ShowMyECS();
                $(obj).find('dl').addClass('carthover')
            }
        },
        400)
    }).mouseleave(function () {
        HeaderRight = "";
        $(this).find('dl').removeClass('carthover')
    });
    $("#ProductCategory").mouseover(function () {
        var list = $("#CategoryList").html();
        if ($("#CategoryListIsback").val() != "0" && list.length > 50) {
            $(".item").find('div').removeClass("hover");
            return false
        }
        ShowCategoryList("#CategoryList", '0', "");
        $("#CategoryListIsback").val("1")
    });
    $('.allsortth').mousemove(function () {
        $(this).find('.allsortthin').addClass('thhover')
    });
    $('.allsortth').mouseleave(function () {
        $(this).find('.allsortthin').removeClass('thhover')
    });
    $("#listSum").delegate('.listsum-1', "click",
    function (e) {
        if (e.target != "javascript:;") {
            var className = $(this).find('dl').attr("class");
            if (className == "listhover") {
                $(this).find('dl').removeClass("listhover")
            } else {
                $(this).find('dl').addClass('listhover').end().siblings().find("dl").removeClass("listhover")
            }
        }
    });
    $("#categoryListSum").delegate("dt p", "click",
    function (e) {
        var on = $(this).hasClass("on_b");
        $("#categoryListSum").find("dt p").removeClass("on_b");
        $("#categoryListSum").find("dd").hide();
        if (!on) {
            $(this).addClass("on_b");
            $(this).parent("dt").siblings("dd").show();
        }
    });
    $('.setredwarp').click(function () {
        $(this).find('.setredmw').addClass('setredhover')
    });


    //$("#two_code").bind("click", function () {
    //    $("#twocodeParent").toggle();
    //});
    //$("#two_code").bind("touchend", function () {
    //    $("#twocodeParent").toggle();
    //    return false;
    //});
    //$("#twocodeParent").bind("click", function () {
    //    $("#twocodeParent").hide();
    //});


  

    $(".pags").delegate("a", "click",
    function () {
        $(this).unbind("click");
        $(this).removeAttr("onclick")
    }).delegate("button", "click",
    function () {
        $(this).unbind("click");
        $(this).removeAttr("onclick")
    });
});
function BindHearCartList(listControl, load) {
    var curWebSiteSysNo = window.Cookies("WebSiteSysNo").val();
    if (!$(listControl).html())
        return false;
    var Cartcookie = window.Cookies("ECScartchange" + curWebSiteSysNo).val();
    if (Cartcookie == "" && load == true) {
        //$("#cartLink").html("购物车<span id=\"carListCounts\">0</span>件");
        $("#digital").html(0);
        return
    }
    if ($(listControl).html() == "" || $(listControl).html().length < 249 || ECS.Model.Cart != Cartcookie) {
        ECS.Model.Cart = Cartcookie;
        var url = window.location.href.toLowerCase();
        if (url.indexOf("order.html") >= 0) {
            if (Cartcookie == "") {
                window.location.href = "/cart.html";
                return
            }
        }
        //if (url.indexOf('/cart.html') >= 0)
        //    return;
        $.ajax({
            type: "POST",
            //url: "/Shopping/GetHeaderCartList?" + Math.random() * 10000,
            url: "/cart/GetCarts?" + Math.random() * 10000,
            cache: false,
            success: function (data) {
                RightCarUpdate(data);
                //if (AjaxValidate(data)) {
                //    if (data != null) {
                //        $(listControl).html(data);
                //        BindButtonCss("btnGotoCart", "butn5_2", "butn5")
                //    } else {
                //        $(listControl).empty();
                //        $(listControl).html("")
                //    }
                //    lazyLoad.Run()
                //}
                if (load == false) {
                    $(".cartftb").find('dl').addClass('carthover')
                }
            },
            error: function (e) {
                $(listControl).html("加载购物车信息失败");
                if (load == false) {
                    $(".cartftb").find('dl').addClass('carthover')
                }
            }
        })
    } else {
        //$("#cartLink").html("购物车<span id=\"carListCounts\">0</span>件");
        $("#digital").html(0);
        if (load == false) {
            $(".cartftb").find('dl').addClass('carthover')
        }
        if (!$(listControl).html()) {

        }
    }
}
function RightCarUpdate(data) {
    if (data != null && data != undefined) {
        ECS.Model.CartDatas = data;
        $.ECS.tmpl({ dom: $('#cartListView'), v: $('#headercarttemp').val(), datas: data });
        var count = data.AllCount;
        $("#right_cart").toggleClass("cart_focus", !(count == 0));
        count = count < 1000 ? count : 999;
        $("#right_cart").html(count);
        $("#digital").html(count);
        if (data.Car.length > 5) {
            $("#cartlistshow").css({ "height": "400px", "overflow-y": "auto" });
        }
    }
}
function BindButtonCss(id, mouseoverCss, mouseoutCss) {
    $("#" + id).mouseover(function () {
        $(this).removeClass(mouseoutCss).addClass(mouseoverCss)
    });
    $("#" + id).mouseout(function () {
        $(this).removeClass(mouseoverCss).addClass(mouseoutCss)
    })
}
var cart_timeout = null;
function ShowCartMessage(result) {
    if (!result || result.length <= 0)
        return;
    var template_success = '<li><div class="pic"><img src={image} /></div><div class="name">{name}<br /><span>X {count} 加入成功</span></div><div class="price">￥{price}</div></li>';
    var template_fail = '<li><div class="pic"><img src={image} /></div><div class="name">{name}<br /><span>{message}</span></div><div class="buy_ico"><img src="/content/images/cart/cart_pop03.gif" width="30" height="30"></div></li>';
    var map_item = function (item) {
        var item_html = "";
        if (item.status == 1) {
            item_html = $.ECS.replace(template_success, item);
        } else if (item.status == 0) {
            item_html = $.ECS.replace(template_fail, item);
        }
        return item_html;
    }

    var cart_items = [];
    for (var i = result.length - 1; i >= 0; i--) {
        if (result[i].status >= 0) {
            var item_html = map_item(result[i]);
            cart_items.push(item_html);
        } else {
            if (result[i].message.indexOf("手机专享商品") >= 0) {
                alert("手机专享商品，扫一扫下载客户端立即购买~");
                $("#ErrorShow").find("td").eq(0).html('<img width="150px" src="http://image.ECSlife.com/content/images/top/App_QR_Code.png" />');
                return;
            }
            alert(result[i].message);
            if (result[i].message.indexOf("登录") >= 0) {
                $("#closeAlertSp").unbind("click").click(function () {
                    ShowLoginHeader(1);
                });
            }
            return;
        }
    }
    $("#item_added").html(cart_items.join(""));

    $("#item_added").find("li").last().addClass("b0");

    $("#twocodeParent").hide();
    clearTimeout(cart_timeout);
    $(".pop_cart").css("right", "-248px");

    $("#right_cart").toggleClass("cart_on", true);
    $(".pop_cart").show().stop(true, true).animate({ "right": "52px" }, 500);

    cart_timeout = setTimeout(function () {
        $(".pop_cart").hide();
        $("#right_cart").removeClass("cart_on", true);
    }, 3000);
}

var cartamt = 0.0;
function AddCartList(SysNoList, ECSSource) {
    $.ECS.ajax({
        type: 'POST',
        url: '/Cart/NewAddShoppingcart?productSysNo=' + SysNoList + '&count=1&type=add',
        cache: false,
        success: function (result) {
            if (result.RedirectUrl) {
                window.location.href = result.RedirectUrl;
            } else {
                //$("#HeaderCartList").val("0");
                RightCarUpdate(result);
                ShowCartMessage(result.Add);
                if (ECSSource) {
                    for (var i = 0; i < result.Add.length; i++) {
                        var cartItem = result.Add[i];
                        _paq.push(['addEcommerceItem', cartItem.sysno + "", cartItem.name, AppenumCartSource[ECSSource], parseFloat(cartItem.currentPrice), parseInt(cartItem.allcartcount)]);
                        cartamt += parseInt(cartItem.allcartcount) * parseFloat(cartItem.currentPrice);
                    }
                    _paq.push(['trackEcommerceCartUpdate', cartamt]);
                }
            }
        },
        error: function (e) {
            alert("加入购物车失败，请重试")
        }
    })
}
function AddSaleRule(saleRuleSysNo, nullSysNo) {
    $.ECS.ajax({
        type: "POST",
        //url: "/Shopping/AddShoppingSaleRule",
        url: "/Cart/AddShoppingSaleRule",
        cache: false,
        data: {
            "saleRuleSysNo": saleRuleSysNo,
            "nullSysNo": nullSysNo
        },
        success: function (result) {
            if (result.RedirectUrl) {
                window.location.href = result.RedirectUrl;
            } else if (result.message) {
                alert(result.message);
            } else {
                //$("#HeaderCartList").val("0");
                //BindHearCartList("#cartListView");
                RightCarUpdate(result);
                ShowCartMessage(result.Add);
            }
        },
        error: function () {
            alert("添加失败，请重试")
        }
    })
}
var _paq = _paq || [];
function AddProductToCart(sysNo, count, source) {
    count = count || 1;
    source = source || "0000";
    $.ECS.ajax({
        type: 'POST',
        url: '/Cart/NewAddShoppingcart?productSysNo=' + sysNo + '&count=' + count + '&type=add',
        cache: false,
        success: function (result) {
            if (result.RedirectUrl) {
                window.location.href = result.RedirectUrl;
            } else {
                //$("#HeaderCartList").val("0");
                RightCarUpdate(result);
                ShowCartMessage(result.Add);
            }
            if (result.Add[0].status == 1) {
                _paq.push(['addEcommerceItem', sysNo.toString(), sysNo.toString(), AppenumCartSource[source], parseFloat(result.Add[0].currentPrice), parseInt(result.Add[0].allcartcount)]);
                _paq.push(['trackEcommerceCartUpdate', parseFloat(result.Add[0].price)]);
            }
        },
        error: function () {
            alert("请求失败，请重试");
        }
    })
}
function LoadCallCenter() {
    window.open("http://chat.53kf.com/webCompany.php?arg=ECScom&style=1");
}
function AjaxValidate(data) {
    if (data) {
        if (data == "您输入或提交的信息中包含html标记或单引号等，请重新输入") {
            window.location.href = "/Error/Error?id=1003&msg=" + encodeURIComponent(data);
            return false
        }
        if (data == "request error") {
            alert(data);
            return false
        }
        if (data && data.RedirectUrl) {
            window.location.href = data.RedirectUrl
        }
    }
    return true
}
function bfd_show_banner(datas, req_id, type, isAsync, ECSSource) {

    var id = "";
    var title = "热销榜";
    var htmlId = "#hotProduct_baifendian";
    var url = window.location.href.toLowerCase();
    var async_y = true;
    if (isAsync != null) {
        async_y = false
    }
    url = url.replace("http://", "");
    if (type == "rec_vav" && url.indexOf("details") >= 0) {
        title = "看过该商品的还看过"
    } else if (type == "rec_bab") {
        title = "买过该商品的还买过";
        id = "1"
    } else if (type == "rec_fbt") {
        title = "搭配购买"
    } else if (type == "rec_search") {
        id = "search";
        if ($("#isSearchCount").val() != "False") {
            return
        }
    } else if (type == "rec_sc") {
        htmlId = "#tabdiv1ul"
    } else if (type == "rec_member") {
        htmlId = "#tabdiv4";
        var urlist = url.split("/");
        if (urlist.length == 3) {
            if (urlist[2] != "index") {
                return
            }
        }
    } else if (type == "rec_vav") {
        title = "看过该商品的还看过"
    }

    var loaded = false;
    if ($("#ECSbaifendianval").val() != "0") {
        var el = $(htmlId + id);
        if (datas && datas.length && el.length) {
            if (type != "rec_fbt") {
                $(window).bind("scroll resize", function () {
                    if (loaded) return;
                    if (lazyLoad.IsShow(el)) {
                        loaded = true;
                        $.ajax({
                            type: "post",
                            url: "/Products/GetBFDProductInfo",
                            data: {
                                "sysNoList": datas.join(",")
                            },
                            cache: false,
                            async: async_y,
                            success: function (data) {
                                if (AjaxValidate(data)) {
                                    if (data == "request error") {
                                        return
                                    }
                                    if (!data || data.length <= 0 || typeof (data) != 'object') {
                                        return
                                    }
                                    if (data[0] == null) {
                                        return;
                                    }

                                    data["key"] = req_id;
                                    data["title"] = title;
                                    data["ID"] = id;
                                    $.tmpl({ dom: el, v: $("#hotproudctTemplate").val(), datas: data });
                                    if (type == "rec_search") {
                                        el.show();
                                    }
                                    if (type == "rec_sc") {
                                        $("#divtabdiv1").show();
                                    }
                                    lazyLoad.Run();
                                }
                            }
                        })
                    }
                }).triggerHandler("scroll");
            } else {
                if ($("#SaleRuleCount").val() == "0" && $("#VisType").val() != "1") {
                    $("#SaleRuleCount").val("1");
                    $.ajax({
                        type: "get",
                        url: "/Products/GetProductList",
                        data: {
                            "sysNoList": encodeURIComponent(datas.join(","))
                        },
                        cache: true,
                        async: async_y,
                        success: function (data) {
                            if (AjaxValidate(data)) {
                                if (data == "request error") {
                                    return
                                }
                                if (!data || data.length <= 0) {
                                    return
                                }
                                $("#SaleRuleList").setTemplate($("#SaleRuleTemplate").val(), null, {
                                    filter_data: false
                                });
                                $("#SaleRuleList").setParam("price", $("#currentPrice").val());
                                $("#SaleRuleList").setParam("ToPrice", ToPrice);
                                $("#SaleRuleList").setParam("BasicPrice", $("#BasicPrice").val());
                                $("#SaleRuleList").setParam("AddPrice", AddPrice);
                                $("#SaleRuleList").setParam("key", req_id);
                                if (!ECSSource) {
                                    ECSSource = "1051"
                                }
                                $("#SaleRuleList").setParam("source", ECSSource);
                                $("#SaleRuleList").processTemplate(data);
                                $("#SaleRuleList").show();
                                $("#SaleRulelistBlank").show();
                                if (ECSSource != "1051") {
                                    $("#BFDLogDiv").hide()
                                }

                                lazyLoad.Run();
                                //if (data.length > 4) {
                                //    $("#SaleRulePList").css("overflow-x", "scroll")
                                //}
                                ChangeResult(1)
                            } else {
                                $("#SaleRuleList").hide();
                                $("#SaleRulelistBlank").hide()
                            }
                        }
                    })
                }
            }
        }
    }
}
function AddPrice(price1, price2) {
    return parseFloat(price1) + parseFloat(price2)
}
function ToPrice(price) {
    var a = price;
    if (a) {
        var priceList = a.split(".");
        if (priceList.length == 2) {
            var length = priceList[1].length;
            if (length > 2) {
                price = priceList[0] + "." + priceList[1].substring(0, 2)
            } else {
                if (length == 1) {
                    price = priceList[0] + "." + priceList[1] + "0"
                }
            }
        } else {
            price += ".00"
        }
    } else {
        price = "0.00"
    }
    return price
}
function LoadCss(url) {
    var link = document.createElement("link");
    link.type = "text/css";
    link.rel = "stylesheet";
    link.href = url;
    document.getElementsByTagName("head")[0].appendChild(link)
}
function ShowHeaderLogin() {
    var a = Math.random() * 1000;
    $.ajax({
        type: "post",
        url: "/Account/LoginStatus",
        cache: false,
        dataType: "json",
        success: function (msg) {
            if (AjaxValidate(msg)) {
                if (msg.nickName == "") {
                    if (msg.userNameInCookies == "") {
                        //$("#welcome_login").html("您好，欢迎来到富连网！&nbsp;&nbsp;[<a href=\"javascript:ShowLoginHeader(1)\" class=\"login\">登录</a>] [<a href=\"javascript:ShowLoginHeader(2)\" class=\"login\">注册</a>] [<a href='/Account/ExclusiveEntrance' class=\"login\">机构会员</a>]");
                        $("#welcome_login").html("您好，欢迎来到富连网！&nbsp;&nbsp;<a href=\"javascript:ShowLoginHeader(1)\" class=\"word01\">登录</a>丨<a href=\"javascript:ShowLoginHeader(2)\">注册</a>");
                    } else {
                        if ("" == msg.rankName) {
                            //$("#welcome_login").html("您好，<a href=\"javascript:ShowLoginHeader(1);\">" + msg.userNameInCookies + "</a>，欢迎来到富连网！[<a href=\"javascript:ShowLoginHeader(1)\" class=\"login\">登录</a>] [<a href=\"javascript:ShowLoginHeader(2)\" class=\"login\">注册</a>] [<a href='/Account/ExclusiveEntrance' class=\"login\">机构会员</a>]");
                            //$("#welcome_login").html("您好，<a href=\"javascript:ShowLoginHeader(1);\">" + msg.userNameInCookies + "</a>，欢迎来到富连网！<a href=\"javascript:ShowLoginHeader(1)\" class=\"word01\">登录</a>丨<a href=\"javascript:ShowLoginHeader(2)\">注册</a>");
                            $("#welcome_login").html("您好，欢迎来到富连网！<a href=\"javascript:ShowLoginHeader(1)\" class=\"word01\">登录</a>丨<a href=\"javascript:ShowLoginHeader(2)\">注册</a>");
                        } else {
                            //$("#welcome_login").html("您好，<a href='/help-22.html'>" + msg.rankName + "</a><a href=\"javascript:ShowLoginHeader(1);\">" + msg.userNameInCookies + "</a>，欢迎来到富连网！[<a href=\"javascript:ShowLoginHeader(1)\" class=\"login\">登录</a>] [<a href=\"javascript:ShowLoginHeader(2)\" class=\"login\">注册</a>] [<a href='/Account/ExclusiveEntrance' class=\"login\">机构会员</a>]");
                            //$("#welcome_login").html("您好，<a href='/help-22.html'>" + msg.rankName + "</a><a href=\"javascript:ShowLoginHeader(1);\">" + msg.userNameInCookies + "</a>，欢迎来到富连网！<a href=\"javascript:ShowLoginHeader(1)\" class=\"word01\">登录</a>丨<a href=\"javascript:ShowLoginHeader(2)\">注册</a>");
                            $("#welcome_login").html("您好，欢迎来到富连网！<a href=\"javascript:ShowLoginHeader(1)\" class=\"word01\">登录</a>丨<a href=\"javascript:ShowLoginHeader(2)\">注册</a>");
                        }
                    }
                    $("#dtIsNoLogin").addClass("nogoods")
                } else {
                    if ("" == msg.rankName) {
                        $("#welcome_login").html("您好，<a href='/UserHome/Index'>" + msg.nickName + "</a>，欢迎来到富连网！&nbsp;&nbsp;[<a href='/myorder.html' target=\"_blank\">我的订单</a>] [<a href='/Account/LogOut?time=" + a + "'>退出</a>]");
                    } else {
                        $("#welcome_login").html("您好，<a href='/help-22.html'>" + msg.rankName + "</a><a href='/UserHome/Index'>" + msg.nickName + "</a>，欢迎来到富连网！&nbsp;&nbsp;[<a href='/myorder.html' target=\"_blank\">我的订单</a>] [<a href='/Account/LogOut?time=" + a + "'>退出</a>]");
                    }
                    $("#MyUserHome").show();
                    $("#UserId").val(msg.UserId);
                    $("#dtIsNoLogin").removeClass("nogoods");
                    $("#UserLogin").val("1");
                    myECSlock = '0';
                }

                var url = "http://m.flnet.com";
                if (location.pathname.indexOf("/item-") != -1) {
                    var id = location.pathname.replace("/item-", "").split('.')[0];
                    url = url + "/product/detail.htm?" + "productSysNo=" + id ;
                }
				if (msg.customerId)
					url += (url.indexOf('?') == -1 ? '?' : '&') + "GTYID=" + (msg.customerId || '');

                $("#qrcode_share").attr("src", "/qrcode/index?content=" + escape(url));
                //if ($("#local_menu").length) {
                //    msg.delivery.match(/恩施|湘西/) && (msg.delivery = msg.delivery.substring(0, 2));
                //    local_menu_class = msg.delivery.length <= 2 ? "local_menu" : "local_menu" + msg.delivery.length;
                //    $("#local_menu").removeClass().addClass(local_menu_class);
                //    $('#deliveryName').html(msg.delivery);

                //    $("#welcome_login").html($("#welcome_login").html() + ' [<a href="javascript:;" onclick="showCity();" class="login">切换城市</a>]');
                //}

                ////jxs add 2014-12-10 判断是否需要强制切站
                //switch (msg.isSwitchSiteNo) {
                //    case 1://弹窗
                //        var t = setInterval(function () {
                //            if ($("#city_recommended").find("[city-recommended]").length) {
                //                clearInterval(t);
                //                showCity();
                //                $("#hide_city").css("display", "none");
                //            }
                //        }, 100);
                //        break;
                //    default:
                //        break;

                //}

                //if (msg.isSwitchSite) {
                //    showCity();
                //    $("#hide_city").css("display", "none");
                //}
            }
        },
        error: function () {
            //$("#welcome_login").html("您好，欢迎来到富连网！&nbsp;&nbsp;[<a href=\"javascript:ShowLoginHeader(1)\" class=\"login\">登录</a>] [<a href=\"javascript:ShowLoginHeader(2)\" class=\"login\">注册</a>]");
            //$("#isNoLogin").addClass("nogoods")
        }
    })
}
function xvoid(xvoidtmp) { }
var myECSlock = "0";
function ShowMyECS() {
    if ($("#UserLogin").val() == "1" && $("#IsLoad_Header").val() == "0" && myECSlock == "0") {
        if (!$('#dtIsNoLogin').html())
            return false;
        myECSlock = "1";
        $.ajax({
            type: "post",
            url: "/Asyncs/MyECSStatus",
            cache: false,
            dataType: "json",
            success: function (msg) {
                if (AjaxValidate(msg)) {
                    if (msg.loginStatus == "F") {
                        $("#my_loginBtn").show();
                        $("#gotouhome").hide();
                        $("#dtIsNoLogin").addClass("nogoods");
                        $("#my_nickname").html("您好，请登录");
                        myECSlock = "0"
                    } else if (msg.loginStatus == "T") {
                        $("#un_judge").html(msg.un_judge);
                        $("#un_order").html(msg.un_order);
                        $("#un_pay").html("(" + msg.un_pay + ")");
                        if (msg.un_pay != "0") {
                            $("#unpay_a").addClass("on");
                            $("#miniTip").html(msg.un_pay);
                            $("#miniTip").show()
                        }
                        $("#my_quan").html(msg.user_quan);
                        $("#my_nickname").html("您好，" + msg.nickname);
                        $("#IsLoad_Header").val("1");
                        myECSlock = "0";
                        $("#my_loginBtn").hide();
                        $("#gotouhome").show();
                        $("#dtIsNoLogin").removeClass("nogoods")
                    }
                }
            },
            error: function () {
                $("#welcome_login").html("您好，欢迎来到富连网！&nbsp;&nbsp;[<a href=\"javascript:ShowLoginHeader(1)\" class=\"login\">登录</a>] [<a href=\"javascript:ShowLoginHeader(2)\" class=\"login\">注册</a>] [<a href='/Account/ExclusiveEntrance' class=\"login\">机构会员</a>]");
                $("#my_loginBtn").show();
                $("#gotouhome").hide();
                $("#dtIsNoLogin").addClass("nogoods");
                $("#my_nickname").html("您好，请登录");
                myECSlock = "0"
            }
        })
    } else if ($("#UserLogin").val() == "0" && $("#IsLoad_Header").val() == "1") {
        $("#dtIsNoLogin").addClass("nogoods");
        $("#my_nickname").html("您好，请登录");
        $("#my_loginBtn").show()
    } else if ($("#UserLogin").val() == "0") {
        $("#dtIsNoLogin").addClass("nogoods");
        $("#my_nickname").html("您好，请登录");
        $("#my_loginBtn").show()
    }
}
function ValidateNum(id, count, page) {
    var key = $(id).val();
    if (!/^[0-9]+$/.test(key)) {
        if (key != 0) {
            $(id).val((page > count ? 1 : page));
            return false
        }
    }
    if (parseInt(key) > count) {
        $(id).val(1);
        return false
    }
    if (parseInt(key) < 1) {
        $(id).val(1);
        return false
    }
}
function BindCategorEvent() {
    $('#categoryList').delegate("li", "mousemove",
    function (e) {
        var height = $(this).offset().top;
        var index = $(this).index();
        if ($(this).find('div').hasClass("hover") == true) {
            return
        }
        $(this).find('div').addClass('hover').siblings().removeClass("hover");
        var list_top = (index + 1) * 34 + 8;
        var content_height = $(this).find(".i-mc").height();
        if (list_top > content_height) {
            $(this).find(".i-mc").css("top", list_top + 34 - content_height - 1);
        }
        return false;
    }).delegate("li", "mouseleave",
    function (event) {
        $(this).find('div').removeClass("hover");
    })
}
function Redirect() {
    var url = window.location.href.toLowerCase();
    if (url.indexOf("/shopping") >= 0) {
        CloseAlter();
        return
    } else {
        window.location.href = "/cart.html"
    }
}
function ToBaifendian() {
    window.open('http://www.baifendian.com/')
}
function goShoppingFromCheck(type) {
    window.location.href = '/cart.html';
}
function payGiftCard(id, type, obj) {
    var num = 0;
    if (typeof obj == 'object') {
        var a = obj.val();
        if (!Number(a)) {
            alert("请填写要购买的数量");
            return false
        }
        if (a == 0) {
            alert("购买数量必须大于零");
            return false
        }
        num = a
    } else {
        num = obj
    }
    window.location.href = '/giftcard/Index?gifttype=' + id + '&num=' + num + '&type=' + type;
}
function GetSimilarItem(SysNoList) {
    $.ajax({
        type: 'POST',
        url: '/Shopping/GetSimilarItem?productSysNoList=' + SysNoList,
        cache: false,
        success: function (result) {
            ShowLackMessage(result);
        },
        error: function (e) {
            alert("请求失败，请重试");
        }
    })
}
function ShowLackMessage(result) {
    $("#title").html("- 库存不足 -");

    var error = "";
    error += "<img src=\"/content/images/pop_sigh.gif\" width=\"49\" height=\"49\" />";
    error += "<p class=\"orange\">" + result.productname + "</p>";
    error += "<p class=\"text\">库存不足！请挑选其他商品。</p>";
    $("#ErrorShow").html(error);

    var clearingmsg = "";
    clearingmsg += "<div class=\"back\">&nbsp;</div>";
    clearingmsg += "<div class=\"buy\"><a class=\"pop_btn\" style=\"cursor:pointer\" ";
    var productSysNoList = "";
    productSysNoList = result.msg;
    clearingmsg += "onclick=\"BackToCart('" + productSysNoList + "')\"><span>返回购物车</span></a></div>";
    $("#clearing").html(clearingmsg);

    var gray = "";
    var indexset = GetRandom(result.hotitems, 4);
    if (indexset.length > 0) {
        gray += "<div class=\"hot\"><ul class=\"tit\">类似商品:</ul><ul>";
        var i;
        for (var j = 0; j < indexset.length; j++) {
            i = indexset[j];
            gray += "<li><a href=\"" + result.hotitems[i].link + "\" target=\"_blank\" title=\"" + result.hotitems[i].name + "\"><img src=" + result.hotitems[i].image + " /></a>";
            gray += "<div class=\"name\"><a href=\"" + result.hotitems[i].link + "\" target=\"_blank\" title=\"" + result.hotitems[i].name + "\">" + result.hotitems[i].name + "</a></div>";
            gray += "<div class=\"price\">" + result.hotitems[i].price + "</div></li>";
        }
        gray += "</ul></div>";
    }
    $("#gray").html(gray);
    $("#gray li").hover(function () {
        $(this).addClass("bd_all");
        $(this).children(".name").addClass("bd_t");
        $(this).children(".price").addClass("bg");
    }, function () {
        $(this).removeClass("bd_all");
        $(this).children(".name").removeClass("bd_t");
        $(this).children(".price").removeClass("bg");
    });
    $("#gray li").last().addClass("m0");
    $("#showError").show();
    ShowBack();
    $("#closeAlertSp").attr('onclick', '').click(function () {
        BackToCart(productSysNoList);
    });
}
function BackToCart(productSysNoList) {
    var productSysNos = productSysNoList.split(',');
    for (var i = 0; i < productSysNos.length; i++) {
        var productSysNo = productSysNos[i];
        $.ajax({
            type: 'POST',
            async: false,
            url: '/Shopping/GetInventory?productSysNo=' + productSysNo,
            cache: false,
            success: function (count) {
                $.ajax({
                    type: 'POST',
                    async: false,
                    url: '/Cart/NewAddShoppingcart?productSysNo=' + productSysNo + '&count=' + count + '&type=update',
                    cache: false
                })
            }
        });
    }
    if (window.location.pathname == "/cart.html") {
        $("#HeaderCartList").val("0");
        BindHearCartList("#cartListView");
        ShowCart();
        CloseAlter();
    } else {
        window.location.href = "/cart.html";
    }
}

function ShowSiteMessage(result, webSiteSysNo, deliverySysNo) {
    $("#title").html("- 提示 -");
    var error = "";
    error += "<img src=\"/content/images/pop_sigh.gif\" width=\"49\" height=\"49\" />";
    error += "<p class=\"orange\">" + result + "</p>";
    $("#ErrorShow").html(error);

    $("#clearing").html("");

    var gray = "";
    gray += "<div class=\"btn\">";
    gray += "<a class=\"pop_btn\" onclick=\"switchCurSite(" + webSiteSysNo + ", " + deliverySysNo + ")\" style=\"cursor:pointer\"><span>&nbsp;&nbsp;确定&nbsp;&nbsp;</span></a>&nbsp;&nbsp;"
    gray += "<a class=\"pop_btn\" onclick=\"CloseAlter()\" style=\"cursor:pointer\"><span>&nbsp;&nbsp;取消&nbsp;&nbsp;</span></a></div>"

    $("#gray").html(gray);
    $("#showError").show();
    ShowBack();
    timeclose = -2;
    SettimeCloseAlter();
}

function switchCurSite(webSiteSysNo, deliverySysNo) {
    var curCity = window.Cookies("city").val();
    var city = $("#pop_city").data("city");
    if (city && (city != curCity)) {
        $.ECS.ajax({
            type: 'POST',
            notvalidate: true,
            url: '/Account/SetCookie?key=city&value=' + city,
            cache: false,
            async: false,
            success: function () {

            }
        });
    }
    $.ECS.ajax({
        type: 'POST',
        notvalidate: true,
        url: '/Account/SwitchSite?websiteSysNo=' + webSiteSysNo + '&deliverySysNo=' + deliverySysNo,
        cache: false,
        success: function (result) {
            //if (result.toLowerCase() == "ok") {
            //    var href = window.location.href.replace(/#+.*$/, "").toLowerCase();
            //    if (href.indexOf("ECScps=") >= 0 || href.indexOf("site=") >= 0) {
            //        href = href.split("?")[0];
            //    }

            //    if ((deliverySysNo == 84 || deliverySysNo == 85 || deliverySysNo == 86) && window.location.pathname == "/") {
            //        window.location.href = "/PChannel/ShenYang";
            //    } else if ((deliverySysNo == 84 || deliverySysNo == 85 || deliverySysNo == 86) && window.location.pathname.toLowerCase() == "/pchannel/shenyang") {
            //        window.location.href = href;
            //    } else if (window.location.pathname.toLowerCase() == "/pchannel/shenyang") {
            //            window.location.href = "/";
            //    } 
            //     else {
            //        window.location.href = href;
            //    }
            //} else {
            //    window.location.href = result;
            //}
            var resultArray = result.split('^');
            if (resultArray[0].toLowerCase() == "ok") {
                var href = resultArray[1].replace(/#+.*$/, "");
                var hrefLower = href.toLowerCase();
                if (hrefLower.indexOf("ECScps=") >= 0 || hrefLower.indexOf("bsite=") >= 0) {
                    href = href.split("?")[0];
                }

                if ((deliverySysNo == 84 || deliverySysNo == 85 || deliverySysNo == 86) &&
                    (window.location.pathname == "/" || window.location.pathname.toLowerCase() == "/huadong" || window.location.pathname.toLowerCase() == "/huanan" ||
                    window.location.pathname.toLowerCase() == "/huadong/" || window.location.pathname.toLowerCase() == "/huanan/")) {
                    window.location.href = getLocationHref("/PChannel/ShenYang");
                } else if ((deliverySysNo == 84 || deliverySysNo == 85 || deliverySysNo == 86) && window.location.pathname.toLowerCase() == "/pchannel/shenyang") {
                    window.location.href = getLocationHref(href);
                } else if (window.location.pathname.toLowerCase() == "/pchannel/shenyang") {
                    window.location.href = getLocationHref("/");
                }
                else {
                    window.location.href = href;
                }
            } else {
                href = resultArray[0];
                window.location.href = href;
            }
        }
    });
}

function getCartCount() {
    if (!$('#cartListView').html()) {
        var curWebSiteSysNo = window.Cookies("WebSiteSysNo").val();
        var Cartcookie = window.Cookies("ECScartchange" + curWebSiteSysNo).val();
        if (ECS.Model.RightCart != Cartcookie)
            ECS.Model.RightCart = Cartcookie;
        else {
            return;
        }
        $.ECS.ajax({
            type: 'POST',
            url: '/Shopping/GetCartCount',
            notvalidate: true,
            cache: false,
            success: function (count) {
                $("#right_cart").toggleClass("cart_focus", !(count == 0));
                count = count < 1000 ? count : 999;
                $("#right_cart").html(count);
                $("#digital").html(count);
            }
        });
    }
    else {
        BindHearCartList("#cartListView", true)
    }

}

$(function () {

    $('#headerView').CreateController({
        events: {
            '[ECS-id=searchkeyword] click': 'click',
            '[ECS-id=searchkeyword] focus': 'focus',
            '[ECS-id=searchkeyword] blur': 'blur',
            '.logonew a click': "logo",
            '.word2 click': "ShonYe",
            '[ECS-id=searchkeyword] keydown': 'search',
            '[ECS-id=searchkeyword] keyup': 'keyup',
            '#btnsearch click': 'search',
            '#searchs li mouseover': 'mouseover',
            '.search_n mouseleave': 'mouseleave',
        },
        click: function (t, event) {
            this.focus.apply(this, arguments)
        },
        logo: function () {
            //url结构化 jxs 2015-1-7 去除该逻辑
            //var curCity = window.Cookies("DeliverySysNo").val();
            //if (curCity == 84 || curCity == 85 || curCity == 86) {
            //    $(".logonew a").attr("href", getLocationHref("/PChannel/ShenYang"));
            //}
        },
        ShonYe: function () {
            //url结构化 jxs 2015-1-7 去除该逻辑
            //var curCity = window.Cookies("DeliverySysNo").val();
            //if (curCity == 84 || curCity == 85 || curCity == 86) {
            //    $(".word2").attr("href", getLocationHref("/PChannel/ShenYang"));
            //}
        },
        focus: function (t, event) {
            var $t = $(t);
            $t.css('color', '#000');
            if ($t.val() == ECS.Model.SearchKey) {
                $t.val("");
            } else {
                if ($t.val()) {

                    if (this.searchList && (this.searchList.find('[ECS-id=categoryOnlineSpacil]').find('div').size() > 0 || this.searchList.find('li').size() > 0))
                        this.searchList.show()
                    else {
                        this.keyup.apply(this, arguments)
                    }
                }
            }
            $("#J_search_results").removeClass("hide");
            if ($("#J_search_results").data('init') == undefined) {
                var searchHistory = _getCookie("SearchHistory");
                if (searchHistory != null && searchHistory.length>0) {
                    var arr = searchHistory.split('|');
                    var html = ["<ul>"];
                    var url = '';
                    for (var i = 0; i < arr.length; i++) {
                        var str = arr[i].split(',');
                        if (str.length == 2) {
                            url = str[1];
                        } else {
                            url = '/products/search?keyword=' + encodeURIComponent(str[0]) + '&sType=Search';
                        }
                        html.push($.ECS.format('<li><a href="{0}">{1}</a></li>', url, str[0]));
                    }
                    html.push('</ul>');
                    $(".his-list").html(html.join('')).show();
                    $(".his-empty").hide();
                } else {
                    $(".his-list").hide();
                    $(".his-empty").show();
                }
                $("#J_search_results").data('init',true);
            }
        },
        blur: function (t, event) {
           // $("#J_search_results").addClass("hide");
        },
        search: function (t, event) {
            var k = 0;
            if (window.event) {
                k = window.event.keyCode;
            } else {
                k = event.which;
            }
            var target = event.srcElement || event.target;
            if ((event.type == 'click' && target.id == 'btnsearch') || (k == 13 && target.id == 'searchkeyword')) {
                var v = $.trim(this.searchkeyword.val());
                if (!v || v === ECS.Model.SearchKey) {
                    this.searchkeyword.val("").focus();
                    return false
                }
                if (v.length > 50) {
                    G.util.alert({
                        msg: '关键字太长，请重新输入',
                        status: -1
                    });
                    return false
                }
                v = v.replace(new RegExp(/(\$|<|>|'|\*|'|&|%|\?)/g), '');
                if (!v) {
                    G.util.alert({
                        msg: '关键字中包含特殊字符“<>*?&%等”，请重新输入',
                        status: -1
                    });
                    return false
                }
                _paq.push(["trackSiteSearch", v.toString(), AppenumCartSource["1010"], 1]);
                var defvalue = this.searchkeyword.attr('data-defvalue');
                var url = '/products/search?keyword=' + encodeURIComponent(v) + '&sType=Search';
                var dataurl = '';
                if (defvalue && v == defvalue) {
                    url = this.searchkeyword.attr('data-url');
                    dataurl = "," + url;
                } 
                var searchHistory = _getCookie("SearchHistory");
                if (searchHistory) {
                    var isFound = false;
                    var arr = searchHistory.split('|');
                    for (var i = 0; i < arr.length; i++) {
                        var str = arr[i].split(',');
                        if (str[0] == v) {
                            isFound = true;
                            break;
                        }
                    }
                    if (!isFound) {
                        arr.push(v + dataurl);
                        arr = arr.length > 6 ? arr.slice(arr.length - 6) : arr;
                        arr.reverse();
                        _setCookie("SearchHistory",arr.join('|'));
                    }
                } else {
                    searchHistory = v + dataurl;
                    _setCookie("SearchHistory",searchHistory);
                }
                if (dataurl) {
                    var link = $("<a>").attr({ 'href': url, 'target': '_blank' });
                    link[0].click();
                    return;
                }
                window.location.href = getLocationHref(url); return false;
            }
        },
        keyup: function (t, event) {
            var keycode = event.keyCode || event.which, len = this.searchList && this.searchList.find('li').size(), that = this;
            var v = $(t).val();


            if (keycode == 37 || keycode == 39 || keycode == 46 || !v) {
                if (!v) {
                    this.searchList && this.searchList.hide();
                }
                return
            } else if (keycode == 13) {
                $('#btnsearch').trigger('click')
            } else if (keycode == 38 || keycode == 40) {
                ECS.Model.key = ECS.Model.key <= len ? keycode == 38 ? (ECS.Model.key <= 0 ? ECS.Model.key = len : ECS.Model.key -= 1) : (ECS.Model.key > len - 1 ? ECS.Model.key = 0 : ECS.Model.key += 1) : keycode == 38 ? ECS.Model.key = len + 1 : ECS.Model.key = 0;
                if (ECS.Model.key == 0) {
                    $(t).val(ECS.Model.keyvalue);
                    this.searchList.find('li').css({
                        background: ''
                    })
                } else {
                    if (this.searchList.css('display') == 'none')
                        return;
                    var k = keycode == 38 ? ECS.Model.key + 1 : ECS.Model.key - 1;
                    var li = $(this.$searchList + ' li:eq(' + (ECS.Model.key - 1) + ')');
                    this.keyup.toggle.call(this, li);
                    var liv = li.attr('data-val');
                    $(t).val(liv);
                }
            } else if (keycode == 13) {
                if (ECS.Model.key > 0) {
                    var li = $(this.$searchList + ' li:eq(' + (ECS.Model.key - 1) + ')');
                    var liv = li.find('a').attr('href');
                    if (liv) {
                        window.location.href = liv; return false;
                    }
                }
            } else {
                var code = "$<>\'*'&%";
                var c = String.fromCharCode(code);
                if (code.indexOf(c) != -1) {
                    return;
                }
                if (ECS.Model.SearchStart) {
                    if (!ECS.Model.Times) {
                        ECS.Model.Times = setInterval(function () {
                            if (!ECS.Model.SearchStart) {
                                clearInterval(ECS.Model.Times);
                                ECS.Model.Times = null;
                                that.keyup.request.call(that, t, event)
                            }
                        }, 10)
                    }
                } else {
                    that.keyup.request.call(this, t, event)
                }
            }


        }
        .method('toggle', function (li) {

            li.css({
                background: '#eaeaea'
            }).find('div').show();
            if (li.find('div').size() > 0)
                li.find('img').show().addClass('sh_ico02').removeClass('sh_ico01');
            else
                li.find('img').hide();
            li.siblings().css({
                background: ''
            }).find('div').hide();
            li.siblings().css({ background: '' }).find('img').show().addClass('sh_ico01').removeClass('sh_ico02');
        })
        .method('request', function (t, event) {

            ECS.Model.SearchStart = true;
            var v = this.searchkeyword.val(), that = this;
            if (ECS.Model.keyvalue == v) {
                ECS.Model.SearchStart = false;
                return;
            }
            if (!v) {
                ECS.Model.key = 0;
                ECS.Model.keyvalue = v;
                ECS.Model.SearchStart = false;

                that.searchList.hide && that.searchList.hide();
                return;
            }

            var hide = false;
            $.ECS.ajax({
                url: '/base/getsearchassociation',
                data: {
                    key: v.replace(/'/g, '')
                },
                async: true,
                notvalidate: true,
                success: function (data) {
                    data = $.parseJSON(data);
                    if (data.status == 1 && data.data.length > 0) {
                        var li = '', categoryOnlineSpacil = '';
                        var d = data.data, height = d.length;
                        for (var a in d) {
                            if (d[a].IsCategory || d[a].IsOnlineSpecial) {
                                categoryOnlineSpacil += $.ECS.format('<div class="sh_word2"><a href="{0}" title="{1}">到<span>{1}</span>{2}页面</a></div>', d[a].Url, d[a].Key, d[a].IsCategory ? '分类' : '专题');
                            } else {
                                var isItems = (d[a].Items && d[a].Items.length > 0 && height > 4);
                                li += $.ECS.format('<li data-val="{1}"><a href=' + getLocationHref("/products/search?keyword={0}") + ' title="{1}">{1}{2}</a>', encodeURIComponent(d[a].Key), d[a].Key, isItems ? '<img src="/Content/images/top/top_ico01.gif" width="6" height="9" class="sh_ico01">' : '');
                                if (isItems) {
                                    var list = '', items = d[a].Items, length = items.length;
                                    for (var i = 0; i < length; i++) {
                                        list += $.ECS.format('<em><a href=' + getLocationHref("/products/search?keyword={0}") + '>{1}</a></em>', encodeURIComponent(d[a].Key + ' ' + items[i]), items[i])
                                    }
                                    var bottom = '';
                                    if (a > 6 && length < 9) {
                                        if (length < a) {
                                            bottom = 'bottom:' + ((height - a) * 10) + 'px';
                                        } else {
                                            bottom = 'bottom:-1px';
                                        }
                                    } else if (a > 2 && length < 10) {
                                        var l = (11 - length - a) * 20;
                                        if (l > 0 && a > 3) {
                                            bottom = 'bottom:' + l + 'px';
                                        }
                                        if (l < 0 && a + 1 > length) {
                                            bottom = 'bottom:0px';
                                        }
                                        if (length <= 3 && height - a <= 3) {
                                            bottom = 'bottom:0px'
                                        }
                                    }
                                    if (height - a <= 2)
                                        bottom = 'bottom:0px';
                                    console.log(a + "  " + (26 * a));
                                    li += $.ECS.format('<div data-type="searchli" class="search_right" style="top:{2}px;display:none;height:{3}px;overflow:hidden">\
                                                                 <dl style="{5}{4}">\
                                                                      <dt>{0}</dt>\
                                                                      <dd>\
                                                                     {1}</dd>\
                                                                </dl>\
                                                            </div>', d[a].Key.substring(0, 9), list, -(26 * a), height * 26, bottom, length >= 9 ? '' : 'position:absolute;');
                                }
                                li += '</li>';
                            }
                        }
                        if (categoryOnlineSpacil || li) {
                            that.categoryOnlineSpacil.html(categoryOnlineSpacil).show();
                            that.searchList.show().find('ul').html(li).show();
                            if (height >= 9) {
                                $('.search_right').find('em').css({ 'margin': '0px 10px 5px 8px' })
                            }
                            else if (height <= 5) {
                                $('.search_right').find('em').css({ 'margin-bottom': '9px' })
                            } else if (height == 6) {
                                $('.search_right').find('em').css({ 'margin-bottom': '8px' })
                            }
                            else {
                                $('.search_right').find('em').css({ 'margin-bottom': '7px' })
                            }
                        } else {
                            hide = true;
                        }
                    } else {
                        hide = true;
                    }
                    if (hide) {

                        that.categoryOnlineSpacil.html('').hide();
                        if (that.searchList) {
                            that.searchList.hide();
                            that.searchList.find('ul').html('').hide()
                        }

                    }
                    ECS.Model.key = 0;
                    ECS.Model.keyvalue = v;
                    ECS.Model.SearchStart = false;

                },
                error: function () {
                    ECS.Model.key = 0;
                    ECS.Model.keyvalue = v;
                    ECS.Model.SearchStart = false;
                    that.searchList && that.searchList.hide();
                }
            })

        }),
        mouseover: function (t, event) {
            var li = $(t);
            var that = this;
            setTimeout(function () {
                that.keyup.toggle.call(this, li)
            }, 2)
        },
        mouseleave: function () {
            this.searchList && this.searchList.hide();
        },
        init: function () {
            if (this.searchkeyword && this.searchkeyword.val()) {
                if (window.oldKey)
                    this.searchkeyword.val(oldKey);
                if ($.trim(this.searchkeyword.val()).length > 0) {
                    this.searchkeyword.css('color', '#000');
                }
                ECS.Model.SearchKey = '请输入您要的商品名称';
            }

            var $searchResults = $("#J_search_results"),
                unCloseIds = ",J_search_results,searchkeyword,";
            $(document).bind("click", function (e) {

                var id = e.target.id || "";

                if (id == "J_results_close") {
                    $searchResults.addClass("hide");
                }
                else if (unCloseIds.indexOf("," + id + ",") == -1 && !$(e.target).closest("#J_search_results").length) {
                    $searchResults.addClass("hide");
                }

            })


        }
    });


})

$(function () {
    $('body').click(function (event) {
        var ev = event || window.event;
        var target = ev.srcElement || ev.target;
        if (target.id != 'searchkeyword') {
            $('[ECS-id=searchList]').hide()
        }
    });
    $("#J_his_clear").click(function () {
        _setCookie("SearchHistory",'');
        $("#J_search_results .his-list").html('').hide();
        $("#J_search_results .his-empty").show();
        return false;
    });
    $('body').CreateController({
        events: {
            '[name=btnbutton] mouseenter': 'paymouseenter',
            '[name=btnbutton] mouseleave': 'paymouseleave',
            '[data-type="collect"] click': 'collect',
            '[ECS-source] mouseover': 'blsource'
        },
        paymouseenter: function (t) {
            this.paymouseleave.toggleClass.call(this, t, 1)
        },
        paymouseleave: function (t) {
            this.paymouseleave.toggleClass.call(this, t, 0)
        }
        .method('toggleClass', function (t, type) {
            var className = $(t).attr("class");
            var classlist = className.split(' ');
            var classOld = classlist[0];
            if (!classOld) {
                classOld = classlist[1]
            }
            var newClass = className;
            //if (newClass.indexOf('_2') == -1) {
            //    newClass = newClass.replace(classOld, classOld + "_2");
            //} else {
            //    className = className.replace('_2', '');
            //}
            if (type == 1) {
                $(t).removeClass(className).addClass(newClass)
            } else {
                $(t).removeClass(newClass).addClass(className)
            }
        }),
        collect: function () {
            try {
                window.external.addFavorite(window.location.href, document.title)
            } catch (e) {
                try {
                    window.sidebar.addPanel(document.title, window.location.href, "")
                } catch (e) {
                    alert("加入收藏失败，请手动添加")
                }
            }
        },
        blsource: function (t, event) {
            var v = $(t).attr('ECS-source');
            var thisHref = $(t).attr("href");
            if (v) {
                if (thisHref.indexOf("ECSSource") < 0) {
                    if (thisHref.indexOf("?") >= 0) {
                        thisHref += "&";
                    } else {
                        thisHref += "?";
                    }
                    thisHref += "ECSSource=" + v;
                }
                if ($(t).attr('ECS-location') && thisHref.indexOf("ECSLocation") < 0) {
                    thisHref += "&ECSLocation=" + $(t).attr('ECS-location');
                }
            }

            $(t).attr('href', thisHref);
        },
        init: function () {

            lazyLoad.Run();
            var urlcase = window.location.href.toLowerCase();
            var menulist = $("#menulists a");
            for (var a = 0; a < menulist.length; a++) {
                if (menulist[a] != null && $(menulist[a]) != null && $(menulist[a]).attr("href") != null) {
                    if ($(menulist[a]).attr("href").toLowerCase() == urlcase) {
                        if ($(menulist[a]).hasClass("word")) {
                            $(menulist[a]).removeClass("word").addClass("word2")
                        } else {
                            $(menulist[a]).css("color", "#C5EF4F")
                        }
                        break
                    }
                }
            }
        }
    });
});

$(function () {
    $('#footers').CreateController({
        elements: {
            'em[data-letter=b]': 'em',
            '#tab_icon': 'pointer',
            '#letterBeganWith': 'letterlist',
            '#allcitys': 'citylist'
        },
        events: {
            '#go_top click': 'gotop',
            '#site_go click': 'site_go',
            '#site_province change': 'province_change',
            '#hide_city click': 'hidecity',
            '[data-site] click': 'switchsite',
            '#letterBeganWith a click': 'switchletter'
        },
        gotop: function () {
            smoothScroll(0, 500);
        },
        site_go: function () {
            switchCurSite.apply(null, $("[data-province]:visible").val().split(","));
        },
        province_change: function () {
            $("[data-province]").hide().filter("[data-province=" + $("#site_province").val() + "]").show();
        },
        hidecity: function () {
            hideCity();
        },
        switchsite: function (el) {
            switchCurSite.apply(null, $(el).attr("data-site").split(","));
        },
        switchletter: function (el) {
            var index = $(el).parent().index();
            var left = 32 * (index + 1);
            this.pointer.css("left", left);
            this.letterlist.find("a.on").removeClass("on");
            $(el).addClass("on");
            this.citylist.find("em").hide().filter("[data-letter=" + $(el).attr("data-letter") + "]").show();
        },
        init: function () {
            $(window).scroll(function () {
                if ($(document).scrollTop() > 300) {
                    $("#go_top").show()
                } else {
                    $("#go_top").hide()
                }
            });
            if ($(document).scrollTop() > 300) {
                $("#go_top").show()
            }
            this.em.show();            
        }
    })
})

//左侧出现
$(function () {

    $('#footers').CreateController({
        elements: {
            'em[data-letter=b]': 'em',
            '#tab_icon': 'pointer',
            '#letterBeganWith': 'letterlist',
            '#allcitys': 'citylist'
        },
        events: {
            '#gotops click': 'float_icon',
            '#site_go click': 'site_go',
            '#site_province change': 'province_change',
            '#hide_city click': 'hidecity',
            '[data-site] click': 'switchsite',
            '#letterBeganWith a click': 'switchletter'
        },
        gotop: function () {
            smoothScroll(0, 500);
        },
        site_go: function () {
            switchCurSite.apply(null, $("[data-province]:visible").val().split(","));
        },
        province_change: function () {
            $("[data-province]").hide().filter("[data-province=" + $("#site_province").val() + "]").show();
        },
        hidecity: function () {
            hideCity();
        },
        switchsite: function (el) {
            switchCurSite.apply(null, $(el).attr("data-site").split(","));
        },
        switchletter: function (el) {
            var index = $(el).parent().index();
            var left = 32 * (index + 1);
            this.pointer.css("left", left);
            this.letterlist.find("a.on").removeClass("on");
            $(el).addClass("on");
            this.citylist.find("em").hide().filter("[data-letter=" + $(el).attr("data-letter") + "]").show();
        },
        init: function () {
            $(window).scroll(function () {
                if ($(document).scrollTop() > 300) {
                    $("#gotops").show()
                } else {
                    $("#gotops").hide()
                }
            });
            if ($(document).scrollTop() > 300) {
                $("#gotops").show()
            }
            this.em.show();

            //var url = "http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js&k=" + Math.random();
            //loadScript(url, function () {
            //    handleAddr(remote_ip_info);
            //}, "text/ecmascript");

        }
    })
})








function showCity() {
    //$("#pop_city").show();
    //var city_recommended = $("#city_recommended").find("[city-recommended]");
    //if (city_recommended.length) {
    //    $("#site_province").val(Number(city_recommended.attr("city-recommended"))).trigger("change");
    //    $("[data-province]:visible").val(city_recommended.attr("data-site"));
    //}
    //ShowBack();
}

function hideCity() {
    var IsAutoSelected = window.Cookies("IsAutoSelected").val();
    if (IsAutoSelected != "1") {
        window.Cookies("IsAutoSelected").val("1");
    }
    var curCity = window.Cookies("city").val();
    var city = $("#pop_city").data("city");
    if (curCity != city) {
        window.Cookies("city").val(city);
    }
    $("#pop_city").hide();
    HideBack();
}

function handleAddr(ipInfo) {
    var newProvince = ipInfo.province;
    var newCity = ipInfo.city;
    var city_recommended = '';
    var oldCity = window.Cookies("city").val();
    var curCity = window.Cookies("DeliverySysNo").val();
    var isSelected = window.Cookies("IsAutoSelected").val() == "1";

    var encodeCN = function (str) { return escape(str).replace(/%/g, "*") }
    var judgementFailed = function () {
        newCity = "empty";
        if (oldCity != encodeCN(newCity) || !isSelected) {
            $("#city_recommended").html(city_recommended);
            showCity();
            $("#pop_city").data("city", encodeCN(newCity));
        }
    }
    //如果没有省信息
    if (!newProvince) {
        judgementFailed();
        return;
    }
    if (!newCity) {
        judgementFailed();
        return;
    }
    if (_getCookie("SentProvinceSysNo") == null || _getCookie("SentProvinceSysNo") == "") {
        _auto_ipset(newProvince, newCity)
    } else {
        _initRecieveArea();
    }
}


function getCookie(name, def) { var arr, reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)"); if (arr = document.cookie.match(reg)) { return (arr[2]); } return def; }
function getQryStr(name, def) { var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); var r = window.location.search.substr(1).match(reg); if (r != null) { return unescape(r[2]); } return def; }
var cps = getQryStr("bSrc", "");
var chl = getQryStr("bChannel", "");
var cid = getQryStr("cid", "");
var bWi = getQryStr("bWi", "");
var Site = getQryStr("bSite", "");
var Delivery = getQryStr("bDelivery", "");
var _paq = _paq || [];
_paq.push(["enableLinkTracking"]);
_paq.push(["setCustomVariable", 1, getCookie("userGuid", "guid"), getCookie("userID", "uid")]);
_paq.push(["setCustomVariable", 2, getCookie("WebSiteSysNo", "1"), cps + ":" + chl + ":" + cid + ":" + bWi + ":" + Site + ":" + Delivery]);
if (cps.length > 0) {
    var l = window.location.href + "&pk_campaign=" + cps;
    if (chl.length > 0)
        l = l + "&pk_kwd=" + chl;
    _paq.push(["setCustomUrl", l]);
}

//var AppenumCartSource = { '0000': '未知来源', '1001': '首页来源', '1002': '大类来源', '1003': '中类来源', '1004': '小类来源', '1005': '详情页来源' };
var AppenumCartSource = { '0000': '未知来源', '1001': '添加购物车-首页', '1002': '添加购物车-大类来源', '1003': '添加购物车-中类来源', '1004': '添加购物车-小类来源', '1005': '添加购物车-详情页来源', '1006': '添加购物车-加加购', '1007': '购物车新增', '1008': '购物车删除', '1009': '订单添加', '1010': ' 关键字搜索', '1011': '添加购物车-订单详情', '1012': '添加购物车-我的收藏', '1013': '添加购物车-推荐位', '1014': '添加购物车-二级分类(中类）', '1015': '添加购物车-二级分类(小类)' };
var AppenumSource = { "0": "未知来源", "1": "首页优选", "2": "首页新品", "3": "首页抢购", "4": "首页每日鲜" };
//商品可售状态
var AppSalesStatus = { '0000': '未知', '1001': '商品无效', '1002': '无法送达', '1003': '库存不足', '1004': '商品可售' };
function getUserId() {
    return $('#UserId').val();
}

//jxs add 2014-12-15 根据大站  小站 站点 url 拼接
function getLocationHref(url) {
    //    http://www.ecs.com/chucheng2013.jsp
    //    /products/search?keyword=%E4%BD%B3%E6%B2%9B%E5%A5%87%E5%BC%82%E6%9E%9C

    var urlHref = window.location.href;
    
    var webSiteSysNo = "";
    var deliverySysNoStr = "";

    //if (urlHref.indexOf('/huanan') > -1)
    //    webSiteSysNo = "/huanan";
    //else if (urlHref.indexOf('/huadong') > -1)
    //    webSiteSysNo = "/huadong";

    switch (getCookie("WebSiteSysNo", "1")) {
        case "2":
            webSiteSysNo = "/huanan";
            break;
        case "3":
            webSiteSysNo = "/huadong";
            break;
        default:
            break;
    }

    var deliverySysNo = getCookie("DeliverySysNo", "1007");

    if (url.toLowerCase().indexOf("shenyang") == -1)
        deliverySysNo = getHttpParm(urlHref, "cty");

    if (deliverySysNo != "2" && deliverySysNo != "120" && deliverySysNo != "244") {
        if (url.indexOf("cty=") == -1) {
            if (url.indexOf("?") == -1)
                deliverySysNoStr = "?" + "cty=" + deliverySysNo;
            else
                deliverySysNoStr = "&" + "cty=" + deliverySysNo;
        }
    }

    var httpStr = "http://";
    var httpHostStr = "http://www.ecs.com";
    var httpIndex = url.indexOf(httpStr);
    if (httpIndex < 0) {
        url = webSiteSysNo + url + deliverySysNoStr;
    }
    else {
        if (url.indexOf(httpHostStr) > -1) {
            var urlTemp = url.substr(httpHostStr.length, url.length - httpHostStr.length);

            var hrefArray = window.location.href.split('/');
            url = httpStr + hrefArray[2] + webSiteSysNo + urlTemp + deliverySysNoStr;
        }
    }

    return url;
}


function getHttpParm(url, parm) {
    var value = 2;
    var parmArray = url.split('?');
    if (parmArray.length > 1) {
        var parmArray_t = parmArray[1].split('&');
        for (var i = 0; i < parmArray_t.length; i++) {
            var parmArray_t_v = parmArray_t[i].split('=');
            if (parmArray_t_v.length == 2) {
                value = parmArray_t_v[1];
            }
        }
    }
    return value;
}

//jxs update 2014-12-23 将GoSC方法统一
function GoSC(C1SysNo, C2SysNo, C3SysNo) {
    var str_url = "";

    if (C3SysNo == null || C3SysNo == "") {
        str_url = getLocationHref("/scategory-" + C1SysNo + "-" + C2SysNo + ".html");
    } else {
        str_url = getLocationHref("/scategory-" + C1SysNo + "-" + C2SysNo + "-" + C3SysNo + ".html");
    }
    window.location.href = (str_url);
}

/*
* 写入cookie
* name:cookie 名
* value:cookie 值
*/
function _setCookie(name, value) {
    var Days = 30; //此 cookie 将被保存 30 天
    var exp = new Date();
    exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);
    document.cookie = name + "=" + escape(value) + ";expires=" + exp.toGMTString() + ";path=/";
}

//删除cookie
function _delCookie(name) {
    var exp = new Date();
    exp.setTime(exp.getTime() - 1);
    var cval = getCookie(name);
    if (cval != null) document.cookie = name + "=" + cval + ";expires=" + exp.toGMTString() + ";path=/";
}

//读取cookie
function _getCookie(name) {
    var arr = document.cookie.match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
    if (arr != null)
        return unescape(arr[2]);
    return null;
}


/*
* 图片懒加载
* @param {object} $imgs JQuery object
* @param {function} callback 回调函数
*/
 function lzImg ($imgs,callBack) {

     if ($imgs === undefined) {
         $imgs = $("img.lz");
     }
     $imgs.lazyload({
         failure_limit: 10,
         effect: "fadeIn",
         effect_speed: 100,
         skip_invisible : false,
         load: function () {
            callBack && callBack.call(this);
         }
     })
 };

/*
*图片立即加载
*@param {object} $parent JQuery object 图片存放的父节点
*/
function qlImg ($parent) {

     if ($parent.data("imgIsLoad")) return;

     $("img", $parent).each(function () {
         var $that = $(this),
             src = $that.data("src");
         src && $that.attr("src", src);
     });

     $parent.data("imgIsLoad", 1);
 }


